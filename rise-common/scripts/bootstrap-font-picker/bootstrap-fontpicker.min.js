(function(c){var m=function(h,f){var a=c(h),b=c.extend(!0,{},{"i18n-prefix":"picker",defaults:{font:"Arial","font-url":"","font-size":"20","is-bold":!1,"is-italic":!1,color:"rgba(0, 0, 0, 1)"},visibility:{font:!0,"font-size":!0,variants:!0,color:!0,text:!0}},f),d="",k=RiseVision.Common.Utility,m=function(){var q=a.find(".font-url"),e=a.find(".font-text"),g=!1;d=a.find(".font-family").val();null!=d&&("Use Custom Font"==d?(k.loadCustomFont(b["i18n-prefix"],q.val()),e.css("font-family",b["i18n-prefix"]),
a.find(".font-picker-custom-font").show()):(a.find(".font-picker-font .bfh-selectbox .bfh-selectbox-options a").each(function(a){if(c(this).text()==d)return g=!0,!1}),g?e.css("font-family",a.find(".font-picker-font .bfh-selectbox a[data-option='"+a.find(".font-family").val()+"']").css("font-family")):(k.loadGoogleFont(d),n(d),e.css("font-family",d))));e.css("font-size",a.find(".font-size").val()+"px");e.css("color",a.find(".color-picker").val())},n=function(b){var c=a.find(".font-picker-font .bfh-selectbox [role=option]");
c.find("li.google-font").remove();c.prepend("<li class='google-font'><a tabindex='-1' href='#' style='font-family: Google' data-option='"+b+"'>"+b+"</a></li>");a.find(".font-picker-font .bfh-selectbox .bfh-selectbox-option").data("option",b).html(b);a.find(".font-picker-font .bfh-selectbox .font-family").val(b);l()},l=function(){var b=a.find(".font-picker-font .bfh-selectbox [role=option] li").length,d=a.find(".font-picker-font .bfh-selectbox [role=option] li:nth-last-child(2)"),g=a.find(".font-picker-font .bfh-selectbox [role=option] li:last"),
b=a.find(".font-picker-font .bfh-selectbox [role=option] li").slice(0,b-2).sort(function(a,b){var d=c(a).find("a").text(),p=c(b).find("a").text();return d==p?0:d<p?-1:1});a.find(".font-picker-font .bfh-selectbox [role=option]").html(b).append(d).append(g)};this.getFont=function(){return a.find(".font-family").val()};this.getFontStyle=function(){return a.find("a[data-option='"+a.find(".font-family").val()+"']").css("font-family")};this.getFontURL=function(){return a.find(".font-url").val()};this.getFontSize=
function(){return a.find(".font-size").val()};this.getBold=function(){return a.find(".font-bold").is(":checked")};this.getItalic=function(){return a.find(".font-italic").is(":checked")};this.getColor=function(){return a.find(".color-picker").val()};(function(){var f=c('<div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">'),e=c('<div class="checkbox">'),g=c('<div class="checkbox">'),h=c('<span class="font-text" data-i18n="'+b["i18n-prefix"]+'.text" />'),l=b.defaults["is-bold"]?'checked="checked"':
"",r=b.defaults["is-italic"]?'checked="checked"':"";b.visibility.font&&(a.find(".font-picker-font").append('<label data-i18n="'+b["i18n-prefix"]+'.font"></label><div class="bfh-selectbox"><input class="font-family" type="hidden" value=""><a class="bfh-selectbox-toggle" role="button" data-toggle="bfh-selectbox" href="#"><span class="bfh-selectbox-option bfh-selectbox-large" data-option=""></span><b class="caret"></b></a><div class="bfh-selectbox-options"><div role="listbox"><ul role="option"></ul></div></div></div></div>'),
f.append('<div class="modal-dialog"><div class="modal-content"><div class="modal-header no-border"><button type="button" class="close" data-dismiss="modal" aria-hidden="true"><img src="http://s3.amazonaws.com/Common-Production/widget/img/close.png" alt="Close"></button><h2 class="modal-title" data-i18n="'+b["i18n-prefix"]+'.modal-title"></h2></div><div class="modal-body"><div class="list-group bfh-googlefontlist"></div></div><div class="modal-footer no-border"><button class="btn btn-primary" type="button" data-dismiss="modal"><span class="button-spacer" data-i18n="cancel"></span><i class="fa fa-times-circle size_20"></i></button></div></div></div>'),
a.find(".font-picker-font").append(f),a.find(".font-picker-custom-font").append('<label data-i18n="'+b["i18n-prefix"]+'.font-url"></label><input class="font-url form-control" type="url" data-i18n="[placeholder]'+b["i18n-prefix"]+'.font-url;" value="'+b.defaults["font-url"]+'"></div>'));b.visibility["font-size"]&&a.find(".font-picker-size").append('<label data-i18n="'+b["i18n-prefix"]+'.font-size"></label><div class="bfh-selectbox"><input class="font-size" type="hidden" value=""><a class="bfh-selectbox-toggle" role="button" data-toggle="bfh-selectbox" href="#"><span class="bfh-selectbox-option bfh-selectbox-large" data-option=""></span><b class="caret"></b></a><div class="bfh-selectbox-options"><div role="listbox"><ul role="option"></ul></div></div></div></div>');
b.visibility.variants&&(e.append('<label data-i18n="'+b["i18n-prefix"]+'.bold"></label><input class="font-bold" type="checkbox"'+l+"></div>"),g.append('<label data-i18n="'+b["i18n-prefix"]+'.italic"></label><input class="font-italic" type="checkbox"'+r+"></div>"),a.find(".font-picker-variants").append('<label data-i18n="'+b["i18n-prefix"]+'.font-variants"></label>').append(c("<div>").append(e).append(g)).append("</div>"));b.visibility.color&&(a.find(".font-picker-color").append('<label data-i18n="'+
b["i18n-prefix"]+'.color"></label><input type="text" class="medium color-picker form-control" value="'+b.defaults.color+'" data-color-format="rgba"></div>'),a.find(".color-picker").colorpicker().on("blur changeColor",function(b){b="blur"==b.type?c(this).val():b.color.toHex();a.find(".font-text").css("color",b)}));b.visibility.text&&a.find(".font-picker-text").append(h);a.find(".font-picker-font .bfh-selectbox").bfhfonts({family:b.defaults.font,showCustom:!0,showMore:!0});a.find(".font-picker-font .bfh-googlefontlist").bfhgooglefontlist();
a.find(".font-picker-size .bfh-selectbox").bfhfontsizes({size:b.defaults["font-size"]});m();a.find(".font-picker-font .bfh-selectbox").bind("change.bfhselectbox",function(b){"More Fonts..."==b.target.value?(a.find(".font-picker-custom-font").hide(),a.find(".modal").modal({backdrop:!1})):"Use Custom Font"==b.target.value?(d=a.find(".font-family").val(),a.find(".font-picker-custom-font").show(),a.find(".font-url").focus(),a.find(".font-picker-font .bfh-selectbox").trigger("customFontSelected")):(a.find(".font-text").css("font-family",
a.find(".font-picker-font .bfh-selectbox a[data-option='"+a.find(".font-family").val()+"']").css("font-family")),a.find(".font-picker-custom-font").hide(),d=a.find(".font-family").val(),a.find(".font-picker-font .bfh-selectbox").trigger("fontSelected"))});a.find(".bfh-googlefontlist").bind("select",function(b,c){k.loadGoogleFont(c);n(c);a.find(".font-text").css("font-family",c);a.find(".modal").modal("hide");d=a.find(".font-family").val()});a.find(".font-picker-font .modal .close").bind("click",function(){a.find(".font-picker-font .bfh-selectbox .bfh-selectbox-option").data("option",
d).html(d);a.find(".font-picker-font .bfh-selectbox .font-family").val(d);"Use Custom Font"==d&&a.find(".font-picker-custom-font").show()});a.find(".font-url").bind("change",function(){var d=b["i18n-prefix"];""!=c(this).val()&&(k.loadCustomFont(d,c(this).val()),a.find(".font-text").css("font-family",d))});a.find(".font-picker-size .bfh-selectbox").bind("change.bfhselectbox",function(b){a.find(".font-text").css("font-size",a.find(".font-size").val()+"px")});a.find(".font-bold").bind("change",function(){c(this).is(":checked")?
a.find(".font-text").css("font-weight","bold"):a.find(".font-text").css("font-weight","normal")});a.find(".font-italic").bind("change",function(){c(this).is(":checked")?a.find(".font-text").css("font-style","italic"):a.find(".font-text").css("font-style","normal")});a.find(".font-bold").trigger("change");a.find(".font-italic").trigger("change")})()};c.fn.fontPicker=function(h){return this.each(function(){var f=c(this);if(!f.data("font-picker")){var a=new m(this,h);f.data("font-picker",a)}})}})(jQuery);