function ContentFlowItem(a,b,c){if(this.CFobj=a,this._activeElement=a.conf.activeElement,this.pre=null,this.next=null,this.clickItem=function(a){if(!a)var a=window.event;var b=a.target?a.target:a.srcElement,c=b.itemIndex?b.itemIndex:b.parentNode.itemIndex,d=this.items[c];this._activeItem==d?this.conf.onclickActiveItem(d):0!=this.conf.onclickInactiveItem(d)&&this.moveToIndex(c)}.bind(a),this.setIndex=function(a){this.index=a,this.element.itemIndex=a},this.getIndex=function(){return this.index},"IMG"==$CF(b).nodeName){var d=document.createElement("div");d.className="item";var e=b.parentNode.replaceChild(d,b);if(e.className="content",d.appendChild(e),b.title){var f=document.createElement("div");f.className="caption",f.innerHTML=b.title,d.appendChild(f)}b=d}if(this.element=$CF(b),this.item=b,"undefined"!=typeof c&&this.setIndex(c),this.content=this.element.getChildrenByClassName("content")[0],this.caption=this.element.getChildrenByClassName("caption")[0],this.label=this.element.getChildrenByClassName("label")[0],"IMG"==this.content.nodeName){a._imagesToLoad++;var g=function(){a._imagesToLoad--,this.image=this.content,this.setImageFormat(this.image),a.conf.reflectionHeight>0&&this.addReflection(),this.initClick(),a._addItemCueProcess(!0)}.bind(this);if(this.content.complete&&this.content.width>0)window.setTimeout(g,100);else if(this.Browser.IE&&!this.content.onload)var h=this,i=window.setInterval(function(){h.content.complete&&h.content.width>0&&(window.clearInterval(i),g())},10);else this.content.onload=window.setTimeout(g,100)}else this.initClick(),a._addItemCueProcess(!0)}function ContentFlow(a,b){if(!a)throw"ContentFlow ERROR: No flow container node or id given";ContentFlowGlobal.Flows[0]=this,this.Container=a,this._userConf=b?b:{},this.conf={},this._loadedAddOns=new Array,this.isInit||this._init()}var ContentFlowGlobal={Flows:new Array,AddOns:{},scriptName:"ContentFlow.js",scriptElement:null,Browser:new function(){this.Opera=!!window.opera,this.IE=!(!document.all||this.Opera),this.IE6=!(!this.IE||"undefined"!=typeof window.XMLHttpRequest),this.IE8=!(!this.IE||"undefined"==typeof document.querySelectorAll),this.IE7=!(!this.IE||this.IE6||this.IE8),this.WebKit=!!/WebKit/i.test(navigator.userAgent),this.iPhone=!!/iPhone|iPod/i.test(navigator.userAgent),this.Chrome=!!/Chrome/i.test(navigator.userAgent),this.Safari=!(!/Safari/i.test(navigator.userAgent)||this.Chrome),this.Konqueror="KDE"==navigator.vendor,this.Konqueror4=!(!this.Konqueror||!/native code/.test(document.getElementsByClassName)),this.Gecko=!this.WebKit&&"Gecko"==navigator.product,this.Gecko19=!(!this.Gecko||!Array.reduce)},getAddOnConf:function(a){return this.AddOns[a]?this.AddOns[a].conf:{}},setAddOnConf:function(a,b){this.AddOns[a].setConfig(b)},getScriptElement:function(a){for(var b=new RegExp(a),c=document.getElementsByTagName("script"),d=0;d<c.length;d++)if(c[d].src&&b.test(c[d].src))return c[d];return""},getScriptPath:function(a,b){var c=new RegExp(b+".*");return a.src.replace(c,"")},addScript:function(a){if(this.Browser.IE||this.Browser.WebKit||this.Browser.Konqueror)document.write('<script type="text/javascript" src="'+a+'"></script>');else{var b=document.createElement("script");b.src=a,b.setAttribute("type","text/javascript"),document.getElementsByTagName("head")[0].appendChild(b)}},addScripts:function(a,b){for(var c=0;c<filename.length;c++)this.addScript(basepath+b[c])},addStylesheet:function(a){if(this.Browser.Gecko19){var b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("href",a),b.setAttribute("type","text/css"),b.setAttribute("media","screen"),document.getElementsByTagName("head")[0].appendChild(b)}else document.write('<link rel="stylesheet" href="'+a+'" type="text/css" media="screen" />')},addStylesheets:function(a,b){for(var c=0;c<filename.length;c++)this.addStylesheet(basepath+b[c])},initPath:function(){this.scriptElement=this.getScriptElement(this.scriptName),this.scriptElement||(this.scriptName="ContentFlow.js",this.scriptElement=this.getScriptElement(this.scriptName)),this.BaseDir=this.getScriptPath(this.scriptElement,this.scriptName),this.AddOnBaseDir||(this.AddOnBaseDir=this.BaseDir),this.CSSBaseDir||(this.CSSBaseDir="https://s3.amazonaws.com/Gadget-Photo-Album/CoverFlow/css/")},init:function(){if(this.addStylesheet(this.CSSBaseDir+"ContentFlow.css"),this.loadAddOns=new Array,this.scriptElement.getAttribute("load"))for(var a=this.loadAddOns=this.scriptElement.getAttribute("load").replace(/\ +/g," ").split(" "),b=0;b<a.length;b++)""!=a[b]&&this.addScript(this.AddOnBaseDir+"ContentFlowAddOn_"+a[b]+".js");var c=this;if(document.addEventListener)if(this.Browser.WebKit)var d=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(d),c.onloadInit())},10);else document.addEventListener("DOMContentLoaded",c.onloadInit,!1);else if(this.Browser.IE){document.write("<script id=__ie_cf_onload defer src=javascript:void(0)></script>");var e=document.getElementById("__ie_cf_onload");e.onreadystatechange=function(){"complete"==this.readyState&&c.onloadInit()}}window.addEvent("load",c.onloadInit,!1)},onloadInit:function(){if(!arguments.callee.done){for(var a=0;a<ContentFlowGlobal.loadAddOns.length;a++){var b=ContentFlowGlobal.loadAddOns[a];if(!ContentFlowGlobal.AddOns[b]){var c=ContentFlowGlobal;return void window.setTimeout(c.onloadInit,10)}}if(arguments.callee.done=!0,window.Element&&Element.implement&&document.all&&!window.opera)for(var d in window.CFElement.prototype)if(!window.Element.prototype[d]){var e={};e[d]=window.CFElement.prototype[d],Element.implement(e)}for(var a=0;a<ContentFlowGlobal.Flows.length;a++)ContentFlowGlobal.Flows[a].init();var f=document.getElementsByTagName("div");a:for(var a=0;a<f.length;a++)if(f[a].className.match(/\bContentFlow\b/)){for(var g=0;g<ContentFlowGlobal.Flows.length;g++)if(f[a]==ContentFlowGlobal.Flows[g].Container)continue a;var h=new ContentFlow(f[a],{},!1);h.init()}}}};ContentFlowGlobal.initPath();var ContentFlowAddOn=function(a,b,c){if("undefined"!=typeof c&&0==c||(ContentFlowGlobal.AddOns[a]=this),this.name=a,b||(b={}),this.methods=b,this.conf={},this.methods.conf&&(this.setConfig(this.methods.conf),delete this.methods.conf),this.scriptpath=ContentFlowGlobal.AddOnBaseDir,b.init){var d=b.init.bind(this);d(this)}};ContentFlowAddOn.prototype={Browser:ContentFlowGlobal.Browser,addScript:ContentFlowGlobal.addScript,addScripts:ContentFlowGlobal.addScripts,addStylesheet:function(a){a||(a=this.scriptpath+"ContentFlowAddOn_"+this.name+".css"),ContentFlowGlobal.addStylesheet(a)},addStylesheets:ContentFlowGlobal.addStylesheets,setConfig:function(a){for(var b in a)this.conf[b]=a[b]},_init:function(a){this.methods.ContentFlowConf&&a.setConfig(this.methods.ContentFlowConf)}};var ContentFlowGUIElement=function(a,b){return b.setDimensions=function(){this.dimensions=this.getDimensions(),this.center={x:this.dimensions.width/2,y:this.dimensions.height/2},this.position=this.findPos()},b.addObserver=function(b,c){var d=this.eventMethod=c.bind(a);this.observedEvent=b,this.addEvent(b,d,!1)},b.makeDraggable=function(a,b,c){this.stopDrag=function(b){if(!b)var b=window.event;if(this.Browser.iPhone){if(window.removeEvent("touchemove",a,!1),!this.ontochmove){var d=b.target;d.firstChild&&(d=d.firstChild);var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),d.dispatchEvent(e)}}else window.removeEvent("mousemove",a,!1);c(b)}.bind(this),this.initDrag=function(a){if(!a)var a=window.event;var c=a;a.touches&&(c=a.touches[0]),this.mouseX=c.clientX,this.mouseY=c.clientY,b(a)}.bind(this),this.startDrag=function(b){if(!b)var b=window.event;var c=this.stopDrag;if(this.Browser.iPhone){var d=this;d.ontouchmove=!1,window.addEvent("touchmove",function(b){d.ontouchmove=!0,a(b)},!1),b.preventDefault(),window.addEvent("touchend",c,!1)}else window.addEvent("mousemove",a,!1),window.addEvent("mouseup",c,!1);b.preventDefault&&b.preventDefault()}.bind(this);var d=this.startDrag;this.Browser.iPhone?this.addEventListener("touchstart",d,!1):this.addEvent("mousedown",d,!1)},b.Browser=ContentFlowGlobal.Browser,$CF(b).setDimensions(),b};if(ContentFlowItem.prototype={Browser:ContentFlowGlobal.Browser,makeActive:function(){this.element.addClassName("active"),this.CFobj.conf.onMakeActive(this)},makeInactive:function(){this.element.removeClassName("active"),this.CFobj.conf.onMakeInactive(this)},initClick:function(){var a=this.clickItem;this[this._activeElement].addEvent("click",a,!1)},setImageFormat:function(a){(this.Browser.IE6||this.Browser.IE7)&&(a.style.width="auto"),a.origProportion=a.width/a.height,a.setAttribute("origProportion",a.width/a.height),(this.Browser.IE6||this.Browser.IE7)&&(a.style.width=""),a.origProportion<=1?a.addClassName("portray"):a.addClassName("landscape")},addReflection:function(){var b,a=this.CFobj,c=this.content;if(this.Browser.IE){var d="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";if(a._reflectionColorRGB){if("transparent"==a.conf.reflectionColor){var e=b=this.reflection=document.createElement("img");b.src=c.src}else{b=this.reflection=document.createElement("div");var e=document.createElement("img");e.src=c.src,b.width=e.width,b.height=e.height,e.style.width="100%",e.style.height="100%";var f=a._reflectionColorRGB;b.style.backgroundColor="#"+f.hR+f.hG+f.hB,b.appendChild(e)}d+=" progid:DXImageTransform.Microsoft.Alpha(opacity=0, finishOpacity=50, style=1, finishX=0, startY="+100*a.conf.reflectionHeight+" finishY=0)"}else{var e=b=this.reflection=document.createElement("img");b.src=c.src}d+=" progid:DXImageTransform.Microsoft.Matrix(M11=1, M12=0, M21=0, M22="+1/a.conf.reflectionHeight+")",ContentFlowGlobal.Browser.IE6&&c.src.match(/\.png$/)&&(c.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c.src+"', sizingMethod=scale )",c.filterString="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c.src+"', sizingMethod=scale )",d+=" progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c.src+"', sizingMethod=scale )",c.origSrc=c.src,c.src="images/blank.gif",e.src="images/blank.gif"),b.filterString=d,e.style.filter=d}else{if(a._reflectionWithinImage)var g=this.canvas=$CF(document.createElement("canvas"));else var g=b=this.reflection=document.createElement("canvas");if(g.getContext){if(a._reflectionWithinImage)for(var h=0;h<c.attributes.length;h++)g.setAttributeNode(c.attributes[h].cloneNode(!0));var i=g.getContext("2d"),j=a.maxHeight,k=a._scaleImageSize(this,{width:j,height:j},j),l=k.width,m=k.height;if(a._reflectionWithinImage?(g.width=l,g.height=m,this.setImageFormat(g),g.height=m*(1+a.conf.reflectionHeight+a.conf.reflectionGap)):(g.width=l,g.height=m*a.conf.reflectionHeight),i.save(),a._reflectionWithinImage&&i.drawImage(c,0,0,l,m),a._reflectionWithinImage)var n=m*(1+a.conf.reflectionGap/2)*2;else var n=c.height;if(n-=1,i.translate(0,n),i.scale(1,-1),i.drawImage(c,0,0,l,m),i.restore(),a._reflectionColorRGB){var o=i.createLinearGradient(0,0,0,g.height),p=[0,.5,1];"transparent"==a._reflectionColor&&(i.globalCompositeOperation="destination-in",p=[1,.5,0]);var q=a._reflectionColorRGB.iR,r=a._reflectionColorRGB.iG,s=a._reflectionColorRGB.iB;a._reflectionWithinImage?(o.addColorStop(0,"rgba("+q+","+r+","+s+","+p[0]+")"),o.addColorStop(m/g.height,"rgba("+q+","+r+","+s+","+p[0]+")"),o.addColorStop(m/g.height,"rgba("+q+","+r+","+s+","+p[1]+")")):o.addColorStop(0,"rgba("+q+","+r+","+s+","+p[1]+")"),o.addColorStop(1,"rgba("+q+","+r+","+s+","+p[2]+")"),i.fillStyle=o,i.fillRect(0,0,g.width,g.height)}a._reflectionWithinImage&&(c.parentNode.replaceChild(g,c),this.content=g,this.origContent=g,delete this.image)}else a._reflectionWithinImage=!1,delete this.reflection}b&&(b.className="reflection",this.element.appendChild(b),this.caption&&this.element.appendChild(this.caption))}},ContentFlow.prototype={_imagesToLoad:0,_activeItem:0,_currentPosition:0,_targetPosition:0,_stepLock:!1,_millisecondsPerStep:40,_reflectionWithinImage:!0,Browser:ContentFlowGlobal.Browser,_defaultConf:{useAddOns:"all",biggestItemPos:0,loadingTimeout:3e4,activeElement:"content",maxItemHeight:0,scaleFactor:1,scaleFactorLandscape:1.33,scaleFactorPortrait:1,fixItemSize:!1,relativeItemPosition:"top center",circularFlow:!0,verticalFlow:!1,visibleItems:-1,endOpacity:1,startItem:"center",scrollInFrom:"pre",flowSpeedFactor:1,flowDragFriction:1,scrollWheelSpeed:1,keys:{13:function(){this.conf.onclickActiveItem(this._activeItem)},37:function(){this.moveTo("pre")},38:function(){this.moveTo("visibleNext")},39:function(){this.moveTo("next")},40:function(){this.moveTo("visiblePre")}},reflectionColor:"transparent",reflectionHeight:.5,reflectionGap:0,onInit:function(){},onclickInactiveItem:function(a){},onclickActiveItem:function(a){},onMakeInactive:function(a){},onMakeActive:function(a){},onReachTarget:function(a){},onMoveTo:function(a){var b=window.coverFlow;if(b.duration>0&&!b.autoAdvance){var c=this;clearTimeout(b.advancePhotos),clearTimeout(b.interactivityTimer),b.interactivityTimer=setTimeout(function(){b.autoAdvance=!0,c.moveTo(c.getActiveItem().index+1),b.resumeTimer()},1e3*b.interactivityTimeout)}b.autoAdvance=!1},onDrawItem:function(a){},onclickPreButton:function(a){return this.moveToIndex("pre"),Event.stop(a)},onclickNextButton:function(a){return this.moveToIndex("next"),Event.stop(a)},calcStepWidth:function(a){var b=this.conf.visibleItems,c=this.items.length;if(c=0==c?1:c,Math.abs(a)>b)if(a>0)var d=a-b;else var d=a+b;else if(b>=this.items.length)var d=a/c;else var d=a*(b/c);return d},calcSize:function(a){var b=a.relativePosition,c=1/(Math.abs(b)+1),d=c;return{width:d,height:c}},calcCoordinates:function(a){var b=a.relativePosition,c=this.conf.visibleItems,d=1-1/Math.exp(.75*Math.abs(b)),e=a.side*c/(c+1)*d,f=1;return{x:e,y:f}},calcZIndex:function(a){return-Math.abs(a.relativePositionNormed)},calcFontSize:function(a){return a.size.height},calcOpacity:function(a){return Math.max(1-(1-this.conf.endOpacity)*Math.sqrt(Math.abs(a.relativePositionNormed)),this.conf.endOpacity)}},_checkIndex:function(a){return a=Math.max(a,0),a=Math.min(a,this.itemsLastIndex)},_setLastIndex:function(){this.itemsLastIndex=this.items.length-1},_getItemByIndex:function(a){return this.items[this._checkIndex(a)]},_getItemByPosition:function(a){return this._getItemByIndex(this._getIndexByPosition(a))},_getPositionByIndex:function(a){if(!this.conf.circularFlow)return this._checkIndex(a);var b=this._getIndexByPosition(this._currentPosition),c=a-b;return Math.abs(c)>c+this.items.length?c+=this.items.length:Math.abs(c)>Math.abs(c-this.items.length)&&(c-=this.items.length),this._currentPosition+c},_getIndexByPosition:function(a){if(a<0)var b=0;else var b=1;var c=(Math.round(a)+b)%this.items.length;return c>0?c-=b:c<0?c+=this.items.length-b:c=a<0?0:this.items.length-1,c},_getIndexByKeyWord:function(a,b,c){if(b)var d=b;else if(this._activeItem)var d=this._activeItem.index;else var d=0;if(isNaN(a))switch(a){case"first":case"start":d=0;break;case"last":case"end":d=this.itemsLastIndex;break;case"middle":case"center":d=Math.round(this.itemsLastIndex/2);break;case"right":case"next":d+=1;break;case"left":case"pre":case"previous":d-=1;break;case"visible":case"visiblePre":case"visibleLeft":d-=this.conf.visibleItems;break;case"visibleNext":case"visibleRight":d+=this.conf.visibleItems;break;default:d=d}else d=a;return 0!=c&&(d=this._checkIndex(d)),d},_setCaptionLabel:function(a){this.Position&&!this.Slider.locked&&this.Position.setLabel(a),this._setGlobalCaption()},getAddOnConf:function(a){return ContentFlowGlobal.getAddOnConf(a)},setAddOnConf:function(a,b){ContentFlowGlobal.setAddOnConf(a,b)},init:function(){this.isInit||this._init()},setConfig:function(a){if(a){var b=this._defaultConf;for(var d in a)if("undefined"!=b[d])switch(d){case"scrollInFrom":case"startItem":"number"!=typeof a[d]&&"string"!=typeof a[d]||(this.conf[d]=a[d]);break;default:b[d]==a[d],"function"==typeof a[d]?this.conf[d]=a[d].bind(this):this.conf[d]=a[d]}switch(this.conf.reflectionColor){case this.conf.reflectionColor.search(/#[0-9a-fA-F]{6}/)>=0?this.conf.reflectionColor:this.conf.reflectionColor+"x":this._reflectionColorRGB={hR:this.conf.reflectionColor.slice(1,3),hG:this.conf.reflectionColor.slice(3,5),hB:this.conf.reflectionColor.slice(5,7),iR:parseInt(this.conf.reflectionColor.slice(1,3),16),iG:parseInt(this.conf.reflectionColor.slice(3,5),16),iB:parseInt(this.conf.reflectionColor.slice(5,7),16)};break;case"none":case"transparent":default:this._reflectionColor="transparent",this._reflectionColorRGB={hR:0,hG:0,hB:0,iR:0,iG:0,iB:0}}if(this.items&&(this.conf.visibleItems<0&&(this.conf.visibleItems=Math.round(Math.sqrt(this.items.length))),this.conf.visibleItems=Math.min(this.conf.visibleItems,this.items.length-1)),this.conf.relativeItemPosition){var e={x:{left:function(a){return-1},center:function(a){return 0},right:function(a){return 1}},y:{top:function(a){return-1},center:function(a){return 0},bottom:function(a){return 1}}},f=this.conf.relativeItemPosition;f=f.replace(/above/,"top").replace(/below/,"bottom");var g,h=null;g=f.match(/left|right/),h=f.match(/top|bottom/),c=f.match(/center/),g||(g=(c,"center")),h||(h=c?"center":"top");var i=e.x[g],j=e.y[h];this.conf.calcRelativeItemPosition=function(a){var b=i(a.size),c=j(a.size);return{x:b,y:c}},this.conf.relativeItemPosition=null}this._reflectionType&&"clientside"!=this._reflectionType&&(this.conf.reflectionHeight=0)}},getItem:function(a){return this.items[this._checkIndex(Math.round(a))]},getItemSrc:function(a){return this.items[this._checkIndex(Math.round(a))].content.getAttribute("src")},getActiveItem:function(){return this._activeItem},getNumberOfItems:function(){return this.items.length},resize:function(){this._initSizes(),this._initStep()},moveToPosition:function(a,b){this.conf.circularFlow||(a=this._checkIndex(a)),this._targetPosition=a,this.conf.onMoveTo(this._getItemByPosition(a)),this._initStep(!1,b)},moveToIndex:function(a){this._targetPosition=Math.round(this._getPositionByIndex(this._getIndexByKeyWord(a,this._activeItem.index,!this.conf.circularFlow))),this.conf.onMoveTo(this._getItemByPosition(this._targetPosition)),this._initStep()},moveToItem:function(a){var b;b=a.itemIndex?a.itemIndex:a.index,this.moveToIndex(b)},moveTo:function(a,b){this.onMoved=b,"object"==typeof a?this.moveToItem(a):isNaN(a)||a==Math.floor(a)&&a<this.items.length?this.moveToIndex(a):this.moveToPosition(a)},_addItemCue:[],_addItemCueProcess:function(a){var b=this._addItemCue;if(1==a&&b.shift(),b.length>0&&!b[0].p){b[0].p=!0;var c=this,d=b.length>5?1:40;window.setTimeout(function(){c._addItem(b[0].el,b[0].i,b[0].onItemAdded)},d)}},addItem:function(a,b,c){this._addItemCue.push({el:a,i:b,p:!1,onItemAdded:c}),1==this._addItemCue.length&&this._addItemCueProcess()},_addItem:function(a,b,c){if("string"==typeof b)switch(b){case"first":case"start":b=0;break;case"last":case"end":b=isNaN(this.itemsLastIndex)?0:this.itemsLastIndex,b+=1;break;default:b=this._getIndexByKeyWord(b)}$(".slider").css("visibility","hidden"),b=Math.max(b,0),b=Math.min(b,this.itemsLastIndex+1),b=isNaN(b)?0:b,this.Flow.appendChild(a),this.resize();var d=new ContentFlowItem(this,a,b);0==this.items.length?(this.resize(),this.conf.circularFlow&&(d.pre=d,d.next=d)):(b==this.itemsLastIndex+1?(d.pre=this.items[this.itemsLastIndex],d.next=d.pre.next):(d.next=this.items[b],d.pre=d.next.pre),d.pre&&(d.pre.next=d),d.next&&(d.next.pre=d)),this.items.splice(b,0,d);for(var e=b;e<this.items.length;e++)this.items[e].setIndex(e);this._setLastIndex(),this.conf.origVisibleItems<0&&(this.conf.visibleItems=Math.round(Math.sqrt(this.items.length))),this.conf.visibleItems=Math.min(this.conf.visibleItems,this.items.length-1),Math.round(this._getPositionByIndex(b))<=Math.round(this._targetPosition)&&(this._targetPosition++,this.conf.circularFlow||(this._targetPosition=Math.min(this._targetPosition,this.itemsLastIndex))),this._getPositionByIndex(b)<=this._currentPosition&&(this._currentPosition++,this.conf.circularFlow||(this._currentPosition=Math.min(this._currentPosition,this.itemsLastIndex)));var f=this;return window.setTimeout(function(){1==f.items.length?(f._currentPosition=-.01,f._targetPosition=0,f.resize()):f._initStep(),c()},100),b},rmItem:function(a){if("undefined"==a&&(a=this._activeItem.index),a=this._getIndexByKeyWord(a),!this.items[a])return null;var b=this.items[a];b.pre&&(b.pre.next=b.next),b.next&&(b.next.pre=b.pre),this.items.splice(a,1);for(var c=a;c<this.items.length;c++)this.items[c].setIndex(c);this._setLastIndex(),this.conf.origVisibleItems<0&&(this.conf.visibleItems=Math.round(Math.sqrt(this.items.length))),this.conf.visibleItems=Math.min(this.conf.visibleItems,this.items.length-1),Math.round(this._getPositionByIndex(a))<Math.round(this._targetPosition)&&(this._targetPosition--,this.conf.circularFlow||(this._targetPosition=this._checkIndex(this._targetPosition))),this._getPositionByIndex(a)<this._currentPosition&&(this._currentPosition--,this.conf.circularFlow||(this._currentPosition=this._checkIndex(this._currentPosition))),this._activeItem=this._getItemByPosition(this._currentPosition);var d=b.element.parentNode.removeChild(b.element),e=this;return window.setTimeout(function(){e._initStep()},10),d},_init:function(){if("string"==typeof this.Container){var a=document.getElementById(this.Container);if(!a)throw"ContentFlow ERROR: No element with id '"+this.Container+"' found!";this.Container=a}$CF(this.Container).addClassName("ContentFlow");var b=$CF(this.Container).getChildrenByClassName("flow")[0];if(!b)throw"ContentFlow ERROR: No element with class'flow' found!";this.Flow=new ContentFlowGUIElement(this,b);var c=this.Container.getChildrenByClassName("scrollbar")[0];if(c){this.Scrollbar=new ContentFlowGUIElement(this,c);var d=this.Scrollbar.getChildrenByClassName("slider")[0];if(d){this.Slider=new ContentFlowGUIElement(this,d);var e=this.Slider.getChildrenByClassName("position")[0];e&&(this.Position=new ContentFlowGUIElement(this,e))}}this.setConfig(this._defaultConf),this._initAddOns(),this.setConfig(this._userConf),this._initSizes();var f=this.Flow.getChildrenByClassName("item");this.items=new Array;for(var g=0;g<f.length;g++){var h=this.items[g]=new ContentFlowItem(this,f[g],g);g>0&&(h.pre=this.items[g-1],h.pre.next=h)}if(this._setLastIndex(),this.conf.circularFlow&&this.items.length>0){var i=this.items[0];i.pre=this.items[this.items.length-1],i.pre.next=i}this._initGUI(),"content"!=this._activeElement&&(this._activeElement="element"),this.conf.origVisibleItems=this.conf.visibleItems,this.conf.visibleItems<0&&(this.conf.visibleItems=Math.round(Math.sqrt(this.items.length))),this.conf.visibleItems=Math.min(this.conf.visibleItems,this.items.length-1),this._targetPosition=this._getIndexByKeyWord(this.conf.startItem,0);var j=this._getIndexByKeyWord(this.conf.scrollInFrom,this._targetPosition);switch(this.conf.scrollInFrom){case"next":case"right":j-=.5;break;case"pre":case"previous":case"left":j+=.5}this._currentPosition=j;var k=new Date,l=this,m=window.setInterval(function(){if(0==l._imagesToLoad||new Date-k>l._loadingTimeout){clearInterval(m),l._activeItem=l.getItem(l._currentPosition),l._activeItem&&(l._activeItem.makeActive(),l._setCaptionLabel(l._activeItem.index)),l.Flow.style.visibility="visible",l.loadIndicator&&(l.loadIndicator.style.display="none"),l.Scrollbar&&(l.Scrollbar.style.visibility="visible"),l.resize();for(var a=0;a<l._loadedAddOns.length;a++){var b=ContentFlowGlobal.AddOns[l._loadedAddOns[a]];b.methods.afterContentFlowInit&&b.methods.afterContentFlowInit(l)}l.conf.onInit()}},10);this.isInit=!0},_initAddOns:function(){var a=[];this._userConf.useAddOns?"string"==typeof this._userConf.useAddOns?a=this._userConf.useAddOns.split(" "):"array"==typeof this._userConf.useAddOns&&(a=this._userConf.useAddOns):a=this.Container.getAttribute("useAddOns")?this.Container.getAttribute("useAddOns").split(" "):this.conf.useAddOns.split(" ");for(var b=0;b<a.length;b++){if("none"==a[b]){a=new Array;break}if("all"==a[b]){a=new Array;for(var c in ContentFlowGlobal.AddOns)a.push(c);break}}for(var b=0;b<a.length;b++){var c=ContentFlowGlobal.AddOns[a[b]];c&&(this._loadedAddOns.push(a[b]),c._init(this),this.Container.addClassName("ContentFlowAddOn_"+c.name),c.methods.onloadInit&&c.methods.onloadInit(this))}},_initGUI:function(){var a=this.resize.bind(this);window.addEvent("resize",a,!1);for(var b=this.Container.getElementsByTagName("div"),c=0;c<b.length;c++)if($CF(b[c]).hasClassName("preButton")){var d=b[c],e=this.conf.onclickPreButton;d.addEvent("click",e,!1)}else if(b[c].hasClassName("nextButton")){var f=b[c],e=this.conf.onclickNextButton;f.addEvent("click",e,!1)}if(0!=this.conf.scrollWheelSpeed){var g=this._wheel.bind(this);window.addEventListener&&this.Container.addEventListener("DOMMouseScroll",g,!1),this.Container.onmousewheel=g}var h=this._keyStroke.bind(this);if(this.conf.keys&&!this.Browser.iPhone)if(document.addEventListener)if(this.Browser.Opera)this.Container.addEvent("keydown",h);else{var i=document.createElement("div");i.addClassName("mouseoverCheckElement"),this.Container.appendChild(i),this.Browser.WebKit?document.body.addEvent("keydown",function(a){i.offsetLeft>0&&h(a)}):window.addEvent("keydown",function(a){i.offsetLeft>0&&h(a)})}else this.Container.onkeydown=h;if(this.conf.flowDragFriction>0){var j=function(a){var b=a;a.touches&&(b=a.touches[0]);var c=b.clientX,d=b.clientY;if(this.conf.verticalFlow)var e=d-this.Flow.mouseY,f=this.Flow.dimensions.height;else var e=c-this.Flow.mouseX,f=this.Flow.dimensions.width;var g=e/f*(2*this.conf.visibleItems+1),h=this._currentPosition-2*g*this.conf.visibleItems/this.conf.flowDragFriction;this.Flow.mouseX=c,this.Flow.mouseY=d,this.moveToPosition(h,!0)}.bind(this),k=function(){},l=function(a){var b=Math.round(this._targetPosition);Math.abs(b-this._currentPosition)>.001&&this.moveToPosition(b)}.bind(this);this.Flow.makeDraggable(j,k,l)}if(this.Scrollbar){var m=function(a){if(!a)var a=window.event;if(this.Scrollbar.clickLocked)this.Scrollbar.clickLocked=!1;else{var b=a.clientX,c=b-this.Scrollbar.position.left,d=Math.round(c/this.Scrollbar.dimensions.width*this.itemsLastIndex);this.moveToIndex(d)}}.bind(this);this.Scrollbar.addObserver("click",m)}if(this.Slider){if(this.Browser.IE6){var n=document.createElement("div");n.className="virtualSlider",this.Slider.appendChild(n)}this.Slider.setPosition=function(a){if(a=a-Math.floor(a)+this._getIndexByPosition(Math.floor(a)),Math.round(a)<0?a=this.itemsLastIndex:a<=0?a=0:Math.round(a)>this.itemsLastIndex?a=0:a>=this.itemsLastIndex&&(a=this.itemsLastIndex),this.items.length>1)var b=a/this.itemsLastIndex*this.Scrollbar.dimensions.width;else var b=.5*this.Scrollbar.dimensions.width;this.Slider.style.left=b-this.Slider.center.x+"px",this.Slider.style.top=this.Scrollbar.center.y-this.Slider.center.y+"px"}.bind(this);var k=function(a){this.Scrollbar.clickLocked=!0}.bind(this),j=function(a){var b=a;a.touches&&(b=a.touches[0]);var c=this._checkIndex((b.clientX-this.Scrollbar.position.left)/this.Scrollbar.dimensions.width*this.itemsLastIndex);this._targetPosition=this._getPositionByIndex(c),this.Slider.setPosition(c),this.Position&&this.Position.setLabel(c),this._initStep(!0,!0)}.bind(this),l=function(a){this._targetPosition=Math.round(this._targetPosition),this.conf.onMoveTo(this._getItemByPosition(this._targetPosition)),this._initStep(!0)}.bind(this);this.Slider.makeDraggable(j,k,l)}this.Position&&(this.Position.setLabel=function(a){a=this._checkIndex(Math.round(a)),this.items&&this.items[a].label?this.Position.innerHTML=this.items[a].label.innerHTML:this.Position.innerHTML=a+1}.bind(this)),this.globalCaption=this.Container.getChildrenByClassName("globalCaption")[0],this.loadIndicator=this.Container.getChildrenByClassName("loadIndicator")[0]},_initSizes:function(a){this._initMaxHeight();var b=this._initScrollbarSize();if(!this.conf.verticalFlow&&this.Container.style.height&&"auto"!=this.Container.style.height&&(this.maxHeight-=b),this._activeItem){var c=this._findBiggestItem(),d=this.Flow.findPos();this.conf.verticalFlow?(this.Flow.style.width=c.width.width+"px",this.Flow.style.height=3*c.width.width*(1+this.conf.reflectionHeight+this.conf.reflectionGap)+"px"):this.Flow.style.height=c.height.height+(c.height.top-d.top)+"px";var e=this.conf.verticalFlow?c.width.width:c.height.height,f=e/(1+this.conf.reflectionHeight+this.conf.reflectionGap);this.Flow.style.marginBottom=-(e-f)+"px",this.Flow.dimensions=this.Flow.getDimensions(),this.Browser.IE6||this.conf.verticalFlow&&this.Container.clientWidth<this.Flow.dimensions.width||this.Container.clientHeight<this.Flow.dimensions.height,this.conf.verticalFlow?this.Flow.center={x:this.Flow.dimensions.height/2,y:c.width.width/2}:this.Flow.center={x:this.Flow.dimensions.width/2,y:c.height.height/2}}},_initScrollbarSize:function(){var a,b,c;if(a=this.Scrollbar){a.setDimensions();var d=a.dimensions.height;if((b=this.Slider)&&(b.setDimensions(),d+=b.dimensions.height,c=this.Position)){var e=c.innerHTML,f=maxW=0;if(c.style.width="auto",this.items)for(var g=0;g<this.items.length;g++){var h=this.items[g];h.label?c.innerHTML=h.label.innerHTML:c.innerHTML=h.index;var i=c.clientHeight,j=c.clientWidth;i>f&&(f=i),j>maxW&&(maxW=j)}else c.innerHTML="&nbsp;",f=c.clientHeight,maxW=c.clientWidth;c.innerHTML=e,c.setDimensions(),c.style.width=maxW+"px",c.style.left=(b.dimensions.width-maxW)/2+"px";var k=c.position.top-b.position.top;k>0?(k+=-a.dimensions.height+f,a.style.marginBottom=k+"px"):(k*=-1,a.style.marginTop=k+"px"),d+=k}}else d=0;return d},_initMaxHeight:function(){if(this.conf.verticalFlow)var a=screen.width/screen.height,b=this.Container.style.width,c=this.Container.clientWidth,d=this.Flow.style.width,e=this.Flow.clientWidth,f=this.Flow.clientHeight;else var a=screen.height/screen.width,b=this.Container.style.height,c=this.Container.clientHeight,d=this.Flow.style.height,e=this.Flow.clientHeight,f=this.Flow.clientWidth;if(this.ContainerOldDim&&(b=this.ContainerOldDim),this.FlowOldDim&&(d=this.FlowOldDim),this.ContainerOldDim="auto",this.FlowOldDim="auto",this.conf.maxItemHeight<=0){if(this.maxHeight=f/3*a/1*this.conf.scaleFactor,this.conf.verticalFlow&&(0==this.maxHeight||this.maxHeight>e)&&(this.maxHeight=e),b&&"auto"!=b){var g=this.conf.verticalFlow?0:this.conf.reflectionGap,h=this.conf.verticalFlow?0:this.conf.reflectionHeight;this.maxHeight=c/(this.conf.scaleFactor*(1+h+g)),this.ContainerOldDim=b}else if(d&&"auto"!=d){var g=this.conf.verticalFlow?0:this.conf.reflectionGap;this.maxHeight=e/(this.conf.scaleFactor*(1+this.conf.reflectionHeight+g)),this.FlowOldDim=d}}else this.maxHeight=this.conf.maxItemHeight},_findBiggestItem:function(){var a=this._activeItem,d=(a.pre,a.next,maxFlowSize={width:{width:0,left:0,height:0,top:0,item:null,rI:0},height:{width:0,left:0,height:0,top:0,item:null,rI:0}}),e=function(a,b){var c=a.element;c.style.display="block";var e=c.findPos(),f=c.clientHeight,g=c.clientWidth;f+e.top>=d.height.height+d.height.top&&(d.height.height=f,d.height.top=e.top,d.height.item=a,d.height.rI=b),g+e.left>=d.width.width+d.width.left&&(d.width.width=g,d.width.left=e.left,d.width.item=a,d.width.rI=b),c.style.display="none"},f=this._currentPosition;this._currentPosition=this.conf.visibleItems+1;for(var g=-this.conf.visibleItems;g<=this.conf.visibleItems;g++)a.element.style.display="none",this._positionItem(a,g),e(a,g);for(var h=d.height.rI,g=0;g<this.items.length;g++){var i=this.items[g];i.element.style.display="none",this._positionItem(i,h),e(i,h)}return this._currentPosition=f,d},_keyStroke:function(a){if(!a)var a=window.event;if(a.which)var b=a.which;else if(a.keyCode)var b=a.keyCode;return!this.conf.keys[b]||(this.conf.keys[b].bind(this)(),Event.stop(a))},_wheel:function(a){if(!a)var a=window.event;var b=0;if(a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3),b){var c=this._targetPosition;b<0?c+=1*this.conf.scrollWheelSpeed:c-=1*this.conf.scrollWheelSpeed,this.moveToPosition(Math.round(c))}return Event.stop(a)},_setGlobalCaption:function(){this.globalCaption&&(this.globalCaption.innerHTML="",
  this._activeItem&&this._activeItem.caption&&this.globalCaption.appendChild(this._activeItem.caption.cloneNode(!0)))},_initStep:function(a,b){this.Slider&&(a?this.Slider.locked=!0:this.Slider.locked=!1),this._holdPos=1==b,this._stepLock||(this._stepLock=!0,this._step())},_step:function(){var a=this._targetPosition-this._currentPosition,b=Math.abs(a);if(b>.001){this._currentPosition+=this.conf.flowSpeedFactor*this.conf.calcStepWidth(a,b,this.items.length,this.conf.visibleItems);var c=this.items[this._getIndexByPosition(this._currentPosition)];c&&c!=this._activeItem&&(this._activeItem&&this._activeItem.makeInactive(),this._activeItem=c,this._activeItem.makeActive(),this._setCaptionLabel(this._activeItem.index),Math.abs(this._targetPosition-this._currentPosition)<=.5&&this.conf.onReachTarget(this._activeItem)),this._positionItems();var d=this._step.bind(this);window.setTimeout(d,this._millisecondsPerStep)}else this._holdPos?this._stepLock=!1:(this.Slider&&(this.Slider.locked=!1),this._currentPosition=Math.round(this._currentPosition),this.Position&&!this.Slider.locked&&this._activeItem&&this._setCaptionLabel(this._activeItem.index),this._positionItems(),this._stepLock=!1,this.onMoved&&(this.onMoved(window.coverFlow),this.onMoved=null));this.Slider&&!this.Slider.locked&&this.Slider.setPosition(this._currentPosition)},_positionItems:function(){if(this._lastStart)for(var a=this._lastStart;a&&(a.element.style.display="none",a=a.next,a!=this._lastStart)&&(!a||a.pre!=this._lastEnd););else this._lastStart=this._activeItem;if(this._activeItem){var b=this._activeItem,c=b.pre,d=b.next;this._positionItem(b,0);for(var e=1;e<=this.conf.visibleItems&&2*e<this.items.length;e++)c&&(this._positionItem(c,-e),this._lastStart=c,c=c.pre),d&&(this._positionItem(d,e),this._lastEnd=d,d=d.next)}},_positionItem:function(a,b){var c=this.conf,d=c.verticalFlow,e=a.element.style,f=a.position=this._currentPosition+b,g=a.relativePosition=Math.round(f)-this._currentPosition,i=(a.relativePositionNormed=c.visibleItems>0?g/c.visibleItems:0,g<0?-1:1);i*=0==g?0:1,a.side=i;var j=c.calcSize(a);j.height=Math.max(j.height,0),j.width=Math.max(j.width,0),a.content.origProportion&&(j=this._scaleImageSize(a,j)),a.size=j;var k=a.coordinates=c.calcCoordinates(a),l=a.relativeItemPosition=c.calcRelativeItemPosition(a),m=a.zIndex=c.calcZIndex(a),n=a.fontSize=c.calcFontSize(a);a.opacity=c.calcOpacity(a);j.height*=this.maxHeight,j.width*=this.maxHeight;var p=d?j.height:j.width,q=d?j.width:j.height,r=this.Flow.center.x*(1+k.x)+(l.x-1)*p/2,s=this.maxHeight/2*(1+k.y)+(l.y-1)*q/2;e.left=(d?s:r)+"px",e.top=(d?r:s)+"px",this._setItemSize(a,j),1!=c.endOpacity&&this._setItemOpacity(a),this.Browser.IE||(e.fontSize=100*n+"%"),e.zIndex=32768+Math.round(m*this.items.length),c.onDrawItem(a),e.visibility="visible",e.display="block"},_scaleImageSize:function(a,b,c){var d=this.conf.scaleFactorLandscape,e=this.conf.scaleFactorPortrait,f=this.conf.verticalFlow,g=a.content.origProportion,h=b.width,i=b.height,j=a.content;if(f?g<=1?("max"!=d&&1!=d&&(i*=d,h=Math.min(i*g,c?c:1)),i=h/g):g>1&&("max"==e?i=c?c:1:1!=e?(h*=e,i=Math.min(h/g,c?c:1)):i=h/g,h=i*g):g>1?("max"!=d&&1!=d&&(h*=d,i=Math.min(h/g,c?c:1)),h=i*g):g<=1&&("max"==e?h=c?c:1:1!=e?(i*=e,h=Math.min(i*g,c?c:1)):h=i*g,i=h/g),i=isNaN(i)?0:i,h=isNaN(h)?0:h,!c&&this.conf.fixItemSize){var k=b.width/b.height,c=Math.max(b.width,b.height),l=this._scaleImageSize(a,{width:c,height:c},c);k<1?(i=l.height/b.height,h=i*g/k):(h=l.width/b.width,i=h/g*k);var m=100*i,n=100*h,o=(1-h)/2*100,p=(1-i)/k*100*(f?.5:1);return j.style.height=m+"%",a.reflection&&(a.reflection.style.height=m*this.conf.reflectionHeight+"%"),j.style.width=n+"%",a.reflection&&(a.reflection.style.width=n+"%"),j.style.marginLeft=o+"%",a.reflection&&(a.reflection.style.marginLeft=o+"%"),j.style.marginTop=p+"%",a.element.style.overflow="hidden",b}return{width:h,height:i}},_setItemSize:function(){if(ContentFlowGlobal.Browser.IE)var a=function(a,b){if(this.conf.fixItemSize){if(ContentFlowGlobal.Browser.IE6){var c=parseInt(a.content.style.height)/100;a.content.style.height=b.height*c+"px";var d=parseInt(a.content.style.marginTop)/100;a.content.style.marginTop=b.height*d+"px"}}else a.content.style.height=b.height+"px";if(a.reflection){var c=parseInt(a.content.style.height);a.reflection.style.height=c*this.conf.reflectionHeight+"px",a.reflection.style.marginTop=c*this.conf.reflectionGap+"px"}a.element.style.width=b.width+"px",a.element.style.height=b.height*(1+this.conf.reflectionHeight+this.conf.reflectionGap)+"px"};else var a=function(a,b){a.reflection?(a.element.style.height=b.height*(1+this.conf.reflectionHeight+this.conf.reflectionGap)+"px",a.reflection.style.marginTop=b.height*this.conf.reflectionGap+"px"):this._reflectionWithinImage?a.element.style.height=b.height*(1+this.conf.reflectionHeight+this.conf.reflectionGap)+"px":a.element.style.height=b.height+"px",a.element.style.width=b.width+"px"};return a}(),_setItemOpacity:function(){if(ContentFlowGlobal.Browser.IE6)var a=function(a){if(a.content.origSrc&&a.content.origSrc.match(/\.png$/)){var b=a.content.src;a.content.src=a.content.origSrc,a.content.style.filter=a.content.filterString+" progid:DXImageTransform.Microsoft.BasicImage(opacity="+a.opacity+")",a.content.src=b}else a.content.style.filter="progid:DXImageTransform.Microsoft.BasicImage(opacity="+a.opacity+")";a.reflection&&(a.reflection.style.filter=a.reflection.filterString+"progid:DXImageTransform.Microsoft.BasicImage(opacity="+a.opacity+")")};else if(ContentFlowGlobal.Browser.IE)var a=function(a){a.element.style.filter="progid:DXImageTransform.Microsoft.BasicImage(opacity="+a.opacity+")"};else var a=function(a){a.element.style.opacity=a.opacity};return a}()},Function.bind||(Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}}),Math.erf2||(Math.erf2=function(a){var b=-(8*(Math.PI-3)/(3*Math.PI*(Math.PI-4))),c=a*a,d=1-Math.pow(Math.E,-c*(4/Math.PI+b*c)/(1+b*c));return d}),Math._2PI05||(Math._2PI05=Math.sqrt(2*Math.PI)),Math.normDist||(Math.normDist=function(a,b,c){if(!b)var b=1;if(!c)var c=0;if(!a)var a=-c;return 1/(b*Math._2PI05)*Math.pow(Math.E,-(a-c)*(a-c)/(2*b*b))}),Math.normedNormDist||(Math.normedNormDist=function(a,b,c){return this.normDist(a,b,c)/this.normDist(c,b,c)}),Math.exp||(Math.exp=function(a){return Math.pow(Math.E,a)}),Math.ln||(Math.ln=Math.log),Math.log2||(Math.log2=function(a){return Math.log(a)/Math.LN2}),Math.log10||(Math.log10=function(a){return Math.log(a)/Math.LN10}),Math.logerithm||(Math.logerithm=function(a,b){return b&&b!=Math.E?2==b?Math.log2(a):10==b?Math.log10(a):Math.log(a)/Math.log(b):Math.log(a)}),!Event)var Event={};Event.stop||(Event.stop=function(a){return a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1}),document.all&&!window.opera?window.$CF=function(a){return"string"==typeof a?window.$CF(document.getElementById(a)):(CFElement.prototype.extend&&a&&!a.extend&&CFElement.prototype.extend(a),a)}:window.$CF=function(a){return a},window.HTMLElement?CFElement=window.HTMLElement:(CFElement={},CFElement.prototype={},CFElement.prototype.extend=function(a){for(var b in this)a[b]||(a[b]=this[b])}),CFElement.findPos||(CFElement.prototype.findPos=function(){var a=this,b=curtop=0;try{if(a.offsetParent)for(b=a.offsetLeft,curtop=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,curtop+=a.offsetTop}catch(a){}return{left:b,top:curtop}}),CFElement.getDimensions||(CFElement.prototype.getDimensions=function(){return{width:this.clientWidth,height:this.clientHeight}}),CFElement.hasClassName||(CFElement.prototype.hasClassName=function(a){return new RegExp("\\b"+a+"\\b").test(this.className)}),CFElement.addClassName||(CFElement.prototype.addClassName=function(a){this.hasClassName(a)||(this.className+=(this.className?" ":"")+a)}),CFElement.removeClassName||(CFElement.prototype.removeClassName=function(a){this.className=this.className.replace(new RegExp("\\b"+a+"\\b"),"").replace(/\s\s/g," ")}),CFElement.toggleClassName||(CFElement.prototype.toggleClassName=function(a){this.hasClassName(a)?this.removeClassName(a):this.addClassName(a)}),CFElement.getChildrenByClassName||(CFElement.prototype.getChildrenByClassName=function(a){for(var b=new Array,c=0;c<this.childNodes.length;c++){var d=this.childNodes[c];1==d.nodeType&&$CF(d).hasClassName(a)&&b.push(d)}return b}),CFElement.addEvent||(CFElement.prototype.addEvent=function(a,b,c){this.addEventListener?this.addEventListener(a,b,c):this.attachEvent("on"+a,b)}),CFElement.removeEvent||(CFElement.prototype.removeEvent=function(a,b,c){this.removeEventListener?this.removeEventListener(a,b,c):this.detachEvent("on"+a,b)}),window.addEvent||(window.addEvent=function(a,b,c){this.addEventListener?this.addEventListener(a,b,c):"load"!=a&&"resize"!=a?document.attachEvent("on"+a,b):this.attachEvent("on"+a,b)}),window.removeEvent||(window.removeEvent=function(a,b,c){this.removeEventListener?this.removeEventListener(a,b,c):"load"!=a&&"resize"!=a?document.detachEvent("on"+a,b):this.detachEvent("on"+a,b)}),ContentFlowGlobal.init();