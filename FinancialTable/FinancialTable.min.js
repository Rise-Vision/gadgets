var RiseVision=RiseVision||{};RiseVision.FinancialSettings={};RiseVision.FinancialSettings=function(){this.settings=new RiseVision.Common.Settings};
RiseVision.FinancialSettings.prototype.initSettings=function(){var a=this;$("#selector").on("click",function(a){financial.showStockSelector()});$(".colorPicker").on("click",function(a){financial.showColorPicker($(this).data("for"))});$(".fontSelector").on("click",function(a){financial.showFontSelector($(this).data("for"))});$("#scrollDirection").on("change",function(a){"none"==$(this).val()?$("li.scroll").hide():$("li.scroll").show()});$("#scrollBy").on("change",function(a){"continuous"==$(this).val()?
$("li.scrollHold").hide():$("li.scrollHold").show()});$("#colCount").on("change",function(a){financial.buildFieldsUI()});$("#useDefault").on("click",function(a){$(this).is(":checked")?$("li.layoutURL").hide():$("li.layoutURL").show()});gadgets.rpc.call("","rscmd_getAdditionalParams",function(c){if(c){c=JSON.parse(c);$("#disclaimerFont").val(prefs.getString("disclaimerFont"));$("#disclaimerLoc").val(prefs.getString("disclaimerLoc"));$("#acceptance").attr("checked",prefs.getBool("acceptance"));$("#scrollDirection").val(prefs.getString("scrollDirection"));
$("#scrollBy").val(prefs.getString("scrollBy"));$("#scrollHold").val(prefs.getInt("scrollHold"));$("#scrollSpeed").val(prefs.getString("scrollSpeed"));$("#scrollResumes").val(prefs.getInt("scrollResumes"));$("#rowPadding").val(prefs.getInt("rowPadding"));$("#colPadding").val(prefs.getInt("colPadding"));$("#colCount").val(prefs.getInt("colCount"));$("#bgColor").val(prefs.getString("bgColor"));$("#rowColor").val(prefs.getString("rowColor"));$("#altRowColor").val(prefs.getString("altRowColor"));$("#selRowColor").val(prefs.getString("selRowColor"));
$("#useDefault").attr("checked",prefs.getBool("useDefault"));$("#layoutURL").val(prefs.getString("layoutURL"));a.populateColor($("#rowColor"),prefs.getString("rowColor"));a.populateColor($("#altRowColor"),prefs.getString("altRowColor"));a.populateColor($("#selRowColor"),prefs.getString("selRowColor"));a.populateColor($("#bgColor"),prefs.getString("bgColor"));$("#instruments").val(c.instruments);$("#heading_font-style").text(c.heading_font);$("#heading_font-style").data("css",c["heading_font-style"]);
$("#data_font-style").text(c.data_font);$("#data_font-style").data("css",c["data_font-style"]);$("#colCount").trigger("change");for(var b=0;b<parseInt($("#colCount").val());b++)a.initFields(b+1,c.fields[b])}else $("#colCount").trigger("change");$(".field").trigger("change");$("form ol li ol.drillDown li:visible:last").css({clear:"left","float":"left","margin-bottom":"10px"});$("#scrollDirection").trigger("change");$("#scrollBy").trigger("change");$("#useDefault").triggerHandler("click");$("#settings").show()})};
RiseVision.FinancialSettings.prototype.populateColor=function(a,c){a.val(c);a.css("background-color",c)};RiseVision.FinancialSettings.prototype.initFields=function(a,c){$("#field"+a).val(c.field);$("#alignment"+a).val(c.alignment);$("#width"+a).val(c.width);$("#decimals"+a).val(c.decimals);$("#sign"+a).val(c.sign);$("#condition"+a+"Action").val(c.condition);$("#headerText"+a).val(c.header)};
RiseVision.FinancialSettings.prototype.buildFieldsUI=function(){var a=parseInt($("#colCount").val()),c=$(".field").length;if(isNaN(a)||0==a)$(".formatting").hide();else if(a==c)$(".formatting").show();else if(a<c)$(".formatting").hide(),$(".formatting:lt("+a+")").show();else{$(".formatting").show();for(var b=c+1;b<=a;b++){var d=document.createElement("li"),e=document.createElement("ol");e.setAttribute("class","formatting drillDown");$(e).append($("<li></li>").append("<label for='field"+b+"'>Field*:</label>").append("<select id='field"+
b+"' name='field"+b+"' class='field medium'><option value='instrument'>Instrument</option><option value='logo'>Instrument Logo</option><option value='name'>Instrument Name</option><option value='lastPrice'>Last Price</option><option value='historicClose'>Previous Close</option><option value='netChange'>Change</option><option value='percentChange'>% Change</option><option value='accumulatedVolume'>Accumulated Volume</option><option value='dayHigh'>Day High</option><option value='dayLow'>Day Low</option><option value='yearHigh'>52 Week High</option><option value='yearLow'>52 Week Low</option><option value='bid'>Bid</option><option value='ask'>Ask</option><option value='yield'>Yield</option><option value='yieldChange'>Yield Change</option><option value='tradeTime'>Trade Time</option></select>")).append($("<li></li>").append("<label for='alignment"+
b+"'>Alignment:</label>").append("<select id='alignment"+b+"' name='alignment"+b+"' class='alignment short'><option value='left' selected='selected'>Left</option><option value='center'>Center</option><option value='right'>Right</option></select>")).append($("<li></li>").append("<label for='width"+b+"'>Width (pixels):</label>").append("<input id='width"+b+"' name='width"+b+"' type='text' class='width short' />")).append($("<li></li>").append("<label for='headerText"+b+b+"'><a href='#' class='tooltip'>Header Text:<span>Custom header text. If not specified, the header from the field will be used.</span></a></label>").append("<input id='headerText"+
b+"' name='headerText"+b+"' type='text' class='headerText short' />")).append($("<li class='numeric drilldown'></li>").append($("<ol></ol>").append($("<li></li>").append("<label for='decimals"+b+"'>Decimals:</label>").append("<select id='decimals"+b+"' name='decimals"+b+"' class='decimals short'><option value='0'>0</option><option value='1'>1</option><option value='2' selected='selected'>2</option><option value='3'>3</option><option value='4'>4</option></select>")).append($("<li></li>").append("<label for='sign"+
b+"'><a href='#' class='tooltip'>Sign:<span>How to display positive and negative numbers</span></a></label>").append("<select id='sign"+b+"' name='sign"+b+"' class='sign short'><option value='none'>None</option><option value='minus'>-</option><option value='plusMinus'>+/-</option><option value='parentheses'>( )</option><option value='arrow' selected='selected'>Arrow</option></select>")).append($("<li></li>").append("<label for='condition"+b+"'><a href='#' class='tooltip'>Color Condition:<span>Whether or not to use color to indicate positive or negative values, or to indicate a change in value</span></a></label>").append("<select id='condition"+
b+"Action' name='condition"+b+"Action' class='condition medium'><option value='none' selected='selected'>None</option><option value='changeUp'>Change Up Green Down Red</option><option value='changeDown'>Change Down Green Up Red</option><option value='valuePositive'>Value Positive Green Negative Red</option><option value='valueNegative'>Value Negative Green Positive Red</option></select>"))));$(d).append(e);$("#bgColor").parent().before(d);$(".field").on("change",function(a){"instrument"!=this.value&&
"logo"!=this.value&&"name"!=this.value&&"tradeTime"!=this.value?$(this).parent().parent().find(".numeric").show():$(this).parent().parent().find(".numeric").hide()})}for(b=c+1;b<=a;b++)$(".field").eq(b-1)[0].selectedIndex=b-1}};RiseVision.FinancialSettings.prototype.showStockSelector=function(){gadgets.rpc.call("","rscmd_openFinancialSelector",null,"instruments",$("#instruments").val())};
RiseVision.FinancialSettings.prototype.showColorPicker=function(a){gadgets.rpc.call("","rscmd_openColorPicker",null,a,$("#"+a).val())};RiseVision.FinancialSettings.prototype.showFontSelector=function(a){gadgets.rpc.call("","rscmd_openFontSelector",null,a,$("#"+a).data("css"))};RiseVision.FinancialSettings.prototype.setStocks=function(a,c){$("#"+a).val(c)};RiseVision.FinancialSettings.prototype.setColor=function(a,c){$("#"+a).val(c);$("#"+a).css("background-color",c)};
RiseVision.FinancialSettings.prototype.setFont=function(a,c,b){$("#"+a).data("css",c);$("#"+a).text(b)};
RiseVision.FinancialSettings.prototype.getSettings=function(){var a=!1,c=document.getElementsByClassName("errors")[0],b="",b=null;$(".errors").empty();a=financial.settings.validateRequired($("#instruments"),c,"Instruments")?!0:a;a=financial.settings.validateNumeric($("#scrollHold"),c,"Scroll Hold")?!0:a;a=financial.settings.validateNumeric($("#scrollResumes"),c,"Scroll Resumes")?!0:a;a=financial.settings.validateNumeric($("#rowPadding"),c,"Row Padding")?!0:a;a=financial.settings.validateNumeric($("#colPadding"),
c,"Column Padding")?!0:a;0<parseInt($("#colCount").val())&&($(".field").each(function(b){a=financial.settings.validateRequired($(this),c,"Field")?!0:a}),$(".width").each(function(b){a=financial.settings.validateNumeric($(this),c,"Width")?!0:a}));if(a=financial.settings.validateRequired($("#layoutURL"),c,"Layout URL")?!0:a)return $(".errors").fadeIn(200).css("display","inline-block"),$("#wrapper").scrollTop(0),null;b="up_disclaimerFont="+$("#disclaimerFont").val()+"&up_disclaimerLoc="+$("#disclaimerLoc").val()+
"&up_scrollDirection="+$("#scrollDirection").val()+"&up_scrollBy="+$("#scrollBy").val()+"&up_scrollHold="+$("#scrollHold").val()+"&up_scrollSpeed="+$("#scrollSpeed").val()+"&up_scrollResumes="+$("#scrollResumes").val()+"&up_rowPadding="+$("#rowPadding").val()+"&up_colPadding="+$("#colPadding").val()+"&up_colCount="+$("#colCount").val()+"&up_bgColor="+$("#bgColor").val()+"&up_rowColor="+$("#rowColor").val()+"&up_altRowColor="+$("#altRowColor").val()+"&up_selRowColor="+$("#selRowColor").val()+"&up_layoutURL="+
escape($("#layoutURL").val());b=$("#acceptance").is(":checked")?b+"&up_acceptance=true":b+"&up_acceptance=false";b=$("#useDefault").is(":checked")?b+"&up_useDefault=true":b+"&up_useDefault=false";b={params:b,additionalParams:JSON.stringify(financial.saveAdditionalParams())};$(".errors").css({display:"none"});return b};
RiseVision.FinancialSettings.prototype.saveAdditionalParams=function(){var a={},c=[];a.instruments=$("#instruments").val();a.heading_font=$("#heading_font-style").text();a["heading_font-style"]=$("#heading_font-style").data("css");a.data_font=$("#data_font-style").text();a["data_font-style"]=$("#data_font-style").data("css");for(var b=0;b<parseInt($("#colCount").val());b++)c.push(financial.saveFormatSettings(b+1,c));a.fields=c;return a};
RiseVision.FinancialSettings.prototype.saveFormatSettings=function(a){var c={field:$("#field"+a).val(),alignment:$("#alignment"+a).val(),width:$("#width"+a).val(),header:$("#headerText"+a).val()};0<$("#decimals"+a+":visible").length&&(c.decimals=$("#decimals"+a).val(),c.sign=$("#sign"+a).val(),c.condition=$("#condition"+a+"Action").val());return c};RiseVision.Financial={};
RiseVision.Financial=function(a){this.displayID=a;this.scrollDirection=prefs.getString("scrollDirection");this.scrollBy=prefs.getString("scrollBy");this.scrollHold=1E3*prefs.getInt("scrollHold");this.scrollSpeed=prefs.getString("scrollSpeed");this.scrollResumes=1E3*prefs.getInt("scrollResumes");this.rowPadding=prefs.getInt("rowPadding")/2+"px";this.colPadding=prefs.getInt("colPadding")/2+"px";this.disclaimerFont=prefs.getString("disclaimerFont");this.disclaimerLoc=prefs.getString("disclaimerLoc");
this.layoutURL=(this.useDefault=prefs.getBool("useDefault"))?"":prefs.getString("layoutURL");this.logosURL="https://s3.amazonaws.com/risecontentlogos/financial/";this.hasLastItemScrolled=this.hasLogos=!1;this.updateInterval=6E4;this.selectedIndex=-1;this.isLoading=!0;this.sortConfig={bAutoWidth:!1,bDestroy:!0,bFilter:!1,bInfo:!1,bLengthChange:!1,bPaginate:!1,bSort:!1,sScrollY:"500px"}};
RiseVision.Financial.prototype.getInstrument=function(a){$("tr").removeClass("selected");$(".item").eq(a).addClass("selected");return $(".item").eq(a).attr("data-code")};
RiseVision.Financial.prototype.checkInstruments=function(a){var c=this,b=[],d=[],d=this.data.getNumberOfRows();a&&(this.requested=[]);for(var e=0;e<d;e++)b.push(this.data.getFormattedValue(e,this.financial.dataFields.code));d=$.grep(b,function(a){return-1==$.inArray(a,c.requested)});for(b=0;b<d.length;b++)this.requested.push(d[b]);0<d.length&&gadgets.rpc.call("","instrumentsChanged",null,this.displayID,d);a&&setTimeout(function(){c.checkInstruments(!0)},864E5)};
RiseVision.Financial.prototype.getAdditionalParams=function(a,c){if("additionalParams"==a&&c){var b=document.createElement("style");c=JSON.parse(c);b.appendChild(document.createTextNode(c["heading_font-style"]));b.appendChild(document.createTextNode(c["data_font-style"]));document.getElementsByTagName("head")[0].appendChild(b);financial.instruments=c.instruments;financial.requestedFields=[];$.each(c.fields,function(a,b){"name"!=b.field&&"logo"!=b.field&&"instrument"!=b.field&&"arrow"!=b.field&&financial.requestedFields.push(b.field)});
financial.requestedFields.push("code");financial.requestedFields.push("name");financial.fields=c.fields;$.each(c.fields,function(a,b){if("logo"==b.field)return financial.hasLogos=!0,!1})}financial.init()};
RiseVision.Financial.prototype.init=function(){var a=this,c={};this.financial=new RiseVision.Common.Financial.RealTime(this.displayID,this.instruments);this.useDefault?this.getData():this.layoutURL&&(c[gadgets.io.RequestParameters.CONTENT_TYPE]=gadgets.io.ContentType.DOM,gadgets.io.makeRequest(this.layoutURL,function(b){b=b.data;if(0<b.getElementsByTagName("Style").length){var c=document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css";e.innerHTML=b.getElementsByTagName("Style")[0].childNodes[1].nodeValue;
c.appendChild(e)}0==b.getElementsByTagName("Layout").length?console.log("No Layout tag specified in custom layout file."):(a.layout=b.getElementsByTagName("Layout")[0].childNodes[1].nodeValue,a.getData())},c))};
RiseVision.Financial.prototype.getData=function(){var a=this;this.financial.getData(this.requestedFields,this.hasLogos,this.isChain(),function(c,b){c?(a.data=c,a.urls=b,a.arrowCount=0,$("#container").width(prefs.getString("rsW")),$("#container").height(prefs.getString("rsH")),a.isLoading?(a.loadArrow(a.logosURL+"animated-green-arrow.gif"),a.loadArrow(a.logosURL+"animated-red-arrow.gif")):(a.isChain()&&a.checkInstruments(!1),a.layoutURL?a.showCustomLayout():a.showDefaultLayout())):a.startTimer()})};
RiseVision.Financial.prototype.loadArrow=function(a){var c=this,b=new Image;b.onload=function(){c.onArrowLoaded()};b.onerror=function(){c.onArrowLoaded()};b.src=a};RiseVision.Financial.prototype.onArrowLoaded=function(){this.arrowCount++;2==this.arrowCount&&(this.layoutURL?this.showCustomLayout():this.showDefaultLayout())};
RiseVision.Financial.prototype.showDefaultLayout=function(){var a=null,a=null;if(this.isLoading||this.isChain())this.selectedIndex=$(".selected").index(),$("#container").empty(),a=document.createElement("div"),a.setAttribute("id","disclaimer"),a.setAttribute("class","default"),$("#container").append(a),a=document.createElement("table"),a.setAttribute("id","financial"),a.setAttribute("class","default page"),$("#container").append(a);this.initTable()};
RiseVision.Financial.prototype.showCustomLayout=function(){var a=0;if(this.isLoading||this.isChain()){a=this.data.getNumberOfRows();$("#container").empty();$("#container").append(this.layout);for(var c=0;c<a;c++){var b=$(".repeat:first").parent();0<c&&$(b).append($(".repeat:first").clone())}}this.initTable()};
RiseVision.Financial.prototype.initTable=function(){var a=this,c=this.data.getNumberOfRows(),b=this.data.getNumberOfColumns();if(this.isLoading||this.isChain()){this.isLoading||$(".dataTables_scrollBody").infiniteScroll.stop();0<b&&this.addHeadings();for(b=0;b<c;b++)0<$(".repeat").eq(b).length?this.addRow(b,$(".repeat").eq(b)):this.addRow(b,null);-1!=this.selectedIndex&&$(".item").eq(this.selectedIndex).addClass("selected")}else this.updateRows();this.formatFields();if(this.isLoading||this.isChain())this.sortConfig.aoColumnDefs=
[],$.each(this.fields,function(b,c){c.width&&a.sortConfig.aoColumnDefs.push({sWidth:c.width,aTargets:[b]})}),$("#financial").dataTable(this.sortConfig),$(".dataTables_scrollHead table thead tr th, td").css({"padding-top":this.rowPadding,"padding-bottom":this.rowPadding}),$("table thead tr th, td").css({"padding-left":this.colPadding,"padding-right":this.colPadding}),$("table tr th:first-child, td:first-child").css({"padding-left":"10px"}),$("table tr th:last-child, td:last-child").css({"padding-right":"10px"}),
$("#disclaimer").text("Market Data by Thomson Reuters - Delayed 20 Minutes"),$("#disclaimer").css("font-family",this.disclaimerFont),"bottomRight"==this.disclaimerLoc||"bottomLeft"==this.disclaimerLoc?($("#disclaimer").addClass("bottom"),"bottomRight"==this.disclaimerLoc&&$("#disclaimer").addClass("right")):($("#container").addClass("fullScreen"),$("#disclaimer").addClass("top"),"topRight"==this.disclaimerLoc&&$("#disclaimer").addClass("right")),$(".dataTables_scrollBody").height($("#container").outerHeight()-
$("#disclaimer").outerHeight()-$(".dataTables_scrollHead").outerHeight()+"px");$.each(this.fields,function(b,c){if("changeUp"==c.condition||"changeDown"==c.condition){var h=a.financial.compare(c.field);$.each(h,function(a,b){var d=$("td."+c.field).eq(a);"changeUp"==c.condition?1==b?d.addClass("changeUpIncrease"):-1==b?d.addClass("changeUpDecrease"):d.removeClass("changeUpIncrease changeUpDecrease"):1==b?d.addClass("changeDownIncrease"):-1==b?d.addClass("changeDownDecrease"):d.removeClass("changeDownIncrease changeDownDecrease")})}else if("valuePositive"==
c.condition||"valueNegative"==c.condition)h=a.financial.checkSigns(c.field),$.each(h,function(a,b){var d=$("td."+c.field).eq(a);"valuePositive"==c.condition?1==b?d.addClass("valuePositivePositive"):d.addClass("valuePositiveNegative"):1==b?d.addClass("valueNegativePositive"):d.addClass("valueNegativeNegative")})});(this.isLoading||this.isChain())&&$(".dataTables_scrollBody").infiniteScroll({scrollBy:prefs.getString("scrollBy"),direction:a.scrollDirection,duration:1E3*prefs.getInt("scrollHold"),speed:prefs.getString("scrollSpeed"),
swipingTimeout:1E3*prefs.getInt("scrollResumes"),toggleOddEven:!0}).bind("onLastItemScrolled",function(b){a.onLastItemScrolled.call(a,b)});$("#container").width("100%");$("#container").height("95%");this.isLoading?(this.isLoading=!1,readyEvent(),this.checkInstruments(!0)):$(".dataTables_scrollBody").infiniteScroll.start();this.startTimer()};
RiseVision.Financial.prototype.addHeadings=function(){var a=this,c=document.createElement("tr");$.each(this.fields,function(b,d){var e=document.createElement("th");"logo"==d.field?(e.setAttribute("class","logo"),$(e).html("Logo")):"instrument"==d.field?(e.setAttribute("class",a.data.getColumnId(0)),$(e).html(a.data.getColumnLabel(0))):(e.setAttribute("class",a.data.getColumnId(a.financial.dataFields[d.field])),$(e).html(a.data.getColumnLabel(a.financial.dataFields[d.field])));$(e).addClass("heading_font-style");
$(c).append(e)});$("#financial").prepend($("<thead>").append(c))};
RiseVision.Financial.prototype.addRow=function(a,c){var b=this,d=-1,e;this.data.getNumberOfColumns();"INCORRECT_TYPE"==this.data.getFormattedValue(a,0)?console.log("Chain could not be displayed. Please check that only one chain is being requested and that chains are not being requested together with stocks."):(null==c?(c=document.createElement("tr"),c.setAttribute("class","item"),c.setAttribute("data-alias",this.data.getFormattedValue(a,0)),c.setAttribute("data-code",this.data.getFormattedValue(a,
this.financial.dataFields.code))):(c.attr("data-alias",this.data.getFormattedValue(a,0)),c.attr("data-code",this.data.getFormattedValue(a,this.financial.dataFields.code))),$(c).on("click",function(a){$("tr").removeClass("selected");$(this).addClass("selected");gadgets.rpc.call("","instrumentSelected",null,$(this).attr("data-code"))}),$.each(this.fields,function(e,g){var f=document.createElement("td");"logo"==g.field?d=e:("instrument"==g.field?(f.setAttribute("class","data_font-style "+b.data.getColumnId(0)),
$(f).html(b.data.getFormattedValue(a,0))):(f.setAttribute("class","data_font-style "+b.data.getColumnId(b.financial.dataFields[g.field])),$(f).html(b.data.getFormattedValue(a,b.financial.dataFields[g.field])),$(f).attr("data-value",b.data.getFormattedValue(a,b.financial.dataFields[g.field]))),$(c).append(f));-1!=d&&e==b.fields.length-1&&(f=document.createElement("td"),f.setAttribute("class","data_font-style logo"),null!=b.urls[a]?($img=$("<img>"),$img.attr("src",b.urls[a]),$img.height(0),$(f).append($img)):
$(f).html(b.data.getFormattedValue(a,b.financial.dataFields.name)),$(c).find("td").eq(d).before(f))}),this.useDefault&&$("#financial").append(c),$(".logo img").height($(c).height()),"N/P"==this.data.getFormattedValue(a,b.financial.dataFields.name)&&(e=this.splitInstruments(),e.splice(a,1),this.financial.setInstruments(e.join())))};
RiseVision.Financial.prototype.updateRows=function(){for(var a,c=this,b=this.data.getNumberOfRows(),d=this.data.getNumberOfColumns(),e=0;e<b;e++)a=$("tr[data-alias='"+this.data.getFormattedValue(e,0)+"']:first"),0==a.length&&(a=$("tr[data-alias='N/A']"),0==a.length&&(a=$("tr[data-alias='...']")),0<a.length&&(a.attr("data-alias",this.data.getFormattedValue(e,0)),a.attr("data-code",this.data.getFormattedValue(e,d-1)))),0<a.length&&$.each(this.fields,function(b,d){var f=a.find("."+d.field);"logo"==d.field?
null!=c.urls[e]?($img=$("<img>"),$img.attr("src",c.urls[e]),$img.height(a.height()),f.find("div").append($img)):f.html(c.data.getFormattedValue(e,c.financial.dataFields.name)):"instrument"==d.field?f.html(c.data.getFormattedValue(e,0)):(f.html(c.data.getFormattedValue(e,c.financial.dataFields[d.field])),f.attr("data-value",c.data.getFormattedValue(e,c.financial.dataFields[d.field])))})};
RiseVision.Financial.prototype.formatFields=function(){var a=this;$.each(this.fields,function(c,b){if(b.field){var d=$("td."+b.field),e;if(0<d.length&&!d.hasClass("updated")){if(a.isLoading||a.isChain())b.header&&$("th").eq(c).html(b.header),a.isLoading&&b.width&&(e=parseInt(b.width),e=100*(e/prefs.getInt("rsW"))+"%",b.width=e),$("th").eq(c).css("text-align",b.alignment);d.css("text-align",b.alignment);d.each(function(c){if($(this).text()&&!isNaN($(this).text()))if($(this).text(parseFloat($(this).text()).toFixed(b.decimals)),
(c=$(this).attr("data-value"))||(c=$(this).text()),"none"==b.sign)$(this).html(a.addCommas(Math.abs(c).toFixed(b.decimals)));else if("minus"==b.sign)$(this).html(a.addCommas(c));else if("plusMinus"==b.sign)0<parseFloat(c)&&$(this).html("+"+a.addCommas(c));else if("parentheses"==b.sign)0>parseFloat(c)&&$(this).html("("+a.addCommas(Math.abs(c).toFixed(b.decimals))+")");else if("arrow"==b.sign){var d=$("<img class='arrow'>");d.height($(this).height());$(this).html(a.addCommas(Math.abs(c).toFixed(b.decimals)));
0>parseFloat(c)?d.attr("src",a.logosURL+"animated-red-arrow.gif"):0<=parseFloat(c)&&d.attr("src",a.logosURL+"animated-green-arrow.gif");$(this).prepend(d)}});d.addClass("updated")}}});$("td").removeClass("updated")};RiseVision.Financial.prototype.addCommas=function(a){var c=(a+"").split(".");a=c[0];for(var c=1<c.length?"."+c[1]:"",b=/(\d+)(\d{3})/;b.test(a);)a=a.replace(b,"$1,$2");return a+c};
RiseVision.Financial.prototype.onLastItemScrolled=function(a){"page"!=this.scrollBy&&doneEvent();this.checkForUpdates&&(this.checkForUpdates=!1,this.getData())};RiseVision.Financial.prototype.startTimer=function(){var a=this;setTimeout(function(){"none"!=a.scrollDirection&&$(".dataTables_scrollBody").infiniteScroll.canScroll()?a.checkForUpdates=!0:a.getData()},this.updateInterval)};
RiseVision.Financial.prototype.splitInstruments=function(){var a=this.instruments.split(",");$.each(a,function(c,b){a[c]=$.trim(a[c])});return a};RiseVision.Financial.prototype.isChain=function(){var a=this.splitInstruments();return null!=this.data?1==a.length&&1<this.data.getNumberOfRows():!1};RiseVision.Financial.prototype.play=function(){$(".dataTables_scrollBody").infiniteScroll.start()};RiseVision.Financial.prototype.pause=function(){$(".dataTables_scrollBody").infiniteScroll.pause()};