var RiseVision=RiseVision||{};RiseVision.Sports={};
RiseVision.Sports=function(a){var d=new gadgets.Prefs,e=this;this.duration=1E3*d.getInt("duration");this.displayOdds=d.getBool("displayOdds");this.layout=d.getString("layout");this.layoutURL="single"==this.layout?"http://3e0b2e35e630ddeda037-b278a7924c8db845e077fc70aa73c08d.r1.cf2.rackcdn.com/single.xml":"stacked"==this.layout?"http://3e0b2e35e630ddeda037-b278a7924c8db845e077fc70aa73c08d.r1.cf2.rackcdn.com/stacked.xml":d.getString("layoutURL")?d.getString("layoutURL"):"http://3e0b2e35e630ddeda037-b278a7924c8db845e077fc70aa73c08d.r1.cf2.rackcdn.com/single.xml";
this.isLoading=!0;this.isLastGame=!1;this.sportIndex=this.gameIndex=0;this.sportsData=new RiseVision.Common.Sports(a);$(this.sportsData).bind({imagesLoaded:function(){e.onImageLoaded.call(e)},updateTimerExpired:function(){clearTimeout(e.contentTimer);e.sportsData.getData()}})};
RiseVision.Sports.prototype.loadLayout=function(){var a={},d=this;$("<link>");this.layoutURL&&(a[gadgets.io.RequestParameters.CONTENT_TYPE]=gadgets.io.ContentType.DOM,gadgets.io.makeRequest(this.layoutURL,function(a){a=a.data;if(0<a.getElementsByTagName("Style").length){var h=document.getElementsByTagName("head")[0],g=document.createElement("style");g.type="text/css";g.innerHTML=a.getElementsByTagName("Style")[0].childNodes[1].nodeValue;h.appendChild(g)}0!=a.getElementsByTagName("Layout").length&&
($("#container").html(a.getElementsByTagName("Layout")[0].childNodes[1].nodeValue),d.sportsData.getData())},a))};RiseVision.Sports.prototype.onImageLoaded=function(){this.isLoading?readyEvent():"single"==this.layout&&1>=this.sportsData.games.length||"stacked"==this.layout&&2>=this.sportsData.games.length?this.startTimer():this.showGame()};
RiseVision.Sports.prototype.showGame=function(){var a=this,d=$("#content"),e,h=Date.today(),g=!1;$(".header").hide();$("#spacer").hide();$(".sportLogoContainer").hide();$(".visitorName").addClass("noLogo");$(".homeName").addClass("noLogo");this.displayOdds||$(".status").addClass("noOdds");d.bind("webkitTransitionEnd",function(k){$(".game").each(function(b){var d,c,f;if(0==b&&a.gameIndex==a.sportsData.games.length)a.gameIndex=0,g=!0;else if(a.gameIndex>=a.sportsData.games.length)return $(".stats:gt("+
(b-1)+")").css("visibility","hidden"),$(".game:gt("+(b-1)+")").css("visibility","hidden"),a.isLastGame=!0,a.gameIndex=0,!1;if(c=a.sportsData.games[a.gameIndex]){d=c.sportCode;if(e&&e!=d)return $(".stats:gt("+(b-1)+")").css("visibility","hidden"),$(".game:gt("+(b-1)+")").css("visibility","hidden"),!1;$(".stats").css("visibility","visible");$(".game").css("visibility","visible");e=d;if(0==b){for(f=0;f<a.sportsData.sports.length;f++)if(d==a.sportsData.sports[f].sportCode){a.sportIndex=f;break}$(".sportLogoContainer").css("background",
"").hide()}-1==Date.compare(h,c.date)?$(".status").eq(b).text(c.date.toString("ddd")):$(".status").eq(b).text(c.extendedStatus);a.displayOdds?$(".overUnder").eq(b).text(c.overUnder):$(".overUnder").hide();d=0<c.visitor.rank?"("+c.visitor.rank+") "+c.visitor.name:c.visitor.name;f=0<c.home.rank?"("+c.home.rank+") "+c.home.name:c.home.name;$(".visitorName").eq(b).text(d);$(".homeName").eq(b).text(f);"not started"!=c.status?($(".visitorRecord").eq(b).text(c.visitor.score),$(".homeRecord").eq(b).text(c.home.score),
a.showRecord(b)):a.displayOdds?(c.visitor.spread?$(".visitorSpread").eq(b).text(c.visitor.spread):$(".visitorSpread").eq(b).empty(),c.home.spread?$(".homeSpread").eq(b).text(c.home.spread):$(".homeSpread").eq(b).empty(),a.showSpread(b)):(c.visitor.overall?$(".visitorRecord").eq(b).text(c.visitor.overall):$(".visitorRecord").eq(b).text(""),c.home.overall&&"0-0"!=c.home.overall?$(".homeRecord").eq(b).text(c.home.overall):$(".homeRecord").eq(b).text(""),a.showRecord(b));a.gameIndex++}});$(this).unbind(k);
g?doneEvent():$(this).bind("webkitTransitionEnd",function(b){a.startTimer();$(this).unbind(b)});"single"==a.layout&&(k=$(".visitorName").height(),$(".visitor > div, .home > div").css("line-height",k+"px"));d.addClass("fadeIn").removeClass("fadeOut")});d.addClass("fadeOut").removeClass("fadeIn")};RiseVision.Sports.prototype.showRecord=function(a){$(".visitorSpread").eq(a).hide();$(".homeSpread").eq(a).hide();$(".visitorRecord").eq(a).show();$(".homeRecord").eq(a).show()};
RiseVision.Sports.prototype.showSpread=function(a){$(".visitorSpread").eq(a).show();$(".homeSpread").eq(a).show();$(".visitorRecord").eq(a).hide();$(".homeRecord").eq(a).hide()};RiseVision.Sports.prototype.startTimer=function(){var a=this;clearTimeout(this.contentTimer);this.contentTimer=setTimeout(function(){a.isLastGame?doneEvent():"single"==a.layout&&1>=a.sportsData.games.length||"stacked"==a.layout&&2>=a.sportsData.games.length?doneEvent():a.showGame()},this.duration)};
RiseVision.Sports.prototype.play=function(){this.isLoading?(this.isLoading=!1,this.showGame()):"single"==this.layout&&1<this.sportsData.games.length||"stacked"==this.layout&&2<this.sportsData.games.length?this.isLastGame?(this.isLastGame=!1,this.showGame()):this.startTimer():this.startTimer()};RiseVision.Sports.prototype.pause=function(){clearTimeout(this.contentTimer)};