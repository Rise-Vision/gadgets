(function(){var e=this,c=e._,d={},a=Array.prototype,b=Object.prototype,f=a.slice,g=a.unshift,p=b.toString,k=b.hasOwnProperty,m=a.forEach,h=a.map,n=a.reduce,r=a.reduceRight,q=a.filter,s=a.every,t=a.some,u=a.indexOf,A=a.lastIndexOf,b=Array.isArray,B=Object.keys,z=Function.prototype.bind,l=function(a){return new D(a)};"undefined"!==typeof module&&module.exports?(module.exports=l,l._=l):e._=l;l.VERSION="1.1.7";var w=l.each=l.forEach=function(a,f,b){if(null!=a)if(m&&a.forEach===m)a.forEach(f,b);else if(a.length===
+a.length)for(var g=0,c=a.length;g<c&&!(g in a&&f.call(b,a[g],g,a)===d);g++);else for(g in a)if(k.call(a,g)&&f.call(b,a[g],g,a)===d)break};l.map=function(a,f,b){var g=[];if(null==a)return g;if(h&&a.map===h)return a.map(f,b);w(a,function(a,c,d){g[g.length]=f.call(b,a,c,d)});return g};l.reduce=l.foldl=l.inject=function(a,f,b,g){var c=void 0!==b;null==a&&(a=[]);if(n&&a.reduce===n)return g&&(f=l.bind(f,g)),c?a.reduce(f,b):a.reduce(f);w(a,function(a,d,p){c?b=f.call(g,b,a,d,p):(b=a,c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");
return b};l.reduceRight=l.foldr=function(a,f,b,g){null==a&&(a=[]);if(r&&a.reduceRight===r)return g&&(f=l.bind(f,g)),void 0!==b?a.reduceRight(f,b):a.reduceRight(f);a=(l.isArray(a)?a.slice():l.toArray(a)).reverse();return l.reduce(a,f,b,g)};l.find=l.detect=function(a,f,b){var g;v(a,function(a,c,d){if(f.call(b,a,c,d))return g=a,!0});return g};l.filter=l.select=function(a,f,b){var g=[];if(null==a)return g;if(q&&a.filter===q)return a.filter(f,b);w(a,function(a,c,d){f.call(b,a,c,d)&&(g[g.length]=a)});return g};
l.reject=function(a,f,b){var g=[];if(null==a)return g;w(a,function(a,c,d){f.call(b,a,c,d)||(g[g.length]=a)});return g};l.every=l.all=function(a,f,b){var g=!0;if(null==a)return g;if(s&&a.every===s)return a.every(f,b);w(a,function(a,c,p){if(!(g=g&&f.call(b,a,c,p)))return d});return g};var v=l.some=l.any=function(a,f,b){f=f||l.identity;var g=!1;if(null==a)return g;if(t&&a.some===t)return a.some(f,b);w(a,function(a,c,p){if(g|=f.call(b,a,c,p))return d});return!!g};l.include=l.contains=function(a,f){var b=
!1;if(null==a)return b;if(u&&a.indexOf===u)return-1!=a.indexOf(f);v(a,function(a){if(b=a===f)return!0});return b};l.invoke=function(a,b){var g=f.call(arguments,2);return l.map(a,function(a){return(b.call?b||a:a[b]).apply(a,g)})};l.pluck=function(a,f){return l.map(a,function(a){return a[f]})};l.max=function(a,f,b){if(!f&&l.isArray(a))return Math.max.apply(Math,a);var g={computed:-Infinity};w(a,function(a,c,d){c=f?f.call(b,a,c,d):a;c>=g.computed&&(g={value:a,computed:c})});return g.value};l.min=function(a,
f,b){if(!f&&l.isArray(a))return Math.min.apply(Math,a);var g={computed:Infinity};w(a,function(a,c,d){c=f?f.call(b,a,c,d):a;c<g.computed&&(g={value:a,computed:c})});return g.value};l.sortBy=function(a,f,b){return l.pluck(l.map(a,function(a,g,c){return{value:a,criteria:f.call(b,a,g,c)}}).sort(function(a,f){var b=a.criteria,g=f.criteria;return b<g?-1:b>g?1:0}),"value")};l.groupBy=function(a,f){var b={};w(a,function(a,g){var c=f(a,g);(b[c]||(b[c]=[])).push(a)});return b};l.sortedIndex=function(a,f,b){b||
(b=l.identity);for(var g=0,c=a.length;g<c;){var d=g+c>>1;b(a[d])<b(f)?g=d+1:c=d}return g};l.toArray=function(a){return a?a.toArray?a.toArray():l.isArray(a)||l.isArguments(a)?f.call(a):l.values(a):[]};l.size=function(a){return l.toArray(a).length};l.first=l.head=function(a,b,g){return null==b||g?a[0]:f.call(a,0,b)};l.rest=l.tail=function(a,b,g){return f.call(a,null==b||g?1:b)};l.last=function(a){return a[a.length-1]};l.compact=function(a){return l.filter(a,function(a){return!!a})};l.flatten=function(a){return l.reduce(a,
function(a,f){if(l.isArray(f))return a.concat(l.flatten(f));a[a.length]=f;return a},[])};l.without=function(a){return l.difference(a,f.call(arguments,1))};l.uniq=l.unique=function(a,f){return l.reduce(a,function(a,b,g){0!=g&&(!0===f?l.last(a)==b:l.include(a,b))||(a[a.length]=b);return a},[])};l.union=function(){return l.uniq(l.flatten(arguments))};l.intersection=l.intersect=function(a){var b=f.call(arguments,1);return l.filter(l.uniq(a),function(a){return l.every(b,function(f){return 0<=l.indexOf(f,
a)})})};l.difference=function(a,f){return l.filter(a,function(a){return!l.include(f,a)})};l.zip=function(){for(var a=f.call(arguments),b=l.max(l.pluck(a,"length")),g=Array(b),c=0;c<b;c++)g[c]=l.pluck(a,""+c);return g};l.indexOf=function(a,f,b){if(null==a)return-1;var g;if(b)return b=l.sortedIndex(a,f),a[b]===f?b:-1;if(u&&a.indexOf===u)return a.indexOf(f);b=0;for(g=a.length;b<g;b++)if(a[b]===f)return b;return-1};l.lastIndexOf=function(a,b){if(null==a)return-1;if(A&&a.lastIndexOf===A)return a.lastIndexOf(b);
for(var f=a.length;f--;)if(a[f]===b)return f;return-1};l.range=function(a,b,f){1>=arguments.length&&(b=a||0,a=0);f=arguments[2]||1;for(var g=Math.max(Math.ceil((b-a)/f),0),c=0,d=Array(g);c<g;)d[c++]=a,a+=f;return d};l.bind=function(a,b){if(a.bind===z&&z)return z.apply(a,f.call(arguments,1));var g=f.call(arguments,2);return function(){return a.apply(b,g.concat(f.call(arguments)))}};l.bindAll=function(a){var b=f.call(arguments,1);0==b.length&&(b=l.functions(a));w(b,function(b){a[b]=l.bind(a[b],a)});
return a};l.memoize=function(a,b){var f={};b||(b=l.identity);return function(){var g=b.apply(this,arguments);return k.call(f,g)?f[g]:f[g]=a.apply(this,arguments)}};l.delay=function(a,b){var g=f.call(arguments,2);return setTimeout(function(){return a.apply(a,g)},b)};l.defer=function(a){return l.delay.apply(l,[a,1].concat(f.call(arguments,1)))};var I=function(a,b,f){var g;return function(){var c=this,d=arguments,p=function(){g=null;a.apply(c,d)};f&&clearTimeout(g);if(f||!g)g=setTimeout(p,b)}};l.throttle=
function(a,b){return I(a,b,!1)};l.debounce=function(a,b){return I(a,b,!0)};l.once=function(a){var b=!1,f;return function(){if(b)return f;b=!0;return f=a.apply(this,arguments)}};l.wrap=function(a,b){return function(){var g=[a].concat(f.call(arguments));return b.apply(this,g)}};l.compose=function(){var a=f.call(arguments);return function(){for(var b=f.call(arguments),g=a.length-1;0<=g;g--)b=[a[g].apply(this,b)];return b[0]}};l.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};
l.keys=B||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],f;for(f in a)k.call(a,f)&&(b[b.length]=f);return b};l.values=function(a){return l.map(a,l.identity)};l.functions=l.methods=function(a){var b=[],f;for(f in a)l.isFunction(a[f])&&b.push(f);return b.sort()};l.extend=function(a){w(f.call(arguments,1),function(b){for(var f in b)void 0!==b[f]&&(a[f]=b[f])});return a};l.defaults=function(a){w(f.call(arguments,1),function(b){for(var f in b)null==a[f]&&(a[f]=b[f])});return a};
l.clone=function(a){return l.isArray(a)?a.slice():l.extend({},a)};l.tap=function(a,b){b(a);return a};l.isEqual=function(a,b){if(a===b)return!0;var f=typeof a;if(f!=typeof b)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;a._chain&&(a=a._wrapped);b._chain&&(b=b._wrapped);if(a.isEqual)return a.isEqual(b);if(b.isEqual)return b.isEqual(a);if(l.isDate(a)&&l.isDate(b))return a.getTime()===b.getTime();if(l.isNaN(a)&&l.isNaN(b))return!1;if(l.isRegExp(a)&&l.isRegExp(b))return a.source===b.source&&a.global===
b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if("object"!==f||a.length&&a.length!==b.length)return!1;var f=l.keys(a),g=l.keys(b);if(f.length!=g.length)return!1;for(var c in a)if(!(c in b&&l.isEqual(a[c],b[c])))return!1;return!0};l.isEmpty=function(a){if(l.isArray(a)||l.isString(a))return 0===a.length;for(var b in a)if(k.call(a,b))return!1;return!0};l.isElement=function(a){return!(!a||1!=a.nodeType)};l.isArray=b||function(a){return"[object Array]"===p.call(a)};l.isObject=function(a){return a===
Object(a)};l.isArguments=function(a){return!(!a||!k.call(a,"callee"))};l.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)};l.isString=function(a){return!!(""===a||a&&a.charCodeAt&&a.substr)};l.isNumber=function(a){return!!(0===a||a&&a.toExponential&&a.toFixed)};l.isNaN=function(a){return a!==a};l.isBoolean=function(a){return!0===a||!1===a};l.isDate=function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)};l.isRegExp=function(a){return!(!a||!a.test||!a.exec||!a.ignoreCase&&
!1!==a.ignoreCase)};l.isNull=function(a){return null===a};l.isUndefined=function(a){return void 0===a};l.noConflict=function(){e._=c;return this};l.identity=function(a){return a};l.times=function(a,b,f){for(var g=0;g<a;g++)b.call(f,g)};l.mixin=function(a){w(l.functions(a),function(b){E(b,l[b]=a[b])})};var J=0;l.uniqueId=function(a){var b=J++;return a?a+b:b};l.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};l.template=function(a,b){var f=l.templateSettings,f="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+
a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(f.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(f.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",f=new Function("obj",f);return b?f(b):f};var D=function(a){this._wrapped=a};l.prototype=D.prototype;var F=function(a,b){return b?l(a).chain():a},E=function(a,b){D.prototype[a]=function(){var a=
f.call(arguments);g.call(a,this._wrapped);return F(b.apply(l,a),this._chain)}};l.mixin(l);w("pop push reverse shift sort splice unshift".split(" "),function(b){var f=a[b];D.prototype[b]=function(){f.apply(this._wrapped,arguments);return F(this._wrapped,this._chain)}});w(["concat","join","slice"],function(b){var f=a[b];D.prototype[b]=function(){return F(f.apply(this._wrapped,arguments),this._chain)}});D.prototype.chain=function(){this._chain=!0;return this};D.prototype.value=function(){return this._wrapped}})();
!function(e,c,d){"undefined"!==typeof module?module.exports=d(e,c):"function"===typeof define&&"object"===typeof define.amd?define(d):c[e]=d(e,c)}("bean",this,function(e,c){var d=window,a=c[e],b=/over|out/,f=/[^\.]*(?=\..*)\.|.*/,g=/\..*/,p=document||{},k=p.documentElement||{},m=k.addEventListener,h=m?"addEventListener":"attachEvent",n=Array.prototype.slice,r=/click|mouse|menu|drag|drop/i,q=/^touch|^gesture/i,s={one:1},t=function(a,b,f){for(f=0;f<b.length;f++)a[b[f]]=1;return a}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+
(m?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":
"")).split(" ")),u=function(){function a(b){b=b.relatedTarget;if(!b)return null===b;var f;if(f=b!==this)if(f="xul"!==b.prefix)if(f=!/document/.test(this.toString())){a:{for(;null!==(b=b.parentNode);)if(b===this){b=!0;break a}b=!1}f=!b}return f}return{mouseenter:{base:"mouseover",condition:a},mouseleave:{base:"mouseout",condition:a},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),A=function(){var a="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),
f=a.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),g=a.concat(["char","charCode","key","keyCode"]),c=a.concat(["touches","targetTouches","changedTouches","scale","rotation"]),d=function(a){return function(){a.preventDefault?a.preventDefault():a.returnValue=!1}},e=function(a){return function(){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}},n=function(a){return function(){a.preventDefault();a.stopPropagation();
a.stopped=!0}};return function(h,m){var l={originalEvent:h,isNative:m};if(!h)return l;var u,t=h.type,s=h.target||h.srcElement;l.preventDefault=d(h);l.stopPropagation=e(h);l.stop=n(l);l.target=s&&3===s.nodeType?s.parentNode:s;if(m){if(-1!==t.indexOf("key"))u=g,l.keyCode=h.which||h.keyCode;else if(r.test(t)){u=f;l.rightClick=3===h.which||2===h.button;l.pos={x:0,y:0};if(h.pageX||h.pageY)l.clientX=h.pageX,l.clientY=h.pageY;else if(h.clientX||h.clientY)l.clientX=h.clientX+p.body.scrollLeft+k.scrollLeft,
l.clientY=h.clientY+p.body.scrollTop+k.scrollTop;b.test(t)&&(l.relatedTarget=h.relatedTarget||h[("mouseover"===t?"from":"to")+"Element"])}else q.test(t)&&(u=c);u=u||a;for(t=u.length;t--;)s=u[t],!(s in l)&&s in h&&(l[s]=h[s])}return l}}(),B=function(){function a(b,f,g,c,e){this.element=b;this.type=f;this.handler=g;this.original=c;this.namespaces=e;this.custom=u[f];this.isNative=t[f]&&b[h];this.eventType=m||this.isNative?f:"propertychange";this.customType=!m&&!this.isNative&&f;this.target=m||this.isNative||
b!==p&&b!==d?b:k;this.eventSupport=this.target[h]}a.prototype={inNamespaces:function(a){var b,f;if(!a)return!0;if(!this.namespaces)return!1;for(b=a.length;b--;)for(f=this.namespaces.length;f--;)if(a[b]===this.namespaces[f])return!0;return!1},matches:function(a,b,f){return this.element===a&&(!b||this.original===b)&&(!f||this.handler===f)}};return a}(),z=function(){var a={},b=function(f,g,c,d,p){if(g&&"*"!==g){var e=0,k,h=a["$"+g],n="*"===f;if(h)for(k=h.length;e<k&&(!n&&!h[e].matches(f,c,d)||p(h[e],
h,e,g));e++);}else for(e in a)"$"===e.charAt(0)&&b(f,e.substr(1),c,d,p)};return{has:function(b,f,g){var c=a["$"+f];if(c)for(f=c.length;f--;)if(c[f].matches(b,g,null))return!0;return!1},get:function(a,f,g){var c=[];b(a,f,g,null,function(a){return c.push(a)});return c},put:function(b){(a["$"+b.type]||(a["$"+b.type]=[])).push(b);return b},del:function(f){b(f.element,f.type,null,f.handler,function(b,f,g){f.splice(g,1);0===f.length&&delete a["$"+b.type];return!1})},entries:function(){var b,f=[];for(b in a)"$"===
b.charAt(0)&&(f=f.concat(a[b]));return f}}}(),l=m?function(a,b,f,g){a[g?"addEventListener":"removeEventListener"](b,f,!1)}:function(a,b,f,g,c){c&&(g&&null===a["_on"+c])&&(a["_on"+c]=0);a[g?"attachEvent":"detachEvent"]("on"+b,f)},w=function(a,b,f){return function(g){g=A(g||((this.ownerDocument||this.document||this).parentWindow||d).event,!0);return b.apply(a,[g].concat(f))}},v=function(a,b,f,g,c,p){return function(e){if(g?g.apply(this,arguments):m||e&&e.propertyName==="_on"+f||!e)e&&(e=A(e||((this.ownerDocument||
this.document||this).parentWindow||d).event,p)),b.apply(a,!e||c&&0!==c.length?n.call(arguments,e?0:1).concat(c):arguments)}},I=function(a,b,f,g,c){return function(){a(b,f,c);g.apply(this,arguments)}},J=function(a,b,f,c){var d;b=b&&b.replace(g,"");b=z.get(a,b,f);a=0;for(f=b.length;a<f;a++)b[a].inNamespaces(c)&&((d=b[a]).eventSupport&&l(d.target,d.eventType,d.handler,!1,d.type),z.del(d))},D=function(a,b,f){return function(g){var c,d,p="string"===typeof a?f(a,this):a;for(c=g.target;c&&c!==this;c=c.parentNode)for(d=
p.length;d--;)if(p[d]===c)return b.apply(c,arguments)}},F=function(a,b,c){var d,p,e=b&&"string"===typeof b;if(e&&0<b.indexOf(" ")){b=b.split(" ");for(p=b.length;p--;)F(a,b[p],c);return a}(p=e&&b.replace(g,""))&&u[p]&&(p=u[p].type);if(!b||e){if(b=e&&b.replace(f,""))b=b.split(".");J(a,p,c,b)}else if("function"===typeof b)J(a,null,b);else for(d in b)b.hasOwnProperty(d)&&F(a,d,b[d]);return a},E=function(a,b,c,d,p){var e,k,h,m=c;k=c&&"string"===typeof c;if(b&&!c&&"object"===typeof b)for(e in b)b.hasOwnProperty(e)&&
E.apply(this,[a,e,b[e]]);else for(h=3<arguments.length?n.call(arguments,3):[],e=(k?c:b).split(" "),k&&(c=D(b,m=d,p))&&(h=n.call(h,1)),this===s&&(c=I(F,a,b,c,m)),k=e.length;k--;){var r=a,q=e[k],t=c,A=m,H=h,G=void 0,C=q.replace(g,""),q=q.replace(f,"").split(".");z.has(r,C,t)||("unload"===C&&(t=I(J,r,C,t,A)),u[C]&&(u[C].condition&&(t=v(r,t,C,u[C].condition,!0)),C=u[C].base||C),G=z.put(new B(r,C,t,A,q[0]&&q)),G.handler=G.isNative?w(r,G.handler,H):v(r,G.handler,C,!1,H,!1),G.eventSupport&&l(G.target,G.eventType,
G.handler,!0,G.customType))}return a},H=m?function(a,b,f){var g=p.createEvent(a?"HTMLEvents":"UIEvents");g[a?"initEvent":"initUIEvent"](b,!0,!0,d,1);f.dispatchEvent(g)}:function(a,b,f){f=m||a||f!==p&&f!==d?f:k;a?f.fireEvent("on"+b,p.createEventObject()):f["_on"+b]++},L={add:E,one:function(){return E.apply(s,arguments)},remove:F,clone:function(a,b,f){var g=0;b=z.get(b,f);for(f=b.length;g<f;g++)b[g].original&&E(a,b[g].type,b[g].original);return a},fire:function(a,b,c){var d,p,e,k,n=b.split(" ");for(d=
n.length;d--;){b=n[d].replace(g,"");if(e=n[d].replace(f,""))e=e.split(".");if(e||c||!a[h])for(k=z.get(a,b),c=[!1].concat(c),b=0,p=k.length;b<p;b++)k[b].inNamespaces(e)&&k[b].handler.apply(a,c);else H(t[b],b,a)}return a},noConflict:function(){c[e]=a;return this}};if(d.attachEvent){var K=function(){var a,b=z.entries();for(a in b)b[a].type&&"unload"!==b[a].type&&F(b[a].element,b[a].type);d.detachEvent("onunload",K);d.CollectGarbage&&d.CollectGarbage()};d.attachEvent("onunload",K)}return L});
(function(){var e=this,c=this.Flotr,d;d={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:-1!=navigator.appVersion.indexOf("MSIE")?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(a,b){d.graphTypes[a]=b;d.defaultOptions[a]=b.options||{};d.defaultOptions.defaultType=d.defaultOptions.defaultType||a},addPlugin:function(a,b){d.plugins[a]=b;d.defaultOptions[a]=b.options||{}},draw:function(a,b,f,g){g=g||d.Graph;return new g(a,b,f)},merge:function(a,
b){var f,g,c=b||{};for(f in a)(g=a[f])&&"object"===typeof g?g.constructor===Array?c[f]=this._.clone(g):g.constructor===RegExp||this._.isElement(g)?c[f]=g:c[f]=d.merge(g,b?b[f]:void 0):c[f]=g;return c},clone:function(a){return d.merge(a,{})},getTickSize:function(a,b,f,g){f=(f-b)/a;a=d.getMagnitude(f);b=10;f/=a;1.5>f?b=1:2.25>f?b=2:3>f?b=0===g?2:2.5:7.5>f&&(b=5);return b*a},defaultTickFormatter:function(a,b){return a+""},defaultTrackFormatter:function(a){return"("+a.x+", "+a.y+")"},engineeringNotation:function(a,
b,f){var g="Y Z E P T G M k ".split(" "),c="y z a f p n \u00b5 m ".split(" "),d=g.length;f=f||1E3;b=Math.pow(10,b||2);if(0===a)return 0;if(1<a)for(;d--&&a>=f;)a/=f;else for(g=c,d=g.length;d--&&1>a;)a*=f;return Math.round(a*b)/b+g[d]},getMagnitude:function(a){return Math.pow(10,Math.floor(Math.log(a)/Math.LN10))},toPixel:function(a){return Math.floor(a)+0.5},toRad:function(a){return-a*(Math.PI/180)},floorInBase:function(a,b){return b*Math.floor(a/b)},drawText:function(a,b,f,g,c){a.fillText?(c=this._.extend({size:d.defaultOptions.fontSize,
color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},c),a.save(),a.translate(f,g),a.rotate(c.angle),a.fillStyle=c.color,a.font=(1<c.weight?"bold ":"")+1.3*c.size+"px sans-serif",a.textAlign=c.textAlign,a.textBaseline=c.textBaseline,a.fillText(b,0,0),a.restore()):a.drawText(b,f,g,c)},getBestTextAlign:function(a,b){b=b||{textAlign:"center",textBaseline:"middle"};a+=d.getTextAngleFromAlign(b);0.01<Math.abs(Math.cos(a))&&(b.textAlign=0<Math.cos(a)?"right":"left");0.01<Math.abs(Math.sin(a))&&
(b.textBaseline=0<Math.sin(a)?"top":"bottom");return b},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(a){return d.alignTable[a.textAlign+" "+a.textBaseline]||0},noConflict:function(){e.Flotr=c;return this}};e.Flotr=d})();
Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,
mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,
backgroundImage:null,watermarkAlpha:0.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:0.4}};
(function(){function e(a,b,f,g){this.rgba=["r","g","b","a"];for(var c=4;-1<--c;)this[this.rgba[c]]=arguments[c]||(3==c?1:0);this.normalize()}var c=Flotr._,d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],
darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],
yellow:[255,255,0]};e.prototype={scale:function(a,b,f,g){for(var d=4;-1<--d;)c.isUndefined(arguments[d])||(this[this.rgba[d]]*=arguments[d]);return this.normalize()},alpha:function(a){c.isUndefined(a)||c.isNull(a)||(this.a=a);return this.normalize()},clone:function(){return new e(this.r,this.b,this.g,this.a)},limit:function(a,b,f){return Math.max(Math.min(a,f),b)},normalize:function(){var a=this.limit;this.r=a(parseInt(this.r,10),0,255);this.g=a(parseInt(this.g,10),0,255);this.b=a(parseInt(this.b,
10),0,255);this.a=a(this.a,0,1);return this},distance:function(a){if(a){a=new e.parse(a);for(var b=0,f=3;-1<--f;)b+=Math.abs(this[this.rgba[f]]-a[this.rgba[f]]);return b}},toString:function(){return 1<=this.a?"rgb("+[this.r,this.g,this.b].join()+")":"rgba("+[this.r,this.g,this.b,this.a].join()+")"},contrast:function(){return 0.5>1-(0.299*this.r+0.587*this.g+0.114*this.b)/255?"#000000":"#ffffff"}};c.extend(e,{parse:function(a){if(a instanceof e)return a;var b;if(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))return new e(parseInt(b[1],
16),parseInt(b[2],16),parseInt(b[3],16));if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))return new e(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10));if(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))return new e(parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16));if(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return new e(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),
parseFloat(b[4]));if(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))return new e(2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3]));if(b=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return new e(2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3]),parseFloat(b[4]));a=(a+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();
return"transparent"==a?new e(255,255,255,0):(b=d[a])?new e(b[0],b[1],b[2]):new e(0,0,0,0)},processColor:function(a,b){var f=b.opacity;if(!a)return"rgba(0, 0, 0, 0)";if(a instanceof e)return a.alpha(f).toString();if(c.isString(a))return e.parse(a).alpha(f).toString();var g=a.colors?a:{colors:a};if(!b.ctx)return c.isArray(g.colors)?e.parse(c.isArray(g.colors[0])?g.colors[0][1]:g.colors[0]).alpha(f).toString():"rgba(0, 0, 0, 0)";g=c.extend({start:"top",end:"bottom"},g);/top/i.test(g.start)&&(b.x1=0);
/left/i.test(g.start)&&(b.y1=0);/bottom/i.test(g.end)&&(b.x2=0);/right/i.test(g.end)&&(b.y2=0);var d,k,m,h=b.ctx.createLinearGradient(b.x1,b.y1,b.x2,b.y2);for(d=0;d<g.colors.length;d++)k=g.colors[d],c.isArray(k)?(m=k[0],k=k[1]):m=d/(g.colors.length-1),h.addColorStop(m,e.parse(k).alpha(f));return h}});Flotr.Color=e})();
Flotr.Date={set:function(e,c,d,a){c="set"+("UTC"===(d||"UTC")?"UTC":"")+c;e[c](a)},get:function(e,c,d){c="get"+("UTC"===(d||"UTC")?"UTC":"")+c;return e[c]()},format:function(e,c,d){function a(a){a+="";return 1==a.length?"0"+a:a}if(e){var b=this.get;e={h:b(e,"Hours",d).toString(),H:a(b(e,"Hours",d)),M:a(b(e,"Minutes",d)),S:a(b(e,"Seconds",d)),s:b(e,"Milliseconds",d),d:b(e,"Date",d).toString(),m:(b(e,"Month",d)+1).toString(),y:b(e,"FullYear",d).toString(),b:Flotr.Date.monthNames[b(e,"Month",d)]};d=
[];for(var f=!1,g=0;g<c.length;++g)b=c.charAt(g),f?(d.push(e[b]||b),f=!1):"%"==b?f=!0:d.push(b);return d.join("")}},getFormat:function(e,c){var d=Flotr.Date.timeUnits;return e<d.second?"%h:%M:%S.%s":e<d.minute?"%h:%M:%S":e<d.day?c<2*d.day?"%h:%M":"%b %d %h:%M":e<d.month?"%b %d":e<d.year?c<d.year?"%b":"%b %y":"%y"},formatter:function(e,c){var d=c.options,a=Flotr.Date.timeUnits[d.timeUnit],b=new Date(e*a);return c.options.timeFormat?Flotr.Date.format(b,d.timeFormat,d.timeMode):Flotr.Date.format(b,Flotr.Date.getFormat(c.tickSize*
Flotr.Date.timeUnits[c.tickUnit],(c.max-c.min)*a),d.timeMode)},generator:function(e){function c(b){d(u,b,p,Flotr.floorInBase(a(u,b,p),q))}var d=this.set,a=this.get,b=this.timeUnits,f=this.spec,g=e.options,p=g.timeMode,k=b[g.timeUnit],m=e.min*k,h=e.max*k,n=(h-m)/g.noTicks,r=[],q=e.tickSize,s,t;s=g.tickFormatter===Flotr.defaultTickFormatter?this.formatter:g.tickFormatter;for(t=0;t<f.length-1;++t){var u=f[t][0]*b[f[t][1]];if(n<(u+f[t+1][0]*b[f[t+1][1]])/2&&u>=q)break}q=f[t][0];f=f[t][1];"year"==f&&(q=
Flotr.getTickSize(g.noTicks*b.year,m,h,0),0.5==q&&(f="month",q=6));e.tickUnit=f;e.tickSize=q;g=q*b[f];u=new Date(m);switch(f){case "millisecond":c("Milliseconds");break;case "second":c("Seconds");break;case "minute":c("Minutes");break;case "hour":c("Hours");break;case "month":c("Month");break;case "year":c("FullYear")}g>=b.second&&d(u,"Milliseconds",p,0);g>=b.minute&&d(u,"Seconds",p,0);g>=b.hour&&d(u,"Minutes",p,0);g>=b.day&&d(u,"Hours",p,0);g>=4*b.day&&d(u,"Date",p,1);g>=b.year&&d(u,"Month",p,0);
m=0;n=NaN;do if(t=n,n=u.getTime(),r.push({v:n/k,label:s(n/k,e)}),"month"==f)if(1>q){d(u,"Date",p,1);var A=u.getTime();d(u,"Month",p,a(u,"Month",p)+1);var B=u.getTime();u.setTime(n+m*b.hour+(B-A)*q);m=a(u,"Hours",p);d(u,"Hours",p,0)}else d(u,"Month",p,a(u,"Month",p)+q);else"year"==f?d(u,"FullYear",p,a(u,"FullYear",p)+q):u.setTime(n+g);while(n<h&&n!=t);return r},timeUnits:{millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,month:2592E6,year:31556952E3},spec:[[1,"millisecond"],[20,"millisecond"],
[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")};
(function(){var e=Flotr._;Flotr.DOM={addClass:function(c,d){var a=c.className?c.className:"";e.include(a.split(/\s+/g),d)||(c.className=(a?a+" ":"")+d)},create:function(c){return document.createElement(c)},node:function(c){var d=Flotr.DOM.create("div");d.innerHTML=c;c=d.children[0];d.innerHTML="";return c},empty:function(c){c.innerHTML=""},hide:function(c){Flotr.DOM.setStyles(c,{display:"none"})},insert:function(c,d){e.isString(d)?c.innerHTML+=d:e.isElement(d)&&c.appendChild(d)},opacity:function(c,
d){c.style.opacity=d},position:function(c,d){if(!c.offsetParent)return{left:c.offsetLeft||0,top:c.offsetTop||0};d=this.position(c.offsetParent);d.left+=c.offsetLeft;d.top+=c.offsetTop;return d},removeClass:function(c,d){c.className=e.filter((c.className?c.className:"").split(/\s+/g),function(a){if(a!=d)return!0}).join(" ")},setStyles:function(c,d){e.each(d,function(a,b){c.style[b]=a})},show:function(c){Flotr.DOM.setStyles(c,{display:""})},size:function(c){return{height:c.offsetHeight,width:c.offsetWidth}}}})();
(function(){var e=Flotr,c=e.bean;e.EventAdapter={observe:function(d,a,b){c.add(d,a,b);return this},fire:function(d,a,b){c.fire(d,a,b);"undefined"!=typeof Prototype&&Event.fire(d,a,b);return this},stopObserving:function(d,a,b){c.remove(d,a,b);return this},eventPointer:function(c){if(!e._.isUndefined(c.touches)&&0<c.touches.length)return{x:c.touches[0].pageX,y:c.touches[0].pageY};if(!e._.isUndefined(c.changedTouches)&&0<c.changedTouches.length)return{x:c.changedTouches[0].pageX,y:c.changedTouches[0].pageY};
if(c.pageX||c.pageY)return{x:c.pageX,y:c.pageY};if(c.clientX||c.clientY){var a=document,b=a.body,a=a.documentElement;return{x:c.clientX+b.scrollLeft+a.scrollLeft,y:c.clientY+b.scrollTop+a.scrollTop}}}}})();
(function(){function e(a,b,c){d.observe.apply(this,arguments);this._handles.push(arguments);return this}var c=Flotr.DOM,d=Flotr.EventAdapter,a=Flotr._,b=Flotr;Graph=function(f,g,c){this._setEl(f);this._initMembers();this._initPlugins();d.fire(this.el,"flotr:beforeinit",[this]);this.data=g;this.series=b.Series.getSeries(g);this._initOptions(c);this._initGraphTypes();this._initCanvas();this._text=new b.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled});d.fire(this.el,
"flotr:afterconstruct",[this]);this._initEvents();this.findDataRanges();this.calculateSpacing();this.draw(a.bind(function(){d.fire(this.el,"flotr:afterinit",[this])},this))};Graph.prototype={destroy:function(){d.fire(this.el,"flotr:destroy");a.each(this._handles,function(a){d.stopObserving.apply(this,a)});this._handles=[];this.data=this.ctx=this.canvas=this.bars=this.axes=this._text=null;this.whiskers=this.series=this.prevHit=this.points=this.plotOffset=this.options=this.lines=this.lastMousePos=this.labels=
this.graphGrid=this.el=this.el.graph=null},observe:e,_observe:e,processColor:function(f,g){var c={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};a.extend(c,g);return b.Color.processColor(f,c)},findDataRanges:function(){var f=this.axes,g,c,d;a.each(this.series,function(a){if(d=a.getRange())g=a.xaxis,c=a.yaxis,g.datamin=Math.min(d.xmin,g.datamin),g.datamax=Math.max(d.xmax,g.datamax),c.datamin=Math.min(d.ymin,c.datamin),c.datamax=Math.max(d.ymax,c.datamax),g.used=g.used||d.xused,
c.used=c.used||d.yused},this);f.x.used||f.x2.used||(f.x.used=!0);f.y.used||f.y2.used||(f.y.used=!0);a.each(f,function(a){a.calculateRange()});var e=a.keys(b.graphTypes),h=!1;a.each(this.series,function(b){b.hide||(a.each(e,function(a){b[a]&&b[a].show&&(this.extendRange(a,b),h=!0)},this),h||this.extendRange(this.options.defaultType,b))},this)},extendRange:function(a,b){this[a].extendRange&&this[a].extendRange(b,b.data,b[a],this[a]);this[a].extendYRange&&this[a].extendYRange(b.yaxis,b.data,b[a],this[a]);
this[a].extendXRange&&this[a].extendXRange(b.xaxis,b.data,b[a],this[a])},calculateSpacing:function(){var b=this.axes,c=this.options,d=this.series,e=c.grid.labelMargin,m=this._text,h=b.x,n=b.x2,r=b.y,q=b.y2,s=c.grid.outlineWidth;a.each(b,function(a){a.calculateTicks();a.calculateTextDimensions(m,c)});b=m.dimensions(c.title,{size:1.5*c.fontSize},"font-size:1em;font-weight:bold;","flotr-title");this.titleHeight=b.height;b=m.dimensions(c.subtitle,{size:c.fontSize},"font-size:smaller;","flotr-subtitle");
this.subtitleHeight=b.height;for(b=0;b<c.length;++b)d[b].points.show&&(s=Math.max(s,d[b].points.radius+d[b].points.lineWidth/2));d=this.plotOffset;!1===h.options.margin?(d.bottom=0,d.top=0):(d.bottom+=(c.grid.circular?0:h.used&&h.options.showLabels?h.maxLabel.height+e:0)+(h.used&&h.options.title?h.titleSize.height+e:0)+s,d.top+=(c.grid.circular?0:n.used&&n.options.showLabels?n.maxLabel.height+e:0)+(n.used&&n.options.title?n.titleSize.height+e:0)+this.subtitleHeight+this.titleHeight+s);!1===r.options.margin?
(d.left=0,d.right=0):(d.left+=(c.grid.circular?0:r.used&&r.options.showLabels?r.maxLabel.width+e:0)+(r.used&&r.options.title?r.titleSize.width+e:0)+s,d.right+=(c.grid.circular?0:q.used&&q.options.showLabels?q.maxLabel.width+e:0)+(q.used&&q.options.title?q.titleSize.width+e:0)+s);d.top=Math.floor(d.top);this.plotWidth=this.canvasWidth-d.left-d.right;this.plotHeight=this.canvasHeight-d.bottom-d.top;h.length=n.length=this.plotWidth;r.length=q.length=this.plotHeight;r.offset=q.offset=this.plotHeight;
h.setScale();n.setScale();r.setScale();q.setScale()},draw:function(a){var b=this.ctx,c;d.fire(this.el,"flotr:beforedraw",[this.series,this]);if(this.series.length){b.save();b.translate(this.plotOffset.left,this.plotOffset.top);for(c=0;c<this.series.length;c++)this.series[c].hide||this.drawSeries(this.series[c]);b.restore();this.clip()}d.fire(this.el,"flotr:afterdraw",[this.series,this]);a&&a()},drawSeries:function(f){function c(a,b){var f=this.getOptions(a,b);this[b].draw(f)}var d=!1;f=f||this.series;
a.each(b.graphTypes,function(a,b){f[b]&&(f[b].show&&this[b])&&(d=!0,c.call(this,f,b))},this);d||c.call(this,f,this.options.defaultType)},getOptions:function(a,c){var d=a[c],e=a.xaxis,m=a.yaxis,e={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:a.data,color:a.color,shadowSize:a.shadowSize,xScale:e.d2p,yScale:m.d2p,xInverse:e.p2d,
yInverse:m.p2d},e=b.merge(d,e);e.fillStyle=this.processColor(d.fillColor||a.color,{opacity:d.fillOpacity});return e},getEventPosition:function(a){var b=document,e=b.body,k=b.documentElement,b=this.axes,m=this.plotOffset,h=this.lastMousePos,n=d.eventPointer(a),r=n.x-h.pageX,h=n.y-h.pageY,q,s;"ontouchstart"in this.el?(q=c.position(this.overlay),s=n.x-q.left-m.left,a=n.y-q.top-m.top):(q=this.overlay.getBoundingClientRect(),s=a.clientX-q.left-m.left-e.scrollLeft-k.scrollLeft,a=a.clientY-q.top-m.top-e.scrollTop-
k.scrollTop);return{x:b.x.p2d(s),x2:b.x2.p2d(s),y:b.y.p2d(a),y2:b.y2.p2d(a),relX:s,relY:a,dX:r,dY:h,absX:n.x,absY:n.y,pageX:n.x,pageY:n.y}},clickHandler:function(a){if(this.ignoreClick)return this.ignoreClick=!1;d.fire(this.el,"flotr:click",[this.getEventPosition(a),this])},mouseMoveHandler:function(a){if(!this.mouseDownMoveHandler){var b=this.getEventPosition(a);d.fire(this.el,"flotr:mousemove",[a,b,this]);this.lastMousePos=b}},mouseDownHandler:function(b){this.mouseUpHandler||(this.mouseUpHandler=
a.bind(function(a){d.stopObserving(document,"mouseup",this.mouseUpHandler);d.stopObserving(document,"mousemove",this.mouseDownMoveHandler);this.mouseUpHandler=this.mouseDownMoveHandler=null;d.fire(this.el,"flotr:mouseup",[a,this])},this),this.mouseDownMoveHandler=a.bind(function(a){a=this.getEventPosition(a);d.fire(this.el,"flotr:mousemove",[b,a,this]);this.lastMousePos=a},this),d.observe(document,"mouseup",this.mouseUpHandler),d.observe(document,"mousemove",this.mouseDownMoveHandler),d.fire(this.el,
"flotr:mousedown",[b,this]),this.ignoreClick=!1)},drawTooltip:function(a,b,d,e){var m=this.getMouseTrack(),h="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",n=e.position,r=e.margin,q=this.plotOffset;null!==b&&null!==d?(e.relative?("n"==n.charAt(0)?h+="bottom:"+(r-q.top-d+this.canvasHeight)+"px;top:auto;":"s"==n.charAt(0)&&(h+="top:"+(r+q.top+d)+"px;bottom:auto;"),"e"==n.charAt(1)?h+="left:"+
(r+q.left+b)+"px;right:auto;":"w"==n.charAt(1)&&(h+="right:"+(r-q.left-b+this.canvasWidth)+"px;left:auto;")):("n"==n.charAt(0)?h+="top:"+(r+q.top)+"px;bottom:auto;":"s"==n.charAt(0)&&(h+="bottom:"+(r+q.bottom)+"px;top:auto;"),"e"==n.charAt(1)?h+="right:"+(r+q.right)+"px;left:auto;":"w"==n.charAt(1)&&(h+="left:"+(r+q.left)+"px;right:auto;")),m.style.cssText=h,c.empty(m),c.insert(m,a),c.show(m)):c.hide(m)},clip:function(a){var c=this.plotOffset,d=this.canvasWidth,e=this.canvasHeight;a=a||this.ctx;b.isIE&&
9>b.isIE?(a.save(),a.fillStyle=this.processColor(this.options.ieBackgroundColor),a.fillRect(0,0,d,c.top),a.fillRect(0,0,c.left,e),a.fillRect(0,e-c.bottom,d,c.bottom),a.fillRect(d-c.right,0,c.right,e),a.restore()):(a.clearRect(0,0,d,c.top),a.clearRect(0,0,c.left,e),a.clearRect(0,e-c.bottom,d,c.bottom),a.clearRect(d-c.right,0,c.right,e))},_initMembers:function(){this._handles=[];this.lastMousePos={pageX:null,pageY:null};this.plotOffset={left:0,right:0,top:0,bottom:0};this.ignoreClick=!0;this.prevHit=
null},_initGraphTypes:function(){a.each(b.graphTypes,function(a,c){this[c]=b.clone(a)},this)},_initEvents:function(){},_initCanvas:function(){var b=this.el,d=this.options,e=b.children,k=[],m,h,n;for(h=e.length;h--;)m=e[h],this.canvas||"flotr-canvas"!==m.className?k.push(m):this.canvas=m;for(h=k.length;h--;)b.removeChild(k[h]);c.setStyles(b,{position:"relative"});n={};n.width=b.clientWidth;n.height=b.clientHeight;if(0>=n.width||0>=n.height||0>=d.resolution)throw"Invalid dimensions for plot, width = "+
n.width+", height = "+n.height+", resolution = "+d.resolution;this.canvas=function(e,p){e||(e=c.create("canvas"),"undefined"!=typeof FlashCanvas&&"function"===typeof e.getContext&&FlashCanvas.initElement(e),e.className="flotr-"+p,e.style.cssText="position:absolute;left:0px;",c.insert(b,e),a.each(n,function(a,b){c.show(e);if("canvas"!=p||e.getAttribute(b)!==a)e.setAttribute(b,a*d.resolution),e.style[b]=a+"px"}));e.context_=null;return e}(this.canvas,"canvas");this.ctx=function(a){window.G_vmlCanvasManager&&
window.G_vmlCanvasManager.initElement(a);a=a.getContext("2d");window.G_vmlCanvasManager||a.scale(d.resolution,d.resolution);return a}(this.canvas);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.canvasHeight=n.height;this.canvasWidth=n.width;this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){a.each(b.plugins,function(f,c){a.each(f.callbacks,function(b,f){this.observe(this.el,f,a.bind(b,this))},this);this[c]=b.clone(f);a.each(this[c],function(b,f){a.isFunction(b)&&
(this[c][f]=a.bind(b,this))},this)},this)},_initOptions:function(f){var c=b.clone(b.defaultOptions);c.x2axis=a.extend(a.clone(c.xaxis),c.x2axis);c.y2axis=a.extend(a.clone(c.yaxis),c.y2axis);this.options=b.merge(f||{},c);null===this.options.grid.minorVerticalLines&&"logarithmic"===this.options.xaxis.scaling&&(this.options.grid.minorVerticalLines=!0);null===this.options.grid.minorHorizontalLines&&"logarithmic"===this.options.yaxis.scaling&&(this.options.grid.minorHorizontalLines=!0);d.fire(this.el,
"flotr:afterinitoptions",[this]);this.axes=b.Axis.getAxes(this.options);var e=[];f=[];var k=c=this.series.length,m=this.options.colors,h=[],n=0,r,q;for(q=k-1;-1<q;--q)if(r=this.series[q].color)--k,a.isNumber(r)?e.push(r):h.push(b.Color.parse(r));for(q=e.length-1;-1<q;--q)k=Math.max(k,e[q]+1);for(q=0;f.length<k;)r=m.length==q?new b.Color(100,100,100):b.Color.parse(m[q]),e=1+0.2*(1==n%2?-1:1)*Math.ceil(n/2),r.scale(e,e,e),f.push(r),++q>=m.length&&(q=0,++n);for(k=q=0;q<c;++q){m=this.series[q];m.color?
a.isNumber(m.color)&&(m.color=f[m.color].toString()):m.color=f[k++].toString();m.xaxis||(m.xaxis=this.axes.x);1==m.xaxis?m.xaxis=this.axes.x:2==m.xaxis&&(m.xaxis=this.axes.x2);m.yaxis||(m.yaxis=this.axes.y);1==m.yaxis?m.yaxis=this.axes.y:2==m.yaxis&&(m.yaxis=this.axes.y2);for(var s in b.graphTypes)m[s]=a.extend(a.clone(this.options[s]),m[s]);m.mouse=a.extend(a.clone(this.options.mouse),m.mouse);a.isUndefined(m.shadowSize)&&(m.shadowSize=this.options.shadowSize)}},_setEl:function(a){if(!a)throw"The target container doesn't exist";
if(a.graph instanceof Graph)a.graph.destroy();else if(!a.clientWidth)throw"The target container must be visible";a.graph=this;this.el=a}};Flotr.Graph=Graph})();
(function(){function e(a){this.orientation=1;this.offset=0;this.datamin=Number.MAX_VALUE;this.datamax=-Number.MAX_VALUE;d.extend(this,a)}function c(a,b){a=Math.log(Math.max(a,Number.MIN_VALUE));b!==Math.E&&(a/=Math.log(b));return a}var d=Flotr._;e.prototype={setScale:function(){var a=this.length,b=this.max,f=this.min,d=this.offset,e=this.orientation,k=this.options,m="logarithmic"===k.scaling,h;this.scale=h=m?a/(c(b,k.base)-c(f,k.base)):a/(b-f);m?(this.d2p=function(a){return d+e*(c(a,k.base)-c(f,k.base))*
h},this.p2d=function(a){a=(d+e*a)/h+c(f,k.base);var b=k.base;return b===Math.E?Math.exp(a):Math.pow(b,a)}):(this.d2p=function(a){return d+e*(a-f)*h},this.p2d=function(a){return(d+e*a)/h+f})},calculateTicks:function(){var a=this.options;this.ticks=[];this.minorTicks=[];a.ticks?(this._cleanUserTicks(a.ticks,this.ticks),this._cleanUserTicks(a.minorTicks||[],this.minorTicks)):"time"==a.mode?this._calculateTimeTicks():"logarithmic"===a.scaling?this._calculateLogTicks():this._calculateTicks();d.each(this.ticks,
function(a){a.label+=""});d.each(this.minorTicks,function(a){a.label+=""})},calculateRange:function(){if(this.used){var a=this.options,b=null!==a.min?a.min:this.datamin,f=null!==a.max?a.max:this.datamax,c=a.autoscaleMargin;"logarithmic"==a.scaling&&(0>=b&&(b=this.datamin),0>=f&&(f=b));if(f==b){var d=f?0.01:1;null===a.min&&(b-=d);null===a.max&&(f+=d)}if("logarithmic"===a.scaling){0>b&&(b=f/a.base);d=Math.log(f);a.base!=Math.E&&(d/=Math.log(a.base));var d=Math.ceil(d),e=Math.log(b);a.base!=Math.E&&
(e/=Math.log(a.base));e=Math.ceil(e);this.tickSize=Flotr.getTickSize(a.noTicks,e,d,null===a.tickDecimals?0:a.tickDecimals);null===a.minorTickFreq&&(a.minorTickFreq=10<d-e?0:5<d-e?2:5)}else this.tickSize=Flotr.getTickSize(a.noTicks,b,f,a.tickDecimals);this.min=b;this.max=f;null===a.min&&a.autoscale&&(this.min-=this.tickSize*c,0>this.min&&0<=this.datamin&&(this.min=0),this.min=this.tickSize*Math.floor(this.min/this.tickSize));null===a.max&&a.autoscale&&(this.max+=this.tickSize*c,0<this.max&&(0>=this.datamax&&
this.datamax!=this.datamin)&&(this.max=0),this.max=this.tickSize*Math.ceil(this.max/this.tickSize));this.min==this.max&&(this.max=this.min+1)}},calculateTextDimensions:function(a,b){var f="",c,d;if(this.options.showLabels)for(d=0;d<this.ticks.length;++d)c=this.ticks[d].label.length,c>f.length&&(f=this.ticks[d].label);this.maxLabel=a.dimensions(f,{size:b.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label");this.titleSize=a.dimensions(this.options.title,{size:1.2*
b.fontSize,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(a,b){var f=this.options,c,e,k;d.isFunction(a)&&(a=a({min:this.min,max:this.max}));for(e=0;e<a.length;++e)k=a[e],"object"===typeof k?(c=k[0],k=1<k.length?k[1]:f.tickFormatter(c,{min:this.min,max:this.max})):(c=k,k=f.tickFormatter(c,{min:this.min,max:this.max})),b[e]={v:c,label:k}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var a=
this.options,b,c=Math.log(this.max);a.base!=Math.E&&(c/=Math.log(a.base));var c=Math.ceil(c),d=Math.log(this.min);a.base!=Math.E&&(d/=Math.log(a.base));for(i=d=Math.ceil(d);i<c;i+=this.tickSize){b=a.base==Math.E?Math.exp(i):Math.pow(a.base,i);var d=b*(a.base==Math.E?Math.exp(this.tickSize):Math.pow(a.base,this.tickSize)),e=(d-b)/a.minorTickFreq;this.ticks.push({v:b,label:a.tickFormatter(b,{min:this.min,max:this.max})});for(b+=e;b<d;b+=e)this.minorTicks.push({v:b,label:a.tickFormatter(b,{min:this.min,
max:this.max})})}b=a.base==Math.E?Math.exp(i):Math.pow(a.base,i);this.ticks.push({v:b,label:a.tickFormatter(b,{min:this.min,max:this.max})})},_calculateTicks:function(){var a=this.options,b=this.tickSize,c=this.max,d=b*Math.ceil(this.min/b),e,k,m,h,n,r;a.minorTickFreq&&(k=b/a.minorTickFreq);for(n=0;(m=h=d+n*b)<=c;++n){r=!1;e=a.tickDecimals;null===e&&(e=1-Math.floor(Math.log(b)/Math.LN10));0>e&&(e=0);m=m.toFixed(e);for(e=0;e<this.ticks.length;++e)if(m==this.ticks[e].v){r=!0;break}r||this.ticks.push({v:m,
label:a.tickFormatter(m,{min:this.min,max:this.max})});if(a.minorTickFreq)for(e=0;e<a.minorTickFreq&&n*b+e*k<c;++e)m=h+e*k,this.minorTicks.push({v:m,label:a.tickFormatter(m,{min:this.min,max:this.max})})}}};d.extend(e,{getAxes:function(a){return{x:new e({options:a.xaxis,n:1,length:this.plotWidth}),x2:new e({options:a.x2axis,n:2,length:this.plotWidth}),y:new e({options:a.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new e({options:a.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,
orientation:-1})}}});Flotr.Axis=e})();
(function(){function e(d){c.extend(this,d)}var c=Flotr._;e.prototype={getRange:function(){var c=this.data,a=c.length,b=Number.MAX_VALUE,f=Number.MAX_VALUE,e=-Number.MAX_VALUE,p=-Number.MAX_VALUE,k=!1,m=!1,h,n,r;if(0>a||this.hide)return!1;for(r=0;r<a;r++)h=c[r][0],n=c[r][1],null!==h&&(h<b&&(b=h,k=!0),h>e&&(e=h,k=!0)),null!==n&&(n<f&&(f=n,m=!0),n>p&&(p=n,m=!0));return{xmin:b,xmax:e,ymin:f,ymax:p,xused:k,yused:m}}};c.extend(e,{getSeries:function(d){return c.map(d,function(a){var b;a.data?(b=new e,c.extend(b,
a)):b=new e({data:a});return b})}});Flotr.Series=e})();
(function(){var e=Flotr,c=e.DOM,d=e._,a=function(a){this.o=a};a.prototype={dimensions:function(a,c,d,e){return a?this.o.html?this.html(a,this.o.element,d,e):this.canvas(a,c):{width:0,height:0}},canvas:function(a,c){if(this.o.textEnabled){c=c||{};var d=this.measureText(a,c).width,p=c.size||e.defaultOptions.fontSize,k=c.angle||0,m=Math.cos(k),k=Math.sin(k);return{width:Math.abs(m*d)+Math.abs(k*p)+2,height:Math.abs(k*d)+Math.abs(m*p)+6}}},html:function(a,f,d,e){f=c.create("div");c.setStyles(f,{position:"absolute",
top:"-10000px"});c.insert(f,'<div style="'+d+'" class="'+e+' flotr-dummy-div">'+a+"</div>");c.insert(this.o.element,f);return c.size(f)},measureText:function(a,c){var g=this.o.ctx,p;if(!g.fillText||e.isIphone&&g.measure)return{width:g.measure(a,c)};c=d.extend({size:e.defaultOptions.fontSize,weight:1,angle:0},c);g.save();g.font=(1<c.weight?"bold ":"")+1.3*c.size+"px sans-serif";p=g.measureText(a);g.restore();return p}};Flotr.Text=a})();
Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:0.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(e){var c=e.context,d=e.lineWidth,a=e.shadowSize,b;c.save();c.lineJoin="round";a&&(c.lineWidth=a/2,b=d/2+c.lineWidth/2,c.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,b+a/2,!1),c.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,b,!1));c.lineWidth=d;c.strokeStyle=e.color;this.plot(e,0,!0);c.restore()},plot:function(e,c,d){function a(){!c&&(e.fill&&t)&&(u=
p(t[0]),b.fillStyle=e.fillStyle,b.lineTo(A,s),b.lineTo(u,s),b.lineTo(u,k(t[1])),b.fill(),e.fillBorder&&b.stroke())}var b=e.context,f=e.width,g=e.height,p=e.xScale,k=e.yScale,m=e.data,h=e.stacked?this.stack:!1,n=m.length-1,r=null,q=null,s=k(0),t=null,u,A,B,z,l,w,v;if(!(1>n)){b.beginPath();for(v=0;v<n;++v)null===m[v][1]||null===m[v+1][1]?e.fill&&(0<v&&m[v][1])&&(b.stroke(),a(),t=null,b.closePath(),b.beginPath()):(u=p(m[v][0]),A=p(m[v+1][0]),null===t&&(t=m[v]),h?(l=h.values[m[v][0]]||0,w=h.values[m[v+
1][0]]||h.values[m[v][0]]||0,B=k(m[v][1]+l),z=k(m[v+1][1]+w),d&&(h.values[m[v][0]]=m[v][1]+l,v==n-1&&(h.values[m[v+1][0]]=m[v+1][1]+w))):(B=k(m[v][1]),z=k(m[v+1][1])),B>g&&z>g||(0>B&&0>z||0>u&&0>A||u>f&&A>f)||(r==u&&q==B+c||b.moveTo(u,B+c),r=A,q=z+c,e.steps?(b.lineTo(r+c/2,B+c),b.lineTo(r+c/2,q)):b.lineTo(r,q)));(!e.fill||e.fill&&!e.fillBorder)&&b.stroke();a();b.closePath()}},extendYRange:function(e,c,d,a){var b=e.options;if(d.stacked&&(!b.max&&0!==b.max||!b.min&&0!==b.min)){var b=e.max,f=e.min,g=
a.positiveSums||{},p=a.negativeSums||{},k,m;for(m=0;m<c.length;m++)k=c[m][0]+"",0<c[m][1]?(g[k]=(g[k]||0)+c[m][1],b=Math.max(b,g[k])):(p[k]=(p[k]||0)+c[m][1],f=Math.min(f,p[k]));a.negativeSums=p;a.positiveSums=g;e.max=b;e.min=f}d.steps&&(this.hit=function(a){var b=a.data,c=a.args,f=a.yScale,d=c[0],e=b.length,c=c[1],g=a.xInverse(d.relX),d=d.relY,p;for(p=0;p<e-1;p++)if(g>=b[p][0]&&g<=b[p+1][0]){8>Math.abs(f(b[p][1])-d)&&(c.x=b[p][0],c.y=b[p][1],c.index=p,c.seriesIndex=a.index);break}},this.drawHit=
function(a){var b=a.context,c=a.args,f=a.data,d=a.xScale,e=c.index,d=d(c.x),c=a.yScale(c.y);f.length-1>e&&(f=a.xScale(f[e+1][0]),b.save(),b.strokeStyle=a.color,b.lineWidth=a.lineWidth,b.beginPath(),b.moveTo(d,c),b.lineTo(f,c),b.stroke(),b.closePath(),b.restore())},this.clearHit=function(a){var b=a.context,c=a.args,f=a.data,d=a.xScale,e=a.lineWidth,g=c.index,d=d(c.x),c=a.yScale(c.y);f.length-1>g&&(a=a.xScale(f[g+1][0]),b.clearRect(d-e,c-e,a-d+2*e,2*e))})}});
Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:0.4,horizontal:!1,stacked:!1,centered:!0,topPadding:0.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(e){var c=e.context;this.current+=1;c.save();c.lineJoin="miter";c.lineWidth=e.lineWidth;c.strokeStyle=e.color;e.fill&&(c.fillStyle=e.fillStyle);this.plot(e);c.restore()},plot:function(e){var c=e.data,d=e.context,a=e.shadowSize,b,f,g,p,k;if(!(1>c.length))for(this.translate(d,
e.horizontal),b=0;b<c.length;b++)f=this.getBarGeometry(c[b][0],c[b][1],e),null!==f&&(g=f.left,p=f.top,k=f.width,f=f.height,e.fill&&d.fillRect(g,p,k,f),a&&(d.save(),d.fillStyle="rgba(0,0,0,0.05)",d.fillRect(g+a,p+a,k,f),d.restore()),e.lineWidth&&d.strokeRect(g,p,k,f))},translate:function(e,c){c&&(e.rotate(-Math.PI/2),e.scale(-1,1))},getBarGeometry:function(e,c,d){var a=d.horizontal,b=d.barWidth,f=d.stacked?this.stack:!1,g=d.lineWidth,p=d.centered?b/2:0,k=a?d.yScale:d.xScale,m=a?d.xScale:d.yScale,h=
a?c:e,a=a?e:c,n=0;d.grouped&&(this.current/this.groups,h-=p,b/=this.groups,p=b/2,h=h+b*this.current-p);f&&(d=0<a?f.positive:f.negative,n=d[h]||n,d[h]=n+a);d=k(h-p);b=k(h+b-p);p=m(a+n);n=m(n);0>n&&(n=0);return null===e||null===c?null:{x:h,y:a,xScale:k,yScale:m,top:p,left:Math.min(d,b)-g/2,width:Math.abs(b-d)-g,height:n-p}},hit:function(e){var c=e.data,d=e.args,a=d[0],d=d[1],b=e.xInverse(a.relX),a=e.yInverse(a.relY),f=this.getBarGeometry(b,a,e),a=f.width/2,b=f.left,f=f.y,g,p;for(p=c.length;p--;)g=this.getBarGeometry(c[p][0],
c[p][1],e),(0<f&&f<g.y||0>f&&f>g.y)&&Math.abs(b-g.left)<a&&(d.x=c[p][0],d.y=c[p][1],d.index=p,d.seriesIndex=e.index)},drawHit:function(e){var c=e.context,d=e.args,a=this.getBarGeometry(d.x,d.y,e),d=a.left,b=a.top,f=a.width,a=a.height;c.save();c.strokeStyle=e.color;c.lineWidth=e.lineWidth;this.translate(c,e.horizontal);c.beginPath();c.moveTo(d,b+a);c.lineTo(d,b);c.lineTo(d+f,b);c.lineTo(d+f,b+a);e.fill&&(c.fillStyle=e.fillStyle,c.fill());c.stroke();c.closePath();c.restore()},clearHit:function(e){var c=
e.context,d=e.args,a=this.getBarGeometry(d.x,d.y,e),d=a.left,b=a.width,f=a.top,a=a.height,g=2*e.lineWidth;c.save();this.translate(c,e.horizontal);c.clearRect(d-g,Math.min(f,f+a)-g,b+2*g,Math.abs(a)+2*g);c.restore()},extendXRange:function(e,c,d,a){this._extendRange(e,c,d,a);this.groups=this.groups+1||1;this.current=0},extendYRange:function(e,c,d,a){this._extendRange(e,c,d,a)},_extendRange:function(e,c,d,a){a=e.options.max;if(!_.isNumber(a)&&!_.isString(a)){a=e.min;var b=e.max,f=d.horizontal,g=e.orientation,
p=this.positiveSums||{},k=this.negativeSums||{},m,h,n;(1==g&&!f||-1==g&&f)&&d.centered&&(b=Math.max(e.datamax+d.barWidth,b),a=Math.min(e.datamin-d.barWidth,a));if(d.stacked&&(1==g&&f||-1==g&&!f))for(n=c.length;n--;)m=c[n][1==g?1:0]+"",h=c[n][1==g?0:1],0<h?(p[m]=(p[m]||0)+h,b=Math.max(b,p[m])):(k[m]=(k[m]||0)+h,a=Math.min(a,k[m]));(1==g&&f||-1==g&&!f)&&d.topPadding&&(e.max===e.datamax||d.stacked&&this.stackMax!==b)&&(b+=d.topPadding*(b-a));this.stackMin=a;this.stackMax=b;this.negativeSums=k;this.positiveSums=
p;e.max=b;e.min=a}}});
Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(e){var c=e.context,d=e.shadowSize;c.save();0<d&&(c.lineWidth=d/2,c.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,d/2+c.lineWidth/2),c.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,c.lineWidth/2));c.lineWidth=e.lineWidth;c.strokeStyle=e.color;e.fill&&(c.fillStyle=e.fillStyle);this.plot(e);c.restore()},plot:function(e,c){var d=e.data,a=e.context,b=e.xScale,f=e.yScale,g,p,k;for(g=
d.length-1;-1<g;--g)k=d[g][1],null!==k&&(p=b(d[g][0]),k=f(k),0>p||(p>e.width||0>k||k>e.height)||(a.beginPath(),c?a.arc(p,k+c,e.radius,0,Math.PI,!1):(a.arc(p,k,e.radius,0,2*Math.PI,!0),e.fill&&a.fill()),a.stroke(),a.closePath()))}});
(function(){var e=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function c(a,c,f){a=f?c.minorTicks:c.ticks;var d=1===c.orientation,e;e={color:c.options.color||q.grid.color,angle:Flotr.toRad(c.options.labelsAngle),textBaseline:"middle"};for(n=0;n<a.length&&(f?c.options.showMinorLabels:c.options.showLabels);++n)b=a[n],b.label+="",b.label&&b.label.length&&(x=Math.cos(n*k+m)*g,y=Math.sin(n*k+m)*g,e.textAlign=d?0.1>Math.abs(x)?"center":
0>x?"right":"left":"left",Flotr.drawText(s,b.label,d?x:3,d?y:-(c.ticks[n].v/c.max)*(g-q.fontSize),e))}function d(a,c,f,d){var e=1===c.orientation,g=1===c.n;f={color:c.options.color||q.grid.color,textAlign:f,textBaseline:d,angle:Flotr.toRad(c.options.labelsAngle)};f=Flotr.getBestTextAlign(f.angle,f);for(n=0;n<c.ticks.length&&c.options.showLabels&&c.used;++n)b=c.ticks[n],b.label&&b.label.length&&(d=c.d2p(b.v),0>d||d>(e?a.plotWidth:a.plotHeight)||(Flotr.drawText(s,b.label,a.plotOffset.left+(e?d:g?-q.grid.labelMargin:
q.grid.labelMargin+a.plotWidth),a.plotOffset.top+(e?q.grid.labelMargin:d)+(e&&g?a.plotHeight:0),f),e||g||(s.save(),s.strokeStyle=f.color,s.beginPath(),s.moveTo(a.plotOffset.left+a.plotWidth-8,a.plotOffset.top+c.d2p(b.v)),s.lineTo(a.plotOffset.left+a.plotWidth,a.plotOffset.top+c.d2p(b.v)),s.stroke(),s.restore())))}function a(a,c){var d=1===c.orientation,e=1===c.n,g="",h,p,k=a.plotOffset;d||e||(s.save(),s.strokeStyle=c.options.color||q.grid.color,s.beginPath());if(c.options.showLabels&&(e||c.used))for(n=
0;n<c.ticks.length;++n)b=c.ticks[n],!b.label||(!b.label.length||0>(d?k.left:k.top)+c.d2p(b.v)||(d?k.left:k.top)+c.d2p(b.v)>(d?a.canvasWidth:a.canvasHeight))||(p=k.top+(d?(e?1:-1)*(a.plotHeight+q.grid.labelMargin):c.d2p(b.v)-c.maxLabel.height/2),h=d?k.left+c.d2p(b.v)-f/2:0,g="",0===n?g=" first":n===c.ticks.length-1&&(g=" last"),g+=d?" flotr-grid-label-x":" flotr-grid-label-y",r+=['<div style="position:absolute; text-align:'+(d?"center":"right")+"; ","top:"+p+"px; ",(d?"left:":"right")+h+"px; ",d?"width:"+
f+"px; ":(e?k.left:k.right)-q.grid.labelMargin,c.options.color?"color:"+c.options.color+"; ":" ",'" class="flotr-grid-label'+g+'">'+b.label+"</div>"].join(" "),d||e||(s.moveTo(k.left+a.plotWidth-8,k.top+c.d2p(b.v)),s.lineTo(k.left+a.plotWidth,k.top+c.d2p(b.v))))}var b,f,g,p,k,m,h,n,r="";p=0;var q=this.options,s=this.ctx;h=this.axes;for(n=0;n<h.x.ticks.length;++n)h.x.ticks[n].label&&++p;f=this.plotWidth/p;q.grid.circular&&(s.save(),s.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+
this.plotHeight/2),g=this.plotHeight*q.radar.radiusRatio/2+q.fontSize,p=this.axes.x.ticks.length,k=2*(Math.PI/p),m=-Math.PI/2,c(this,h.x,!1),c(this,h.x,!0),c(this,h.y,!1),c(this,h.y,!0),s.restore());!q.HtmlText&&this.textEnabled?(d(this,h.x,"center","top"),d(this,h.x2,"center","bottom"),d(this,h.y,"right","middle"),d(this,h.y2,"left","middle")):(h.x.options.showLabels||h.x2.options.showLabels||h.y.options.showLabels||h.y2.options.showLabels)&&!q.grid.circular&&(r="",a(this,h.x),a(this,h.x2),a(this,
h.y),a(this,h.y2),s.stroke(),s.restore(),h=e.create("div"),e.setStyles(h,{fontSize:"smaller",color:q.grid.color}),h.className="flotr-labels",e.insert(this.el,h),e.insert(h,r))}})})();
!function(e,c){"function"==typeof define?define(c):"undefined"!=typeof module?module.exports=c():this[e]=c()}("bonzo",function(){function e(a){return RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b,c){for(var f=0,d=a.length;f<d;f++)b.call(c||a[f],a[f],f,a);return a}function d(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function a(a,b,c,f){f=0;for(j=a.length;f<j;++f)if(b.call(c,a[f],f,a))return!0;return!1}function b(a,b,f){var d=0,e=b||this,g=[];b=u&&"string"==typeof a&&"<"!=
a.charAt(0)?function(b){return(b=u(a))&&(b.selected=1)&&b}():a;return c(p(b),function(a){c(e,function(b){if(!b[t]||b[t]&&!b[t][t]){var c=b.cloneNode(!0);b=(e.$&&e.cloneEvents&&e.$(c).cloneEvents(b),c)}f(a,b);g[d]=b;d++})},this),c(g,function(a,b){e[b]=a}),e.length=d,e}function f(a,b){a.className=H(a.className.replace(e(b)," "))}function g(a){this.length=0;if(a){a="string"==typeof a||a.nodeType||"undefined"==typeof a.length?[a]:a;this.length=a.length;for(var b=0;b<a.length;b++)this[b]=a[b]}}function p(a){return"string"==
typeof a?h.create(a):a&&a.nodeName&&1==a.nodeType?[a]:a}function k(a,b,c){var f=this[0];return null==a&&null==b?(m(f)?{x:r.pageXOffset||s.scrollLeft,y:r.pageYOffset||s.scrollTop}:{x:f.scrollLeft,y:f.scrollTop})[c]:(m(f)?r.scrollTo(a,b):(null!=a&&(f.scrollLeft=a),null!=b&&(f.scrollTop=b)),this)}function m(a){return a===r||/^(?:body|html)$/i.test(a.tagName)}function h(a,b){return new g(a,b)}var n=this,r=window,q=r.document,s=q.documentElement,t="parentNode",u=null,A=/^checked|value|selected$/,B=/select|fieldset|table|tbody|tfoot|td|tr|colgroup/i,
z={thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",fieldset:"form",option:"select"},l=/^checked|selected$/,w=/msie/i.test(navigator.userAgent),v=[],I=0,J=/^-?[\d\.]+$/,D=/(^\s*|\s*$)/g,F={lineHeight:1,zoom:1,zIndex:1,opacity:1},E=function(){var a=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],b;for(b=0;b<a.length;b++)if(a[b]in q.createElement("a").style)return a[b]}(),H=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(D,
"")},L=q.defaultView&&q.defaultView.getComputedStyle?function(a,b){b="transform"==b?E:b;b="transform-origin"==b?E+"Origin":b;var c=null;"float"==b&&(b="cssFloat");var f=q.defaultView.getComputedStyle(a,"");return f&&(c=f[d(b)]),a.style[b]||c}:w&&s.currentStyle?function(a,b){b=d(b);b="float"==b?"styleFloat":b;if("opacity"==b){var c=100;try{c=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(f){try{c=a.filters("alpha").opacity}catch(e){}}return c/100}c=a.currentStyle?a.currentStyle[b]:null;
return a.style[b]||c}:function(a,b){return a.style[d(b)]};g.prototype={get:function(a){return this[a]},each:function(a,b){return c(this,a,b)},map:function(a,b){var c=[],f,d;for(d=0;d<this.length;d++)f=a.call(this,this[d],d),b?b(f)&&c.push(f):c.push(f);return c},first:function(){return h(this[0])},last:function(){return h(this[this.length-1])},html:function(a,b){function f(b){for(;b.firstChild;)b.removeChild(b.firstChild);c(p(a),function(a){b.appendChild(a)})}var d=b?null===s.textContent?"innerText":
"textContent":"innerHTML",e;return"undefined"!=typeof a?this.each(function(b){(e=b.tagName.match(B))?f(b,e[0]):b[d]=a}):this[0]?this[0][d]:""},text:function(a){return this.html(a,1)},addClass:function(a){return this.each(function(b){e(a).test(b.className)||(b.className=H(b.className+" "+a))})},removeClass:function(a){return this.each(function(b){e(a).test(b.className)&&f(b,a)})},hasClass:function(b){return a(this,function(a){return e(b).test(a.className)})},toggleClass:function(a,b){return this.each(function(c){"undefined"!=
typeof b?b?c.className=H(c.className+" "+a):f(c,a):e(a).test(c.className)?f(c,a):c.className=H(c.className+" "+a)})},show:function(a){return this.each(function(b){b.style.display=a||""})},hide:function(a){return this.each(function(a){a.style.display="none"})},append:function(a){return this.each(function(b){c(p(a),function(a){b.appendChild(a)})})},prepend:function(a){return this.each(function(b){var f=b.firstChild;c(p(a),function(a){b.insertBefore(a,f)})})},appendTo:function(a,c){return b.call(this,
a,c,function(a,b){a.appendChild(b)})},prependTo:function(a,c){return b.call(this,a,c,function(a,b){a.insertBefore(b,a.firstChild)})},next:function(){return this.related("nextSibling")},previous:function(){return this.related("previousSibling")},related:function(a){return this.map(function(b){for(b=b[a];b&&1!==b.nodeType;)b=b[a];return b||0},function(a){return a})},before:function(a){return this.each(function(b){c(h.create(a),function(a){b[t].insertBefore(a,b)})})},after:function(a){return this.each(function(b){c(h.create(a),
function(a){b[t].insertBefore(a,b.nextSibling)})})},insertBefore:function(a,c){return b.call(this,a,c,function(a,b){a[t].insertBefore(b,a)})},insertAfter:function(a,c){return b.call(this,a,c,function(a,b){var c=a.nextSibling;c?a[t].insertBefore(b,c):a[t].appendChild(b)})},css:function(a,b,c){if(void 0===b&&"string"==typeof a)return b=this[0],b?b==q||b==r?(c=b==q?h.doc():h.viewport(),"width"==a?c.width:"height"==a?c.height:""):L(b,a):null;var f=a;"string"==typeof a&&(f={},f[a]=b);w&&f.opacity&&(f.filter=
"alpha(opacity="+100*f.opacity+")",f.zoom=a.zoom||1,delete f.opacity);if(b=f["float"])w?f.styleFloat=b:f.cssFloat=b,delete f["float"];return this.each(function(a,b,c){for(var e in f)f.hasOwnProperty(e)&&(c=f[e],(b=d(e))&&J.test(c)&&!(b in F)&&(c+="px"),b="transform"==b?E:b,b="transformOrigin"==b?E+"Origin":b,a.style[b]=c)})},offset:function(a,b){if("number"==typeof a||"number"==typeof b)return this.each(function(c){var f=h(c),d=f.css("position"),e=f.offset(),g="relative"==d,p=[parseInt(f.css("left"),
10),parseInt(f.css("top"),10)];"static"==d&&f.css("position","relative");isNaN(p[0])&&(p[0]=g?0:c.offsetLeft);isNaN(p[1])&&(p[1]=g?0:c.offsetTop);null!=a&&(c.style.left=a-e.left+p[0]+"px");null!=b&&(c.style.top=b-e.top+p[1]+"px")});for(var c=this[0],f=c.offsetWidth,d=c.offsetHeight,e=c.offsetTop,g=c.offsetLeft;c=c.offsetParent;)e+=c.offsetTop,g+=c.offsetLeft;return{top:e,left:g,height:d,width:f}},attr:function(a,b){var c=this[0];if("string"==typeof a||a instanceof String)return"undefined"==typeof b?
A.test(a)?l.test(a)&&"string"==typeof c[a]?!0:c[a]:c.getAttribute(a):this.each(function(c){A.test(a)?c[a]=b:c.setAttribute(a,b)});for(var f in a)a.hasOwnProperty(f)&&this.attr(f,a[f]);return this},val:function(a){return"string"==typeof a?this.attr("value",a):this[0].value},removeAttr:function(a){return this.each(function(b){l.test(a)?b[a]=!1:b.removeAttribute(a)})},data:function(a,b){var c=this[0];return"undefined"==typeof b?(c.getAttribute("data-node-uid")||c.setAttribute("data-node-uid",++I),c=
c.getAttribute("data-node-uid"),v[c]||(v[c]={}),v[c][a]):this.each(function(c){c.getAttribute("data-node-uid")||c.setAttribute("data-node-uid",++I);c=c.getAttribute("data-node-uid");(v[c]||(v[c]={}))[a]=b})},remove:function(){return this.each(function(a){a[t]&&a[t].removeChild(a)})},empty:function(){return this.each(function(a){for(;a.firstChild;)a.removeChild(a.firstChild)})},detach:function(){return this.map(function(a){return a[t].removeChild(a)})},scrollTop:function(a){return k.call(this,null,
a,"y")},scrollLeft:function(a){return k.call(this,a,null,"x")},toggle:function(a){return this.each(function(a){a.style.display=a.offsetWidth||a.offsetHeight?"none":"block"}),a&&a(),this}};h.setQueryEngine=function(a){u=a;delete h.setQueryEngine};h.aug=function(a,b){for(var c in a)a.hasOwnProperty(c)&&((b||g.prototype)[c]=a[c])};h.create=function(a){if("string"==typeof a){var b=/^<([^\s>]+)/.exec(a),b=q.createElement(b&&z[b[1].toLowerCase()]||"div"),c=[];b.innerHTML=a;b=b.firstChild;for(c.push(b);b=
b.nextSibling;)1==b.nodeType&&c.push(b);a=c}else a=a&&a.nodeName&&1==a.nodeType?[a.cloneNode(!0)]:[];return a};h.doc=function(){var a=this.viewport();return{width:Math.max(q.body.scrollWidth,s.scrollWidth,a.width),height:Math.max(q.body.scrollHeight,s.scrollHeight,a.height)}};h.firstChild=function(a){a=a.childNodes;for(var b=0,c=a&&a.length||0,f;b<c;b++)1===a[b].nodeType&&(f=a[c=b]);return f};h.viewport=function(){return{width:w?s.clientWidth:self.innerWidth,height:w?s.clientHeight:self.innerHeight}};
h.isAncestor="compareDocumentPosition"in s?function(a,b){return 16==(a.compareDocumentPosition(b)&16)}:"contains"in s?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b=b[t];)if(b===a)return!0;return!1};var K=n.bonzo;return h.noConflict=function(){return n.bonzo=K,this},h});var envision={_:Flotr._,bean:Flotr.bean,bonzo:bonzo,noConflict:function(e){var c=e.envision;return function(){e.envision=c;return this}}(this)};
(function(){function e(c){this.options=c||{};this.components=[];this.node=null;this.rendered=!1}T_COMPONENT_CONTAINER='<div class="envision-component-container"></div>';e.prototype={render:function(c){var d=this.options;c=c||d.element;if(!c)throw"No element to render within.";this.node=bonzo.create('<div class="envision-visualization"></div>')[0];bonzo(this.node).addClass(d.name||"");this.container=c;bonzo(c).append(this.node);bonzo(c).data("envision",this);_.each(this.components,function(a){this._renderComponent(a)},
this);this._updateClasses();this.rendered=!0;return this},add:function(c){this.components.push(c);this.rendered&&(this._renderComponent(c),this._updateClasses());return this},remove:function(c){var d=this.components,a=this.indexOf(c);-1!==a&&(d.splice(a,1),bonzo(c.container).remove(),this._updateClasses());return this},setPosition:function(c,d){var a=this.components;0<=d&&(d<a.length&&this.remove(c))&&(this.rendered&&(d===a.length?this.node.appendChild(c.container):this.node.insertBefore(c.container,
a[d].container)),a.splice(d,0,c),this._updateClasses());return this},indexOf:function(c){return _.indexOf(this.components,c)},getComponent:function(c){var d=this.components;if(c<d.length)return d[c]},isFirst:function(c){return 0===this.indexOf(c)?!0:!1},isLast:function(c){return this.indexOf(c)===this.components.length-1?!0:!1},destroy:function(){_.each(this.components,function(c){c.destroy()});bonzo(this.container).empty()},_renderComponent:function(c){var d=bonzo.create(T_COMPONENT_CONTAINER)[0];
bonzo(this.node).append(d);c.render(d)},_updateClasses:function(){var c=this.components,d=c.length-1,a;_.each(c,function(b,c){a=bonzo(b.container);0===c?a.addClass("envision-first"):a.removeClass("envision-first");c===d?a.addClass("envision-last"):a.removeClass("envision-last")})}};envision.Visualization=e})();
(function(){function e(a){a=a||{};var b=bonzo.create(d)[0];this.options=a;this.node=b;a.adapter?this.api=a.adapter:a.adapterConstructor?this.api=new a.adapterConstructor(a.config):a.adapterCallback?this.api=a.adapterCallback.call(null,a.config):a.config&&(this.api=new c.adapters.flotr.Child(a.config||{}));this.preprocessors=[]}var c=envision,d='<div class="envision-component"></div>';e.prototype={render:function(a){var b=this.options;a=a||b.element;if(!a)throw"No element to render within.";bonzo(a).addClass(b.name||
"").append(this.node);this._setDimension("width");this._setDimension("height");this.container=a;this.draw(b.data,b.config)},draw:function(a,b){var f=this.api,d=this.options,e=this.preprocessors,k;k=a=a||d.data;b=b||d.config;!d.skipPreprocess&&a&&(k=[],_.each(f.getDataArray(a),function(m,h){var n=e[h]||new c.Preprocessor,r=_.isArray(m),q=_.isFunction(m),s=d.processData,t=f.range(b),u=t.min,t=t.max,A=this.node.clientWidth,B=m,z;q||r||(B=m.data,z=_.extend({},m));q?n=a(u,t,A):(B!==n.data?n.setData(B):
n.reset(),s?(s.apply(this,[{preprocessor:n,min:u,max:t,resolution:A}]),n=n.getData()):n=n.bound(u,t).subsampleMinMax(A).getData());f.transformData&&(n=f.transformData(n));z?(z.data=n,k.push(z)):k.push(n)},this));f&&f.draw(k,b,this.node)},trigger:function(){this.api.trigger.apply(this.api,Array.prototype.concat.apply([this],arguments))},attach:function(){this.api.attach.apply(this.api,Array.prototype.concat.apply([this],arguments))},detach:function(){this.api.detach.apply(this.api,Array.prototype.concat.apply([this],
arguments))},destroy:function(){this.api&&this.api.destroy&&this.api.destroy();bonzo(this.container).empty()},_setDimension:function(a){var b=this.node,c=this.options;c[a]?bonzo(b).css(a,c[a]):c[a]=b.clientWidth;this[a]=c[a]}};c.Component=e})();
(function(){function e(c){this.options=c=c||{};this.actions=[];this.actionOptions=[];this.followers=[];this.leaders=[];this.prevent={};c.leader&&this.leader(c.leader)}var c=envision;e.prototype={leader:function(c){this.leaders.push(c);_.each(this.actions,function(a,b){this._bindLeader(c,a,this.actionOptions[b])},this);return this},follower:function(c){this.followers.push(c);return this},group:function(c){_.isArray(c)||(c=[c]);_.each(c,function(a){this.leader(a);this.follower(a)},this);return this},
add:function(c,a){this.actions.push(c);this.actionOptions.push(a);_.each(this.leaders,function(b){this._bindLeader(b,c,a)},this);return this},_bindLeader:function(c,a,b){_.each(a.events,function(a){var e=a.consumer||a;c.attach(a.handler||a,_.bind(function(a,c){if(!this.prevent[name]){b&&b.callback&&b.callback.call(this,c);this.prevent[name]=!0;try{_.each(this.followers,function(b){a!==b&&b.trigger(e,c)},this)}catch(f){throw this.prevent[name]=!1,f;}this.prevent[name]=!1}},this))},this)}};c.Interaction=
e})();
(function(){function e(a){a=a||{};this.getData=function(){if(this.bounded){delete this.bounded;var a=this.processing,f=this.length(),d=a[0],a=a[1],e=this.max||f,f=c(d,this.min||0),e=_.sortedIndex(d,e);this.processing=[d.slice(f,e+1),a.slice(f,e+1)];this.start=f;this.end=e}return this.processing};this.reset=function(){this.processing=this.data;return this};this.setData=function(a){var c,d;if(!_.isArray(a))throw Error("Array expected.");if(2>a.length)throw Error("Data must contain at least two dimensions.");d=
a[0].length;for(c=a.length;c--;){if(!_.isArray(a[c]))throw Error("Data dimensions must be arrays.");if(a[c].length!==d)throw Error("Data dimensions must contain the same number of points.");}this.data=this.processing=a;return this};a.data&&this.setData(a.data)}function c(a,b){var c=_.sortedIndex(a,b);a[c]>b&&0<c&&c--;return c}function d(a,b,c,d,e,k,m,h,n){a=(a-d)/(k-d);var r=1-a;return(1+2*a)*r*r*e+a*r*r*(k-d)*((m-e)/(2*(k-d))+("undefined"===typeof c?0:(e-c)/(2*(d-b))))+a*a*(3-2*a)*m+a*a*(a-1)*(k-
d)*(("undefined"===typeof n?0:(n-m)/(2*(h-k)))+(m-e)/(2*(k-d)))}e.prototype={length:function(){return this.getData()[0].length},bound:function(a,b){if(!_.isNumber(a)||!_.isNumber(b))return this;this.min=a;this.max=b;this.bounded=!0;return this},subsampleMinMax:function(a){var b=this.bounded;delete this.bounded;var f=this.processing,d=this.length(),e=f[0],f=f[1],k=b?c(e,this.min):0,d=b?_.sortedIndex(e,this.max):d-1,m=[],h=[],n=Number.MAX_VALUE,r=-Number.MAX_VALUE,q=1,s=1,t=(d-k)/((a-2)/2);if(d-k+1>
a){m.push(e[k]);h.push(f[k]);a=k+t;for(b=k;b<d;b++)b===Math.round(a)?(a+=t,n=Math.min(s,q),m.push(e[n]),h.push(f[n]),n=Math.max(s,q),m.push(e[n]),h.push(f[n]),q=b,n=f[q],s=b,r=f[s]):(f[b]>r&&(r=f[b],s=b),f[b]<n&&(n=f[b],q=b));b<a&&(m.push(e[q]),h.push(n),m.push(e[s]),h.push(r));m.push(e[d]);h.push(f[d]);this.processing=[m,h];this.start=k;this.end=d}else this.bounded=b;return this},subsample:function(a){var b=this.bounded;delete this.bounded;var f=this.processing,d=this.length(),e=f[0],f=f[1],k=b?
c(e,this.min):0,d=b?_.sortedIndex(e,this.max):d-1,m=(d-k+1)/a,h=[],n=[],r;if(d-k+1>a){h.push(e[k]);n.push(f[k]);for(b=1;b<a&&!(b*m>=d-m);b++)r=Math.round(b*m)+k,h.push(e[r]),n.push(f[r]);h.push(e[d]);n.push(f[d]);this.processing=[h,n];this.start=k;this.end=d}else this.bounded=b;return this},interpolate:function(a){var b=this.bounded;delete this.bounded;var f=this.processing,e=this.length(),p=f[0],f=f[1],k=b?c(p,this.min):0,b=b?_.sortedIndex(p,this.max):e-1,e=(p[b]-p[k])/a,m=[],h=[],n;m.push(p[k]);
h.push(f[k]);if(b-k+1<a){for(a=k;a<b;a++)for(m.push(p[a]),h.push(f[a]),n=p[a+0]+e;n<p[a+1];n+=e)m.push(n),h.push(d(n,p[a-1],f[a-1],p[a+0],f[a+0],p[a+1],f[a+1],p[a+2],f[a+2]));this.processing=[m,h];this.start=k;this.end=b}return this}};envision.Preprocessor=e})();envision.actions=envision.actions||{};envision.actions.hit={events:["hit","mouseout"]};envision.actions.selection={events:[{handler:"select",consumer:"zoom"},{handler:"click",consumer:"reset"}]};
envision.actions.zoom={events:[{handler:"select",consumer:"zoom"},"zoom","reset"]};envision.adapters=envision.adapters||{};envision.adapters.flotr={};envision.adapters.defaultOptions={grid:{outlineWidth:0,labelMargin:0,horizontalLines:!1,verticalLines:!1},bars:{show:!1,barWidth:0.5,fill:!0,lineWidth:1,fillOpacity:1},lines:{lineWidth:1},xaxis:{margin:!1,tickDecimals:0,showLabels:!1},yaxis:{margin:!1,showLabels:!1},shadowSize:!1};
(function(){function e(a){this.options=a||{};this.flotr=null;this._flotrDefaultOptions()}function c(a,b){var c=a.options.config.selection.mode,d=a.api.flotr.axes,e,h,n,r;-1!==c.indexOf("x")&&(e={},e.min=b.x1,e.max=b.x2,n={},n.min=d.x.d2p(b.x1),n.max=d.x.d2p(b.x2));-1!==c.indexOf("y")&&(h={},h.min=b.y1,h.max=b.y2,r={},r.min=d.y.d2p(b.y1),r.max=d.y.d2p(b.y2));return{data:{x:e,y:h},x:n,y:r}}var d=envision.adapters,a=Flotr.EventAdapter,b=d.defaultOptions;e.prototype={destroy:function(){this.flotr.destroy()},
draw:function(a,b,c){var d=this.options;a=this.getDataArray(a||d.data);b=b?Flotr.merge(b,Flotr.clone(d)):d;d.data=a;if(!b)throw"No graph submitted.";this.flotr=Flotr.draw(c,a,b)},range:function(a){a=a.xaxis;return{min:a.min,max:a.max}},transformData:function(a){var b=a[0].length,c=a.length,d=[],e,h,n;for(h=0;h<b;h++){e=[];for(n=0;n<c;n++)e.push(a[n][h]);d.push(e)}return d},getDataArray:function(a){return a[0]&&(!_.isArray(a[0])||!a[0].length||a[0][0]&&_.isArray(a[0][0]))?a:[a]},_flotrDefaultOptions:function(a){a=
a||this.options;for(var c in b)b.hasOwnProperty(c)&&(_.isUndefined(a[c])?a[c]=b[c]:_.defaults(a[c],b[c]))},attach:function(b,c,d){c=this.events[c]||{};var e=c.handler||!1;c=c.name||!1;return e?a.observe(b.node,c,function(){var a=[b].concat(Array.prototype.slice.call(arguments)),a=e.apply(this,a);return d.apply(null,[b,a])}):!1},detach:function(b,c,d){return a.stopObserve(b.node,c,handler)},trigger:function(a,b,c){return(b=this.events[b].consumer||!1)?b.apply(this,[a,c]):!1},events:{hit:{name:"flotr:hit",
handler:function(a,b){var c=b.x,d=b.y,e=a.api.flotr;return{data:{index:b.index,x:c,y:d},x:e.axes.x.d2p(c),y:e.axes.y.d2p(d)}},consumer:function(a,b){a.api.flotr.hit.hit({x:b.data.x,y:b.data.y||1,relX:b.x,relY:b.y||1})}},select:{name:"flotr:selecting",handler:c,consumer:function(a,b){var c=a.api.flotr,d=c.axes,e=b.data||{},h={},n=b.x,r=b.y;!n&&e.x?(n=e.x,h.x1=n.min,h.x2=n.max):n&&(h.x1=d.x.p2d(n.min),h.x2=d.x.p2d(n.max));!r&&e.y?(r=e.y,h.y1=r.min,h.y2=r.max):r&&(h.y1=d.y.d2p(r.min),h.y2=d.y.d2p(r.max));
c.selection.setSelection(h)}},zoom:{name:"flotr:select",handler:function(a,b){var d=c(a,b);a.trigger("zoom",d);return d},consumer:function(a,b){var c=b.data.x,d=b.data.y,e={};c&&(e.xaxis={min:c.min,max:c.max});d&&(e.yaxis={min:d.min,max:d.max});a.draw(null,e)}},mouseout:{name:"flotr:mouseout",handler:function(a){},consumer:function(a){a.api.flotr.hit.clearHit()}},reset:{name:"flotr:click",handler:function(a){a.draw()},consumer:function(a){a.draw()}},click:{name:"flotr:click",handler:function(a){var b=
a.api.flotr.axes.x.min,c=a.api.flotr.axes.x.max;return{data:{x:{min:b,max:c}},x:{min:a.api.flotr.axes.x.d2p(b),max:a.api.flotr.axes.x.d2p(c)}}},consumer:function(a,b){var c=b.data.x,d=b.data.y,e={};c&&(e.xaxis={min:c.min,max:c.max});d&&(e.yaxis={min:d.min,max:d.max});a.draw(null,e)}}}};d.flotr.Child=e})();
Flotr.addType("lite-lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,lineStyle:"solid"},draw:function(e){var c=e.context,d=e.lineWidth;c.save();c.lineCap="butt";c.lineWidth=d;c.strokeStyle=e.color;"solid"==e.lineStyle?this.plot(e):"dashed"==e.lineStyle&&this.dashedLineTo(e,[10,10]);c.restore()},dashedLineTo:function(e,c){var d=function(a,b){return a<=b},a=function(a,b){return a>=b},b=function(a,b){return Math.min(a,b)},f=function(a,b){return Math.max(a,b)},g={thereYet:a,cap:b},
a={thereYet:a,cap:b};context=e.context;xScale=e.xScale;yScale=e.yScale;data=e.data;length=data.length-1;if(!(1>length)){fromX=xScale(data[0][0]);fromY=yScale(data[0][1]);toX=xScale(data[length][0]);toY=yScale(data[length][1]);0<fromY-toY&&(a.thereYet=d,a.cap=f);0<fromX-toX&&(g.thereYet=d,g.cap=f);context.beginPath();context.moveTo(fromX,fromY);for(var d=fromX,f=fromY,b=0,p=!0;!g.thereYet(d,toX)||!a.thereYet(f,toY);){var k=Math.atan2(toY-fromY,toX-fromX),m=c[b],d=g.cap(toX,d+Math.cos(k)*m),f=a.cap(toY,
f+Math.sin(k)*m);p?context.lineTo(d,f):context.moveTo(d,f);b=(b+1)%c.length;p=!p}context.stroke()}},plot:function(e){var c=e.context,d=e.xScale,a=e.yScale,b=e.data,f=b.length-1,g=a(0),p,k;if(!(1>f)){p=d(b[0][0]);k=a(b[0][1]);c.beginPath();c.moveTo(p,k);for(i=0;i<f;++i)-1E3!=b[i+1][1]&&c.lineTo(d(b[i+1][0]),a(b[i+1][1]));(!e.fill||e.fill&&!e.fillBorder)&&c.stroke();if(e.fill&&(p=d(b[0][0]),c.fillStyle=e.fillStyle,c.lineTo(d(b[f][0]),g),c.lineTo(p,g),c.lineTo(p,a(b[0][1])),c.fill(),e.fillBorder)){p=
d(b[0][0]);c.beginPath();c.moveTo(p,k);for(i=0;i<f;++i)-1E3!=b[i+1][1]&&c.lineTo(d(b[i+1][0]),a(b[i+1][1]));c.stroke()}}},extendYRange:function(e,c,d,a){c=e.options;if(!c.max&&0!==c.max||!c.min&&0!==c.min)e.max+=0.01*d.lineWidth,e.min-=0.01*d.lineWidth}});
Flotr.addType("whiskers",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:0.4,horizontal:!1,stacked:!1,centered:!0},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(e){var c=e.context;c.save();c.lineJoin="miter";c.lineCap="butt";c.lineWidth=e.lineWidth;c.strokeStyle=e.color;e.fill&&(c.fillStyle=e.fillStyle);this.plot(e);c.restore()},plot:function(e){var c=e.data,d=e.context,a=e.xScale,b=e.yScale,f=b(0),g;if(!(1>c.length)){d.translate(-e.lineWidth,
0);d.beginPath();for(e=0;e<c.length;e++)g=a(c[e][0]),d.moveTo(g,f),d.lineTo(g,b(c[e][1]));d.closePath();d.stroke()}},drawHit:function(e){var c=e.args,d=e.context,a=e.xScale,b=e.yScale,f=b(0),a=a(c.x),c=b(c.y);d.save();d.translate(-e.lineWidth,0);d.beginPath();d.moveTo(a,f);d.lineTo(a,c);d.closePath();d.stroke();d.restore()},clearHit:function(e){var c=e.args,d=e.context,a=e.xScale,b=e.yScale;e=e.lineWidth;var f=b(0),a=a(c.x),c=b(c.y);d.save();d.clearRect(a-2*e,c-e,4*e,f-c+e);d.restore()}});
envision.components=envision.components||{};
(function(){function e(c){this.options=c||{}}e.prototype={height:null,width:null,rendered:!1,render:function(c){var d=document.createElement("canvas"),a=bonzo(c).offset();this.height=a.height;this.width=a.width;bonzo(d).attr("height",a.height).attr("width",a.width).css({position:"absolute",top:"0px",left:"0px"});c.appendChild(d);bonzo(c).css({position:"relative"});"undefined"!==typeof FlashCanvas&&FlashCanvas.initElement(d);this.context=d.getContext("2d");this.rendered=!0},draw:function(c,d,a){this.rendered||
this.render(a);c=this.context;a=this.height;var b=this.width,f=Math.round(a/2)-0.5,e;d=d||{min:b/2,max:b/2};e=d.min+0.5;d=d.max+0.5;c.clearRect(0,0,b,a);if(e||d)c.save(),c.strokeStyle=this.options.strokeStyle||"#B6D9FF",c.fillStyle=this.options.fillStyle||"rgba(182, 217, 255, .4)",c.beginPath(),1>=e?(c.moveTo(0,a),c.lineTo(0,-0.5)):(c.moveTo(e,a),c.quadraticCurveTo(e,f,Math.max(e-f,e/2),f),c.lineTo(Math.min(f,e/2),f),c.quadraticCurveTo(0,f,0.5,-0.5)),c.lineTo(b-0.5,-0.5),d>=b-1?c.lineTo(d,a):(c.quadraticCurveTo(b,
f,Math.max(b-f,b-(b-d)/2),f),c.lineTo(Math.min(d+f,b-(b-d)/2),f),c.quadraticCurveTo(d,f,d,a)),c.stroke(),c.closePath(),c.fill(),c.restore()},trigger:function(c,d,a){"zoom"===d?this.zoom(c,a):"reset"===d&&this.reset(c)},zoom:function(c,d){var a=d.x||{};c.draw(null,{min:a.min,max:a.max})},reset:function(c){c.draw(null,{min:c.width/2,max:c.width/2})}};envision.components.QuadraticDrawing=e})();envision.templates=envision.templates||{};
(function(){function e(c){var a=c.resolution;c.preprocessor.bound(c.min,c.max).subsampleMinMax(a+Math.round(a/3))}var c=envision;c.templates.Finance=function(d){var a=d.data,b={price:{name:"envision-finance-price",config:{"lite-lines":{lineWidth:1,show:!0,fill:!0,fillOpacity:0.2},mouse:{track:!0,trackY:!1,trackAll:!0,sensibility:1,trackDecimals:4,position:"ne"},yaxis:{autoscale:!0,autoscaleMargin:0.05,noTicks:4,showLabels:!0,min:0}},processData:e},volume:{name:"envision-finance-volume",config:{whiskers:{show:!0,
lineWidth:2},mouse:{track:!0,trackY:!1,trackAll:!0},yaxis:{autoscale:!0,autoscaleMargin:0.5}},processData:e},summary:{name:"envision-finance-summary",config:{"lite-lines":{show:!0,lineWidth:1,fill:!0,fillOpacity:0.2,fillBorder:!0},xaxis:{noTicks:5,showLabels:!0},yaxis:{autoscale:!0,autoscaleMargin:0.1},handles:{show:!0},selection:{mode:"x"},grid:{verticalLines:!1}}},connection:{name:"envision-finance-connection",adapterConstructor:c.components.QuadraticDrawing}},f=new c.Visualization({name:"envision-finance"}),
g=new c.Interaction,p=new c.Interaction,k,m,h;d.defaults&&(b=Flotr.merge(d.defaults,b));b.price.data=a.price;b.volume.data=a.volume;b.summary.data=a.summary;b.price.config.mouse.trackFormatter=d.trackFormatter||function(b){b=b.index;k.api.preprocessor&&(b+=k.api.preprocessor.start);return"Price: $"+a.price[1][b]+", Vol: "+a.volume[1][b]};d.xTickFormatter&&(b.summary.config.xaxis.tickFormatter=d.xTickFormatter);b.price.config.yaxis.tickFormatter=d.yTickFormatter||function(a){return"$"+a};k=new c.Component(b.price);
m=new c.Component(b.volume);h=new c.Component(b.connection);b=new c.Component(b.summary);f.add(k).add(m).add(h).add(b).render(d.container);g.follower(k).follower(m).follower(h).leader(b).add(c.actions.selection,d.selectionCallback?{callback:d.selectionCallback}:null);p.group([k,m]).add(c.actions.hit);d.selection&&b.trigger("select",d.selection);this.vis=f;this.selection=g;this.hit=p;this.price=k;this.volume=m;this.summary=b}})();
(function(){var e=envision;e.templates.TimeSeries=function(c){var d=c.data,a={detail:{name:"envision-timeseries-detail",config:{"lite-lines":{lineWidth:1,show:!0}}},summary:{name:"envision-timeseries-summary",config:{"lite-lines":{lineWidth:1,show:!0},handles:{show:!0},selection:{mode:"x"},yaxis:{autoscale:!0,autoscaleMargin:0.1}}},connection:{name:"envision-timeseries-connection",adapterConstructor:e.components.QuadraticDrawing}},b=new e.Visualization({name:"envision-timeseries"}),f=new e.Interaction,
g;c.defaults&&(a=Flotr.merge(c.defaults,a));a.detail.data=d.detail;a.summary.data=d.summary;d=new e.Component(a.detail);g=new e.Component(a.connection);a=new e.Component(a.summary);b.add(d).add(g).add(a).render(c.container);f.follower(d).follower(g).leader(a).add(e.actions.selection,c.selectionCallback?{callback:c.selectionCallback}:null);c.selection&&a.trigger("select",c.selection);this.vis=b;this.selection=f;this.detail=d;this.summary=a}})();
(function(){function e(a,b){var c=_.defaults(a,b);c.flotr=_.defaults(c.flotr,b.flotr);return c}var c=envision,d;d=function(a){var b=new c.Visualization,d=new c.Component(e(a.zoom||{},{name:"zoom"})),g=new c.Component(e(a.summary||{},{name:"summary",config:{handles:{show:!0},selection:{mode:"x"}}})),p=new c.Interaction({leader:g});b.add(d).add(g);p.add(c.actions.selection);p.follower(d);this.vis=b;this.interaction=p;a.container&&this.render(a.container)};d.prototype={render:function(a){this.vis.render(a)}};
c.templates.Zoom=d})();