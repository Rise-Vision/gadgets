var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{};RiseVision.Common.News={};RiseVision.Common.News.Settings={};RiseVision.Common.News.Settings=function(){this.isValidURL=!0;this.settings=new RiseVision.Common.Settings};
RiseVision.Common.News.Settings.prototype.initSettings=function(){var a=this;$(".colorPicker").click(function(){newsSettings.showColorPicker($(this).data("for"))});$(".fontSelector").click(function(){newsSettings.showFontSelector($(this).data("for"))});$("#url").blur(function(){if(""!=$(this).val){var b=new google.feeds.Feed($(this).val());b.setNumEntries(1);b.load(function(b){a.isValidURL=b.error?!1:!0})}});$(".meta").change(function(){var a=$(this).val();"author"==a?$(this).is(":checked")?$("li.author").show():
$("li.author").hide():"date"==a&&($(this).is(":checked")&&"background.xml"!=$("input[name='layout']").val()?$("li.date").show():$("li.date").hide())});$(".news").change(function(){var a=$(this).val();$(this).hasClass("news")&&$(".news").each(function(c){if("all"==a)"all"!=$(this).val()&&$(this).prop("checked",!1);else return $(".news").eq(0).prop("checked",!1),!1})});$("input[name='layout']").change(function(){var a=$(this).val();!$("#scrollDirection").is(":visible")||"ltr"!=$("#scrollDirection").val()&&
"rtl"!=$("#scrollDirection").val()?$(this).is(":checked")&&("4x1-headline.xml"==a||"2x1-headline.xml"==a||"1x2-headline.xml"==a||"custom"==a?($("li.headline").show(),$("li.story").show(),$("li.media").show()):"4x1-no-image.xml"==a?($("li.headline").show(),$("li.story").show(),$("li.media").hide()):"4x1-no-headline.xml"==a||"2x1-no-headline.xml"==a||"1x2-no-headline.xml"==a?($("li.headline").hide(),$("li.story").show(),$("li.media").show()):"4x1-no-image-no-headline.xml"==a?($("li.headline").hide(),
$("li.story").show(),$("li.media").hide()):($("li.headline").hide(),$("li.story").hide(),$("li.media").show())):($("li.headline").show(),$("li.story").show(),$("li.media").hide());$(this).is(":checked")&&($("#date").is(":checked")&&"background.xml"!=$(this).val()?$("li.date").show():$("li.date").hide())});$("#transition").change(function(){"continuous"==$(this).val()||"page"==$(this).val()&&("ltr"==$("#scrollDirection").val()||"rtl"==$("#scrollDirection").val())?$("li.transitionHold").hide():$("li.transitionHold").show();
if("fade"!=$(this).val()&&"none"!=$(this).val()){if($("li.transition").show(),"item"==$(this).val()||"continuous"==$(this).val()?$("li.separator").show():$("li.separator").hide(),"ltr"==$("#scrollDirection").val()||"rtl"==$("#scrollDirection").val())$("li.itemsCount").hide(),$("li.layout").hide(),$("li.headlineColor").hide(),$("li.storyColor").hide(),$("li.authorColor").hide(),$("li.dateColor").hide()}else $("li.itemsCount").show(),$("li.transition").hide(),$("li.layout").show(),$("li.headlineColor").show(),
$("li.storyColor").show(),$("li.authorColor").show(),$("li.dateColor").show();$("input[name='layout']").trigger("change");a.setSeparatorVisibility()});$("#scrollDirection").change(function(){!$(this).is(":visible")||"ltr"!=$(this).val()&&"rtl"!=$(this).val()?($("li.itemsCount").show(),$("li.layout").show(),$("li.media").show(),$("li.headlineColor").show(),$("li.storyColor").show(),$("li.authorColor").show(),$("li.dateColor").show(),"continuous"!=$("#transition").val()&&$("li.transitionHold").show()):
($("li.itemsCount").hide(),$("li.layout").hide(),$("li.media").hide(),$("li.headlineColor").hide(),$("li.storyColor").hide(),$("li.authorColor").hide(),$("li.dateColor").hide(),"page"==$("#transition").val()&&$("li.transitionHold").hide());$("input[name='layout']").trigger("change");a.setSeparatorVisibility()});$("#separator").change(function(){$(this).is(":visible")&&$(this).is(":checked")?$("li.separatorDetails").show():$("li.separatorDetails").hide()});gadgets.rpc.call("","rscmd_getAdditionalParams",
function(b){if(b){var c=new gadgets.Prefs;b=JSON.parse(b);$("#url").val(c.getString("url"));$("#all").attr("checked",c.getBool("all"));$("#entertainment").attr("checked",c.getBool("entertainment"));$("#sports").attr("checked",c.getBool("sports"));$("#top").attr("checked",c.getBool("top"));$("#queue").val(c.getString("queue"));$("#itemsCount").val(c.getString("itemsCount"));$("#transition").val(c.getString("transition"));$("#scrollDirection").val(c.getString("scrollDirection"));$("#scrollSpeed").val(c.getString("scrollSpeed"));
$("#separator").attr("checked",c.getBool("separator"));$("#separatorColor").val(c.getString("separatorColor"));$("#separatorSize").val(c.getString("separatorSize"));$("#transitionHold").val(c.getString("transitionHold"));$("#transitionResumes").val(c.getString("transitionResumes"));$("#bgColor").val(c.getString("bgColor"));$("#acceptance").attr("checked",c.getBool("acceptance"));$("input[type='radio'][name='contentType']").each(function(){$(this).val()==c.getString("contentType")&&$(this).attr("checked",
"checked")});$("#author").attr("checked",c.getBool("author"));$("#date").attr("checked",c.getBool("date"));$("input[type='radio'][name='layout']").each(function(){$(this).val()==c.getString("layout")&&$(this).attr("checked","checked")});$("#layoutURL").val(c.getString("layoutURL"));c.getBool("separator")&&$("li.separatorDetails").show();a.populateColor($("#separatorColor"),c.getString("separatorColor"));a.populateColor($("#bgColor"),c.getString("bgColor"));a.populateColor($("#headlineColor"),b.headlineColor);
a.populateColor($("#storyColor"),b.storyColor);a.populateColor($("#authorColor"),b.authorColor);a.populateColor($("#dateColor"),b.dateColor);$("#headline_font-style").text(b.headline_font);$("#headline_font-style").data("css",b["headline_font-style"]);$("#headlinePadding").val(b.headlinePadding);$("#headlineColor").val(b.headlineColor);$("#story_font-style").text(b.story_font);$("#story_font-style").data("css",b["story_font-style"]);$("#storyPadding").val(b.storyPadding);$("#storyColor").val(b.storyColor);
$("#mediaPadding").val(b.mediaPadding);$("#author_font-style").text(b.author_font);$("#author_font-style").data("css",b["author_font-style"]);$("#authorPadding").val(b.authorPadding);$("#authorColor").val(b.authorColor);$("#date_font-style").text(b.date_font);$("#date_font-style").data("css",b["date_font-style"]);$("#datePadding").val(b.datePadding);$("#dateColor").val(b.dateColor)}$("form ol li ol.drillDown li:visible:last").css({clear:"left","float":"left","margin-bottom":"10px"});$("#settings").show();
$(".meta").trigger("change");$("#transition").trigger("change");$("#scrollDirection").trigger("change")})};RiseVision.Common.News.Settings.prototype.setSeparatorVisibility=function(){"up"!=$("#scrollDirection").val()&&"down"!=$("#scrollDirection").val()||"item"!=$("#transition").val()&&"continuous"!=$("#transition").val()?$("li.separator").hide():$("li.separator").show();$("#separator").trigger("change")};
RiseVision.Common.News.Settings.prototype.populateColor=function(a,b){a.val(b);a.css("background-color",b)};RiseVision.Common.News.Settings.prototype.showColorPicker=function(a){gadgets.rpc.call("","rscmd_openColorPicker",null,a,$("#"+a).val())};RiseVision.Common.News.Settings.prototype.showFontSelector=function(a){gadgets.rpc.call("","rscmd_openFontSelector",null,a,$("#"+a).data("css"))};
RiseVision.Common.News.Settings.prototype.setColor=function(a,b){$("#"+a).val(b);$("#"+a).css("background-color",b)};RiseVision.Common.News.Settings.prototype.setFont=function(a,b,c){$("#"+a).data("css",b);$("#"+a).text(c)};
RiseVision.Common.News.Settings.prototype.getSettings=function(){var a=!1,b=document.getElementsByClassName("errors")[0],c="",c=null;$(".errors").empty();a=newsSettings.settings.validateRequired($("#url"),b,"RSS URL")?!0:a;a||newsSettings.isValidURL||(b.innerHTML+="RSS URL is invalid.<br />",a=!0);a=newsSettings.settings.validateRequired($("#queue"),b,"Queue")?!0:a;a=newsSettings.settings.validateNumeric($("#queue"),b,"Queue")?!0:a;0>=parseInt($("#queue").val())&&(b.innerHTML+="Queue must be greater than 0.<br />",
a=!0);a=newsSettings.settings.validateRequired($("#itemsCount"),b,"Items Count")?!0:a;a=newsSettings.settings.validateNumeric($("#itemsCount"),b,"Items Count")?!0:a;$("#itemsCount").is(":visible")&&0>=parseInt($("#itemsCount").val())&&(b.innerHTML+="Items Count must be greater than 0.<br />",a=!0);$("#separatorSize").is(":visible")&&(a=newsSettings.settings.validateNumeric($("#separatorSize"),b,"Separator Size")?!0:a,0>=parseInt($("#separatorSize").val())&&(b.innerHTML+="Separator Size must be greater than 0.<br />",
a=!0));a=newsSettings.settings.validateRequired($("#transitionHold"),b,"Transition Hold")?!0:a;a=newsSettings.settings.validateNumeric($("#transitionHold"),b,"Transition Hold")?!0:a;$("#transitionHold").is(":visible")&&0>=parseInt($("#transitionHold").val())&&(b.innerHTML+="Transition Hold must be greater than 0.<br />",a=!0);a=newsSettings.settings.validateRequired($("#transitionResumes"),b,"Transition Resumes")?!0:a;a=newsSettings.settings.validateNumeric($("#transitionResumes"),b,"Transition Resumes")?
!0:a;$("#transitionResumes").is(":visible")&&0>=parseInt($("#transitionResumes").val())&&(b.innerHTML+="Transition Resumes must be greater than 0.<br />",a=!0);a=newsSettings.settings.validateNumeric($("#headlinePadding"),b,"Headline Padding")?!0:a;a=newsSettings.settings.validateNumeric($("#storyPadding"),b,"Summary / Story Padding")?!0:a;a=newsSettings.settings.validateNumeric($("#mediaPadding"),b,"Media Padding")?!0:a;a=newsSettings.settings.validateNumeric($("#authorPadding"),b,"Author Padding")?
!0:a;a=newsSettings.settings.validateNumeric($("#datePadding"),b,"Date Padding")?!0:a;"custom"==$("input[type='radio'][name='layout']:checked").val()&&(a=newsSettings.settings.validateRequired($("#layoutURL"),b,"Layout URL")?!0:a);if(a)return $(".errors").fadeIn(200).css("display","inline-block"),$("#wrapper").scrollTop(0),null;null!=$("#url").val()?c="up_url="+escape($("#url").val()):(c=$("#all").is(":checked")?"up_all=true":"up_all=false",c+=$("#entertainment").is(":checked")?"&up_entertainment=true":
"&up_entertainment=false",c+=$("#sports").is(":checked")?"&up_sports=true":"&up_sports=false",c+=$("#top").is(":checked")?"&up_top=true":"&up_top=false");c+="&up_queue="+$("#queue").val()+"&up_itemsCount="+$("#itemsCount").val()+"&up_transition="+$("#transition").val()+"&up_scrollDirection="+$("#scrollDirection").val()+"&up_scrollSpeed="+$("#scrollSpeed").val();c+="&up_separatorColor="+$("#separatorColor").val()+"&up_separatorSize="+$("#separatorSize").val()+"&up_transitionHold="+$("#transitionHold").val()+
"&up_transitionResumes="+$("#transitionResumes").val()+"&up_bgColor="+$("#bgColor").val();c+=$("#separator").is(":checked")?"&up_separator=true":"&up_separator=false";a=$("input[type='radio'][name='contentType']:checked");0<a.length&&(c+="&up_contentType="+a.val());c+=$("#author").is(":checked")?"&up_author=true":"&up_author=false";c+=$("#date").is(":checked")?"&up_date=true":"&up_date=false";a=$("input[type='radio'][name='layout']:checked");0<a.length&&(c+="&up_layout="+a.val());c+="&up_layoutURL="+
$("#layoutURL").val();c=$("#acceptance").is(":checked")?c+"&up_acceptance=true":c+"&up_acceptance=false";c={params:c,additionalParams:JSON.stringify(newsSettings.saveAdditionalParams())};$(".errors").css({display:"none"});return c};
RiseVision.Common.News.Settings.prototype.saveAdditionalParams=function(){var a={};a.headline_font=$("#headline_font-style").text();a["headline_font-style"]=$("#headline_font-style").data("css");a.headlinePadding=""==$("#headlinePadding").val()?0:$("#headlinePadding").val();a.headlineColor=$("#headlineColor").val();a.story_font=$("#story_font-style").text();a["story_font-style"]=$("#story_font-style").data("css");a.storyPadding=""==$("#storyPadding").val()?0:$("#storyPadding").val();a.storyColor=
$("#storyColor").val();a.mediaPadding=""==$("#mediaPadding").val()?0:$("#mediaPadding").val();a.author_font=$("#author_font-style").text();a["author_font-style"]=$("#author_font-style").data("css");a.authorPadding=""==$("#authorPadding").val()?0:$("#authorPadding").val();a.authorColor=$("#authorColor").val();a.date_font=$("#date_font-style").text();a["date_font-style"]=$("#date_font-style").data("css");a.datePadding=""==$("#datePadding").val()?0:$("#datePadding").val();a.dateColor=$("#dateColor").val();
return a};