(function(s){s.fn.swipe=function(d){if(!this)return!1;var b={fingers:1,threshold:75,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto"},q="left",t="right",u="up",v="down",r="end",k="cancel",c="start";void 0!=d.allowPageScroll||void 0==d.swipe&&void 0==d.swipeStatus||(d.allowPageScroll="none");d&&s.extend(b,d);return this.each(function(){var g,d,n,p;function l(a){d=g=p=n=h=0}function m(a,c){b.swipeStatus&&b.swipeStatus.call(e,
a,c,direction||null,distance||0);c==k&&b.click&&(1==h&&(isNaN(distance)||0==distance))&&b.click.call(e,a,a.target);if(c==r)switch(b.swipe&&b.swipe.call(e,a,direction,distance),direction){case q:b.swipeLeft&&b.swipeLeft.call(e,a,direction,distance);break;case t:b.swipeRight&&b.swipeRight.call(e,a,direction,distance);break;case u:b.swipeUp&&b.swipeUp.call(e,a,direction,distance);break;case v:b.swipeDown&&b.swipeDown.call(e,a,direction,distance)}}function w(){return Math.round(Math.sqrt(Math.pow(g-n,
2)+Math.pow(d-p,2)))}function x(){var a;a=Math.atan2(d-p,n-g);a=Math.round(180*a/Math.PI);0>a&&(a=360-Math.abs(a));return 45>=a&&0<=a?q:360>=a&&315<=a?q:135<=a&&225>=a?t:45<a&&135>a?v:u}var e=s(this),h=0;d=g=p=n=0;this.addEventListener("touchstart",function(a){c="start";h=a.touches.length;distance=0;direction=null;h==b.fingers?(n=g=a.touches[0].pageX,p=d=a.touches[0].pageY,b.swipeStatus&&m(a,c)):l(a)},!1);this.addEventListener("touchmove",function(a){if(c!=r&&c!=k){g=a.touches[0].pageX;d=a.touches[0].pageY;
direction=x();h=a.touches.length;c="move";var e=direction;if("none"==b.allowPageScroll)a.preventDefault();else{var f="auto"==b.allowPageScroll;switch(e){case q:(b.swipeLeft&&f||!f&&"horizontal"!=b.allowPageScroll)&&a.preventDefault();break;case t:(b.swipeRight&&f||!f&&"horizontal"!=b.allowPageScroll)&&a.preventDefault();break;case u:(b.swipeUp&&f||!f&&"vertical"!=b.allowPageScroll)&&a.preventDefault();break;case v:(b.swipeDown&&f||!f&&"vertical"!=b.allowPageScroll)&&a.preventDefault()}}h==b.fingers?
(distance=w(),b.swipeStatus&&m(a,c,direction,distance),!b.triggerOnTouchEnd&&distance>=b.threshold&&(c=r,m(a,c),l(a))):(c=k,m(a,c),l(a))}},!1);this.addEventListener("touchend",function(a){a.preventDefault();distance=w();direction=x();b.triggerOnTouchEnd?(c=r,h==b.fingers&&0!=g?distance>=b.threshold||(c=k):c=k,m(a,c),l(a)):"move"==c&&(c=k,m(a,c),l(a))},!1);this.addEventListener("touchcancel",l,!1)})}})(jQuery);